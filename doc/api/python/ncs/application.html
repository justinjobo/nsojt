<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>ncs.application API documentation</title>
<meta name="description" content="Module for building NCS applications." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<style>
#pubhub-container .pubhub-doc-container article#content,
#pubhub-container .pubhub-doc-container nav#sidebar {
width: inherit;
height: inherit;
}
</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>ncs.application</code></h1>
</header>
<section id="section-intro">
<p>Module for building NCS applications.</p>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="ncs.application.get_device"><code class="name flex">
<span>def <span class="ident">get_device</span></span>(<span>node, name)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a device node by name.</p>
<p>Returns a maagic node representing a device.</p>
<p>Arguments:</p>
<ul>
<li>node &ndash; any maagic node with a Transaction backend or a Transaction object</li>
<li>name &ndash; the device name (string)</li>
</ul>
<p>Returns:</p>
<ul>
<li>device node (maagic.Node)</li>
</ul></div>
</dd>
<dt id="ncs.application.get_ned_id"><code class="name flex">
<span>def <span class="ident">get_ned_id</span></span>(<span>device)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the ned-id of a device.</p>
<p>Returns the ned-id as a string or None if not found.</p>
<p>Arguments:</p>
<ul>
<li>device &ndash; a maagic node representing the device (maagic.Node)</li>
</ul>
<p>Returns:</p>
<ul>
<li>ned_id (str)</li>
</ul></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="ncs.application.Application"><code class="flex name class">
<span>class <span class="ident">Application</span></span>
<span>(</span><span>*args, **kwds)</span>
</code></dt>
<dd>
<div class="desc"><p>Class for easy implementation of an NCS application.</p>
<p>This class is intended to be sub-classed and used as a 'component class'
inside an NCS package. It will be instantiated by NCS when the package
is loaded. The setup() method should to be implemented to register
service- and action callbacks. When NCS stops or an error occurs,
teardown() will be called. A 'log' attribute is available for logging.</p>
<p>Example application:</p>
<pre><code>from ncs.application import Application, Service, NanoService
from ncs.dp import Action, ValidationPoint

class FooService(Service):
    @Service.create
    def cb_create(self, tctx, root, service, proplist):
        # service code here

class FooNanoService(NanoService):
    @NanoService.create
    def cb_nano_create(self, tctx, root, service, plan, component,
                       state, proplist, compproplist):
        # service code here

class FooAction(Action):
    @Action.action
    def cb_action(self, uinfo, name, kp, input, output):
        # action code here

class FooValidation(ValidationPoint):
    @ValidationPoint.validate
    def cb_validate(self, tctx, keypath, value, validationpoint):
        # validation code here

class MyApp(Application):
    def setup(self):
        self.log.debug('MyApp start')
        self.register_service('myservice-1', FooService)
        self.register_service('myservice-2', FooService, 'init_arg')
        self.register_nano_service('nano-1', 'myserv:router',
                                   'myserv:ntp-initialized',
                                   FooNanoService)
        self.register_action('action-1', FooAction)
        self.register_validation('validation-1', FooValidation)

    def teardown(self):
        self.log.debug('MyApp finish')
</code></pre>
<p>Initialize an Application object.</p>
<p>Don't try to initialize this object. I will be done by NCS.</p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li>ncs_pyvm.ncspyvm.NcsPyVM</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="ncs.application.Application.APP_WORKER_STOP_TIMEOUT_S"><code class="name">var <span class="ident">APP_WORKER_STOP_TIMEOUT_S</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="ncs.application.Application.create_daemon"><code class="name flex">
<span>def <span class="ident">create_daemon</span></span>(<span>self, name=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Name the underlying dp.Daemon object (deprecated)</p></div>
</dd>
<dt id="ncs.application.Application.register_action"><code class="name flex">
<span>def <span class="ident">register_action</span></span>(<span>self, actionpoint, action_cls, init_args=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Register an action callback class.</p>
<p>Call this method to register 'action_cls' as the action callback
class for action point 'actionpoint'. 'action_cls' should be a
subclass of dp.Action. If the optional argument 'init_args' is
supplied it will be passed in to the init() method of the subclass.</p>
<p>Arguments:</p>
<ul>
<li>actionpoint &ndash; actionpoint (str)</li>
<li>action_cls &ndash; action callback class</li>
<li>init_args &ndash; initial arguments (optional)</li>
</ul></div>
</dd>
<dt id="ncs.application.Application.register_fun"><code class="name flex">
<span>def <span class="ident">register_fun</span></span>(<span>self, start_fun, stop_fun)</span>
</code></dt>
<dd>
<div class="desc"><p>Register custom start and stop functions.</p>
<p>Call this method to register a start and stop function that
will be called with a dp.Daemon.State during application
setup.</p>
<p>Example start and stop functions:</p>
<pre><code>def my_start_fun(state):
    state.log.info('my_start_fun START')
    return (state, time.time())

def my_stop_fun(fun_data):
    (state, start_time) = fun_data
    state.log.info('my_start_fun started {}'.format(start_time))
    state.log.info('my_start_fun STOP')
</code></pre>
<p>Arguments:</p>
<ul>
<li>start_fun &ndash; start function (fun)</li>
<li>stop_fun &ndash; stop function (fun)</li>
</ul></div>
</dd>
<dt id="ncs.application.Application.register_nano_service"><code class="name flex">
<span>def <span class="ident">register_nano_service</span></span>(<span>self, servicepoint, componenttype, state, nano_service_cls, init_args=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Register a nano service callback class.</p>
<p>Call this method to register 'nano_service_cls' as the nano service
callback class for service point 'servicepoint'.
'nano service_cls' should be a subclass of NanoService.
If the optional argument 'init_args' is supplied
it will be passed in to the init() method of the subclass.</p>
<p>Arguments:</p>
<ul>
<li>servicepoint &ndash; servicepoint (str)</li>
<li>componenttype &ndash; nano plan component(str)</li>
<li>state &ndash; nano plan state (str)</li>
<li>service_cls &ndash; service callback class</li>
<li>init_args &ndash; initial arguments (optional)</li>
</ul></div>
</dd>
<dt id="ncs.application.Application.register_service"><code class="name flex">
<span>def <span class="ident">register_service</span></span>(<span>self, servicepoint, service_cls, init_args=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Register a service callback class.</p>
<p>Call this method to register 'service_cls' as the service callback
class for service point 'servicepoint'. 'service_cls' should be a
subclass of Service. If the optional argument 'init_args' is supplied
it will be passed in to the init() method of the subclass.</p>
<p>Arguments:</p>
<ul>
<li>servicepoint &ndash; servicepoint (str)</li>
<li>service_cls &ndash; service callback class</li>
<li>init_args &ndash; initial arguments (optional)</li>
</ul></div>
</dd>
<dt id="ncs.application.Application.register_trans_cb"><code class="name flex">
<span>def <span class="ident">register_trans_cb</span></span>(<span>self, trans_cb_cls)</span>
</code></dt>
<dd>
<div class="desc"><p>Register a transaction callback class.</p>
<p>If a custom transaction callback implementation is needed, call this
method with the transaction callback class as the 'trans_cb_cls'
argument.</p>
<p>Arguments:</p>
<ul>
<li>trans_cb_cls &ndash; transaction callback class</li>
</ul></div>
</dd>
<dt id="ncs.application.Application.register_validation"><code class="name flex">
<span>def <span class="ident">register_validation</span></span>(<span>self, validationpoint, validation_cls, init_args=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Register a validation callback class.</p>
<p>Call this method to register 'validation_cls' as the
validation callback class for validation point
'validationpoint'. 'validation_cls' should be a subclass of
ValidationPoint. If the optional argument 'init_args' is
supplied it will be passed in to the init() method of the
subclass.</p>
<p>Arguments:</p>
<ul>
<li>validationpoint &ndash; validationpoint (str)</li>
<li>validation_cls &ndash; validation callback class</li>
<li>init_args &ndash; initial arguments (optional)</li>
</ul></div>
</dd>
<dt id="ncs.application.Application.set_log_level"><code class="name flex">
<span>def <span class="ident">set_log_level</span></span>(<span>self, log_level)</span>
</code></dt>
<dd>
<div class="desc"><p>Set log level for all workers (only relevant for
_ProcessAppWorker)</p>
<p>Arguments:</p>
<ul>
<li>log_level &ndash; logging level, using logging.Logger (int)</li>
</ul></div>
</dd>
<dt id="ncs.application.Application.set_self_assign_warning"><code class="name flex">
<span>def <span class="ident">set_self_assign_warning</span></span>(<span>self, warning)</span>
</code></dt>
<dd>
<div class="desc"><p>Set self assign warning for all workers.</p>
<p>Arguments:</p>
<ul>
<li>warning &ndash; warning type (alarm, log, off). (string)</li>
</ul></div>
</dd>
<dt id="ncs.application.Application.setup"><code class="name flex">
<span>def <span class="ident">setup</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Application setup method.</p>
<p>Override this method to register actions and services. Any other
initialization could also be done here. If the call to this method
throws an exception the teardown method will be immediately called
and the application shutdown.</p></div>
</dd>
<dt id="ncs.application.Application.teardown"><code class="name flex">
<span>def <span class="ident">teardown</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Application teardown method.</p>
<p>Override this method to clean up custom resources allocated in
setup().</p></div>
</dd>
</dl>
</dd>
<dt id="ncs.application.NanoService"><code class="flex name class">
<span>class <span class="ident">NanoService</span></span>
<span>(</span><span>daemon, servicepoint, componenttype, state, log=None, init_args=None)</span>
</code></dt>
<dd>
<div class="desc"><p>NanoService callback.</p>
<p>This class makes it easy to create and register nano service callbacks by
subclassing it and implementing some of the nano service callbacks.</p>
<p>Initialize this object.</p>
<p>The 'daemon' argument should be a Daemon instance. 'servicepoint'
is the name of the tailf:servicepoint to manage. Argument 'log' can
be any log object, and if not set the Daemon log will be used.
'init_args' may be any object that will be passed into init() when
this object is constructed. Lastly, the low-level function
dp.register_nano_service_cb() will be called.</p>
<p>When creating a service callback using Application.register_nano_service
there is no need to manually initialize this object as it is then
done automatically.</p></div>
<h3>Static methods</h3>
<dl>
<dt id="ncs.application.NanoService.create"><code class="name flex">
<span>def <span class="ident">create</span></span>(<span>fn)</span>
</code></dt>
<dd>
<div class="desc"><p>Decorator for the cb_nano_create callback.</p>
<p>Using this decorator alters the signature of the cb_create callback
and passes in maagic.Node objects for root and service.
The maagic.Node objects received in 'root' and 'service' are backed
by a MAAPI connection with the FASTMAP handle attached. To update
'proplist' simply return it from this function.</p>
<p>Example of a decorated cb_create:</p>
<pre><code>@NanoService.create
def cb_nano_create(self, tctx, root,
                   service, plan, component, state,
                   proplist, compproplist):
    pass
</code></pre>
<p>Callback arguments:</p>
<ul>
<li>tctx - transaction context (TransCtxRef)</li>
<li>root &ndash; root node (maagic.Node)</li>
<li>service &ndash; service node (maagic.Node)</li>
<li>plan &ndash; current plan node (maagic.Node)</li>
<li>component &ndash; plan component active for this invokation</li>
<li>state &ndash; plan component state active for this invokation</li>
<li>proplist - properties (list(tuple(str, str)))</li>
<li>compproplist - component properties (list(tuple(str, str)))</li>
</ul></div>
</dd>
<dt id="ncs.application.NanoService.delete"><code class="name flex">
<span>def <span class="ident">delete</span></span>(<span>fn)</span>
</code></dt>
<dd>
<div class="desc"><p>Decorator for the cb_nano_delete callback.</p>
<p>Using this decorator alters the signature of the cb_delete callback
and passes in maagic.Node objects for root and service.
The maagic.Node objects received in 'root' and 'service' are backed
by a MAAPI connection with the FASTMAP handle attached. To update
'proplist' simply return it from this function.</p>
<p>Example of a decorated cb_create:</p>
<pre><code>@NanoService.delete
def cb_nano_delete(self, tctx, root,
                   service, plan, component, state,
                   proplist, compproplist):
    pass
</code></pre>
<p>Callback arguments:</p>
<ul>
<li>tctx - transaction context (TransCtxRef)</li>
<li>root &ndash; root node (maagic.Node)</li>
<li>service &ndash; service node (maagic.Node)</li>
<li>plan &ndash; current plan node (maagic.Node)</li>
<li>component &ndash; plan component active for this invokation</li>
<li>state &ndash; plan component state active for this invokation</li>
<li>proplist - properties (list(tuple(str, str)))</li>
<li>compproplist - component properties (list(tuple(str, str)))</li>
</ul></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="ncs.application.NanoService.maapi"><code class="name">var <span class="ident">maapi</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="ncs.application.NanoService.init"><code class="name flex">
<span>def <span class="ident">init</span></span>(<span>self, init_args)</span>
</code></dt>
<dd>
<div class="desc"><p>Custom initialization.</p>
<p>When registering a service using Application this method will be
called with the 'init_args' passed into the register_service()
function.</p></div>
</dd>
<dt id="ncs.application.NanoService.start"><code class="name flex">
<span>def <span class="ident">start</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Start NanoService</p></div>
</dd>
<dt id="ncs.application.NanoService.stop"><code class="name flex">
<span>def <span class="ident">stop</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Stop NanoService</p></div>
</dd>
</dl>
</dd>
<dt id="ncs.application.PlanComponent"><code class="flex name class">
<span>class <span class="ident">PlanComponent</span></span>
<span>(</span><span>planpath, name, component_type)</span>
</code></dt>
<dd>
<div class="desc"><p>Service plan component.</p>
<p>The usage of this class is in conjunction with a service that
uses a reactive FASTMAP pattern.
With a plan the service states can be tracked and controlled.</p>
<p>A service plan can consist of many PlanComponent's.
This is operational data that is stored together with the service
configuration.</p>
<p>Initialize a PlanComponent.</p></div>
<h3>Methods</h3>
<dl>
<dt id="ncs.application.PlanComponent.append_state"><code class="name flex">
<span>def <span class="ident">append_state</span></span>(<span>self, state_name)</span>
</code></dt>
<dd>
<div class="desc"><p>Append a new state to this plan component.</p>
<p>The state status will be initialized to 'ncs:not-reached'.</p></div>
</dd>
<dt id="ncs.application.PlanComponent.set_failed"><code class="name flex">
<span>def <span class="ident">set_failed</span></span>(<span>self, state_name)</span>
</code></dt>
<dd>
<div class="desc"><p>Set state status to 'ncs:failed'.</p></div>
</dd>
<dt id="ncs.application.PlanComponent.set_reached"><code class="name flex">
<span>def <span class="ident">set_reached</span></span>(<span>self, state_name)</span>
</code></dt>
<dd>
<div class="desc"><p>Set state status to 'ncs:reached'.</p></div>
</dd>
<dt id="ncs.application.PlanComponent.set_status"><code class="name flex">
<span>def <span class="ident">set_status</span></span>(<span>self, state_name, status)</span>
</code></dt>
<dd>
<div class="desc"><p>Set state status.</p></div>
</dd>
</dl>
</dd>
<dt id="ncs.application.Service"><code class="flex name class">
<span>class <span class="ident">Service</span></span>
<span>(</span><span>daemon, servicepoint, log=None, init_args=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Service callback.</p>
<p>This class makes it easy to create and register service callbacks by
subclassing it and implementing some of the service callbacks.</p>
<p>Initialize this object.</p>
<p>The 'daemon' argument should be a Daemon instance. 'servicepoint'
is the name of the tailf:servicepoint to manage. Argument 'log' can
be any log object, and if not set the Daemon log will be used.
'init_args' may be any object that will be passed into init() when
this object is constructed. Lastly, the low-level function
dp.register_service_cb() will be called.</p>
<p>When creating a service callback using Application.register_service
there is no need to manually initialize this object as it is then
done automatically.</p></div>
<h3>Static methods</h3>
<dl>
<dt id="ncs.application.Service.create"><code class="name flex">
<span>def <span class="ident">create</span></span>(<span>fn)</span>
</code></dt>
<dd>
<div class="desc"><p>Decorator for the cb_create callback.</p>
<p>Using this decorator alters the signature of the cb_create callback
and passes in maagic.Node objects for root and service.
The maagic.Node objects received in 'root' and 'service' are backed
by a MAAPI connection with the FASTMAP handle attached. To update
'proplist' simply return it from this function.</p>
<p>Example of a decorated cb_create:</p>
<pre><code>@Service.create
def cb_create(self, tctx, root, service, proplist):
    pass
</code></pre>
<p>Callback arguments:</p>
<ul>
<li>tctx - transaction context (TransCtxRef)</li>
<li>root &ndash; root node (maagic.Node)</li>
<li>service &ndash; service node (maagic.Node)</li>
<li>proplist - properties (list(tuple(str, str)))</li>
</ul></div>
</dd>
<dt id="ncs.application.Service.post_modification"><code class="name flex">
<span>def <span class="ident">post_modification</span></span>(<span>fn)</span>
</code></dt>
<dd>
<div class="desc"><p>Decorator for the cb_post_modification callback.</p>
<p>For details see Service.pre_modification decorator.</p></div>
</dd>
<dt id="ncs.application.Service.pre_modification"><code class="name flex">
<span>def <span class="ident">pre_modification</span></span>(<span>fn)</span>
</code></dt>
<dd>
<div class="desc"><p>Decorator for the cb_pre_modification callback.</p>
<p>Using this decorator alters the signature of the cb_pre_modification.
callback and passes in a maagic.Node object for root.
This method is invoked outside FASTMAP. To update 'proplist' simply
return it from this function.</p>
<p>Example of a decorated cb_pre_modification:</p>
<pre><code>@Service.pre_modification
def cb_pre_modification(self, tctx, op, kp, root, proplist):
    pass
</code></pre>
<p>Callback arguments:</p>
<ul>
<li>tctx - transaction context (TransCtxRef)</li>
<li>op &ndash; operation (int)</li>
<li>kp &ndash; keypath (HKeypathRef)</li>
<li>root &ndash; root node (maagic.Node)</li>
<li>proplist - properties (list(tuple(str, str)))</li>
</ul></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="ncs.application.Service.maapi"><code class="name">var <span class="ident">maapi</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="ncs.application.Service.init"><code class="name flex">
<span>def <span class="ident">init</span></span>(<span>self, init_args)</span>
</code></dt>
<dd>
<div class="desc"><p>Custom initialization.</p>
<p>When registering a service using Application this method will be
called with the 'init_args' passed into the register_service()
function.</p></div>
</dd>
<dt id="ncs.application.Service.start"><code class="name flex">
<span>def <span class="ident">start</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Start Service</p></div>
</dd>
<dt id="ncs.application.Service.stop"><code class="name flex">
<span>def <span class="ident">stop</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Stop Service</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="ncs" href="index.html">ncs</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="ncs.application.get_device" href="#ncs.application.get_device">get_device</a></code></li>
<li><code><a title="ncs.application.get_ned_id" href="#ncs.application.get_ned_id">get_ned_id</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="ncs.application.Application" href="#ncs.application.Application">Application</a></code></h4>
<ul class="">
<li><code><a title="ncs.application.Application.APP_WORKER_STOP_TIMEOUT_S" href="#ncs.application.Application.APP_WORKER_STOP_TIMEOUT_S">APP_WORKER_STOP_TIMEOUT_S</a></code></li>
<li><code><a title="ncs.application.Application.create_daemon" href="#ncs.application.Application.create_daemon">create_daemon</a></code></li>
<li><code><a title="ncs.application.Application.register_action" href="#ncs.application.Application.register_action">register_action</a></code></li>
<li><code><a title="ncs.application.Application.register_fun" href="#ncs.application.Application.register_fun">register_fun</a></code></li>
<li><code><a title="ncs.application.Application.register_nano_service" href="#ncs.application.Application.register_nano_service">register_nano_service</a></code></li>
<li><code><a title="ncs.application.Application.register_service" href="#ncs.application.Application.register_service">register_service</a></code></li>
<li><code><a title="ncs.application.Application.register_trans_cb" href="#ncs.application.Application.register_trans_cb">register_trans_cb</a></code></li>
<li><code><a title="ncs.application.Application.register_validation" href="#ncs.application.Application.register_validation">register_validation</a></code></li>
<li><code><a title="ncs.application.Application.set_log_level" href="#ncs.application.Application.set_log_level">set_log_level</a></code></li>
<li><code><a title="ncs.application.Application.set_self_assign_warning" href="#ncs.application.Application.set_self_assign_warning">set_self_assign_warning</a></code></li>
<li><code><a title="ncs.application.Application.setup" href="#ncs.application.Application.setup">setup</a></code></li>
<li><code><a title="ncs.application.Application.teardown" href="#ncs.application.Application.teardown">teardown</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="ncs.application.NanoService" href="#ncs.application.NanoService">NanoService</a></code></h4>
<ul class="two-column">
<li><code><a title="ncs.application.NanoService.create" href="#ncs.application.NanoService.create">create</a></code></li>
<li><code><a title="ncs.application.NanoService.delete" href="#ncs.application.NanoService.delete">delete</a></code></li>
<li><code><a title="ncs.application.NanoService.init" href="#ncs.application.NanoService.init">init</a></code></li>
<li><code><a title="ncs.application.NanoService.maapi" href="#ncs.application.NanoService.maapi">maapi</a></code></li>
<li><code><a title="ncs.application.NanoService.start" href="#ncs.application.NanoService.start">start</a></code></li>
<li><code><a title="ncs.application.NanoService.stop" href="#ncs.application.NanoService.stop">stop</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="ncs.application.PlanComponent" href="#ncs.application.PlanComponent">PlanComponent</a></code></h4>
<ul class="">
<li><code><a title="ncs.application.PlanComponent.append_state" href="#ncs.application.PlanComponent.append_state">append_state</a></code></li>
<li><code><a title="ncs.application.PlanComponent.set_failed" href="#ncs.application.PlanComponent.set_failed">set_failed</a></code></li>
<li><code><a title="ncs.application.PlanComponent.set_reached" href="#ncs.application.PlanComponent.set_reached">set_reached</a></code></li>
<li><code><a title="ncs.application.PlanComponent.set_status" href="#ncs.application.PlanComponent.set_status">set_status</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="ncs.application.Service" href="#ncs.application.Service">Service</a></code></h4>
<ul class="two-column">
<li><code><a title="ncs.application.Service.create" href="#ncs.application.Service.create">create</a></code></li>
<li><code><a title="ncs.application.Service.init" href="#ncs.application.Service.init">init</a></code></li>
<li><code><a title="ncs.application.Service.maapi" href="#ncs.application.Service.maapi">maapi</a></code></li>
<li><code><a title="ncs.application.Service.post_modification" href="#ncs.application.Service.post_modification">post_modification</a></code></li>
<li><code><a title="ncs.application.Service.pre_modification" href="#ncs.application.Service.pre_modification">pre_modification</a></code></li>
<li><code><a title="ncs.application.Service.start" href="#ncs.application.Service.start">start</a></code></li>
<li><code><a title="ncs.application.Service.stop" href="#ncs.application.Service.stop">stop</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>