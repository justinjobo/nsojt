var Va=Object.create;var Ut=Object.defineProperty;var $a=Object.getOwnPropertyDescriptor;var Ga=Object.getOwnPropertyNames;var Ka=Object.getPrototypeOf,Ja=Object.prototype.hasOwnProperty;var Xa=(H,K)=>()=>(K||H((K={exports:{}}).exports,K),K.exports);var Ya=(H,K,ee,t)=>{if(K&&typeof K=="object"||typeof K=="function")for(let ae of Ga(K))!Ja.call(H,ae)&&ae!==ee&&Ut(H,ae,{get:()=>K[ae],enumerable:!(t=$a(K,ae))||t.enumerable});return H};var Za=(H,K,ee)=>(ee=H!=null?Va(Ka(H)):{},Ya(K||!H||!H.__esModule?Ut(ee,"default",{value:H,enumerable:!0}):ee,H));var $t=Xa((Yl,Vt)=>{"use strict";var nl=['"'," ","}","'","\\","	","["];function rl(H,K=!1){if(Number.isFinite(H))return H;let ee=K,t=["\\",'"'],ae=H.split("").reduce((_e,we)=>(nl.includes(we)&&(ee=!0),t.includes(we)&&_e.push("\\"),_e.push(we),_e),[]).join("");return ee||ae===""?`"${ae}"`:ae}Vt.exports={quoteKey:rl}});var el=async({opfsDir:H,filename:K})=>{try{return(await H.getFileHandle(K))?.kind==="file"}catch(ee){if(ee?.name==="NotFoundError")return!1;throw ee}},tl=async({opfsRoot:H,destinationFile:K,location:ee,funcs:{fetchFn:t=fetch}={}})=>{let _e=await(await t(ee)).arrayBuffer(),Ce=await(await H.getFileHandle(K,{create:!0})).createSyncAccessHandle(),De=new DataView(_e);Ce.write(De),Ce.flush(),Ce.close()},zt=async({location:H,filename:K,forceReload:ee,funcs:{navigator_:t=navigator,fileExists_:ae=el,downloadFile_:_e=tl}={}})=>{let we=await t.storage.getDirectory(),De=!await ae({opfsDir:we,filename:K})||ee;return De&&await _e({opfsRoot:we,destinationFile:K,location:H}),{filename:K,isCached:!De}},Wt=async({filename:H,funcs:{navigator_:K=navigator}={}}={})=>{if(!K.storage)return[];let ee=await K.storage.getDirectory(),t=await ee.entries(),ae=[];for await(let[,_e]of t)_e.name===H&&(await ee.removeEntry(_e.name),ae.push(_e.name));return ae},Qt=async({funcs:{navigator_:H=navigator}={}}={})=>{if(!H.storage)return[];let K=await H.storage.getDirectory(),ee=await K.entries(),t=[];for await(let[,ae]of ee)await K.removeEntry(ae.name),t.push(ae.name);return t};var Cl=Object.freeze({});var Dl=Object.freeze({NODE_ENV:"production",WEBUI_TRACING:!1});var He=H=>typeof H=="function";var Hl=Object.freeze({});var il=Za($t());var sl=H=>H.length===0,Kt=H=>Array.isArray(H)&&sl(H);var Jt=H=>{let K=new URL(H)?.pathname;return K.slice(K.lastIndexOf("/")+1).replaceAll(/[:+]/g,"")};var ft={call:"CALL",init:"INIT",initAck:"INIT_ACK"};var ol=H=>({methods:H,type:ft.initAck});function al(H){return H?(H.constructor!==Object?Object.getOwnPropertyNames(Object.getPrototypeOf(H)):Object.getOwnPropertyNames(H)).reduce((ee,t)=>(typeof H[t]=="function"&&t!=="constructor"&&ee.push(t),ee),[]):[]}async function ll(H,{method:K,params:ee,port:t}){try{let ae=H[K];if(!He(ae))throw new TypeError(`Worker method "${K}" is not a function`);let _e=await ae.apply(H,ee);t.postMessage({result:_e})}catch(ae){t.postMessage({error:ae})}t.close()}function Xt(H){let K=al(H);if(Kt(K))throw Error("Parameter is not an object or the object has no functions to expose");self.addEventListener("message",({data:ee})=>{switch(ee.type){case ft.init:return self.postMessage(ol(K));case ft.call:return ll(H,ee);default:throw new Error(`Unknown message "${ee.type}"`)}})}var pt=(()=>{var H=import.meta.url;return function(K){var ee=K||{},t=typeof ee<"u"?ee:{},ae,_e;t.ready=new Promise(function(n,e){ae=n,_e=e});let we=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,we.debugModule("globalThis.location =",globalThis.location);let Ce="emscripten-bug-17951";t[Ce]=function n(e,s){e.env.foo=function(){};let o=t.locateFile(n.uri,typeof Se>"u"?"":Se);we.debugModule("instantiateWasm() uri =",o);let r=()=>fetch(o,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(r(),e).then(p=>s(p.instance,p.module)):async()=>r().then(p=>p.arrayBuffer()).then(p=>WebAssembly.instantiate(p,e)).then(p=>s(p.instance,p.module)))(),{}},t[Ce].uri="sqlite3.wasm";var De=Object.assign({},t),mt=[],ht="./this.program",en=(n,e)=>{throw e},Ze=typeof window=="object",Ne=typeof importScripts=="function",tn=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",hl=!Ze&&!tn&&!Ne,Se="";function nn(n){return t.locateFile?t.locateFile(n,Se):Se+n}var et,gt,tt,rn;(Ze||Ne)&&(Ne?Se=self.location.href:typeof document<"u"&&document.currentScript&&(Se=document.currentScript.src),H&&(Se=H),Se.indexOf("blob:")!==0?Se=Se.substr(0,Se.replace(/[?#].*/,"").lastIndexOf("/")+1):Se="",et=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},Ne&&(tt=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),gt=(n,e,s)=>{var o=new XMLHttpRequest;o.open("GET",n,!0),o.responseType="arraybuffer",o.onload=()=>{if(o.status==200||o.status==0&&o.response){e(o.response);return}s()},o.onerror=s,o.send(null)},rn=n=>document.title=n);var Ve=t.print||console.log.bind(console),Oe=t.printErr||console.warn.bind(console);Object.assign(t,De),De=null,t.arguments&&(mt=t.arguments),t.thisProgram&&(ht=t.thisProgram),t.quit&&(en=t.quit);var gl=16,sn=4;function yl(n){switch(n){case"i1":case"i8":case"u8":return 1;case"i16":case"u16":return 2;case"i32":case"u32":return 4;case"i64":case"u64":return 8;case"float":return 4;case"double":return 8;default:{if(n[n.length-1]==="*")return sn;if(n[0]==="i"){let e=Number(n.substr(1));return qt(e%8===0,"getNativeTypeSize invalid bits "+e+", type "+n),e/8}return 0}}}var Ue;t.wasmBinary&&(Ue=t.wasmBinary);var on=t.noExitRuntime||!0;typeof WebAssembly!="object"&&Pe("no native wasm support detected");var Fe,yt=!1,an;function qt(n,e){n||Pe(e)}var bt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Me(n,e,s){for(var o=e+s,r=e;n[r]&&!(r>=o);)++r;if(r-e>16&&n.buffer&&bt)return bt.decode(n.subarray(e,r));for(var i="";e<r;){var p=n[e++];if(!(p&128)){i+=String.fromCharCode(p);continue}var g=n[e++]&63;if((p&224)==192){i+=String.fromCharCode((p&31)<<6|g);continue}var T=n[e++]&63;if((p&240)==224?p=(p&15)<<12|g<<6|T:p=(p&7)<<18|g<<12|T<<6|n[e++]&63,p<65536)i+=String.fromCharCode(p);else{var j=p-65536;i+=String.fromCharCode(55296|j>>10,56320|j&1023)}}return i}function ln(n,e){return n?Me(je,n,e):""}function $e(n,e,s,o){if(!(o>0))return 0;for(var r=s,i=s+o-1,p=0;p<n.length;++p){var g=n.charCodeAt(p);if(g>=55296&&g<=57343){var T=n.charCodeAt(++p);g=65536+((g&1023)<<10)|T&1023}if(g<=127){if(s>=i)break;e[s++]=g}else if(g<=2047){if(s+1>=i)break;e[s++]=192|g>>6,e[s++]=128|g&63}else if(g<=65535){if(s+2>=i)break;e[s++]=224|g>>12,e[s++]=128|g>>6&63,e[s++]=128|g&63}else{if(s+3>=i)break;e[s++]=240|g>>18,e[s++]=128|g>>12&63,e[s++]=128|g>>6&63,e[s++]=128|g&63}}return e[s]=0,s-r}function wt(n,e,s){return $e(n,je,e,s)}function ze(n){for(var e=0,s=0;s<n.length;++s){var o=n.charCodeAt(s);o<=127?e++:o<=2047?e+=2:o>=55296&&o<=57343?(e+=4,++s):e+=3}return e}var ql,be,je,Ge,cn,se,me,nt,vt,un,rt;function Et(){var n=Fe.buffer;t.HEAP8=be=new Int8Array(n),t.HEAP16=Ge=new Int16Array(n),t.HEAP32=se=new Int32Array(n),t.HEAPU8=je=new Uint8Array(n),t.HEAPU16=cn=new Uint16Array(n),t.HEAPU32=me=new Uint32Array(n),t.HEAPF32=nt=new Float32Array(n),t.HEAPF64=rt=new Float64Array(n),t.HEAP64=vt=new BigInt64Array(n),t.HEAPU64=un=new BigUint64Array(n)}var bl=524288,xt=t.INITIAL_MEMORY||16777216;t.wasmMemory?Fe=t.wasmMemory:Fe=new WebAssembly.Memory({initial:xt/65536,maximum:32768}),Et(),xt=Fe.buffer.byteLength;var _n,St=[],At=[],wl=[],kt=[],fn=!1;function vl(){return on}function pn(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)hn(t.preRun.shift());ot(St)}function dn(){fn=!0,!t.noFSInit&&!a.init.initialized&&a.init(),a.ignorePermissions=!1,Le.init(),ot(At)}function mn(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)yn(t.postRun.shift());ot(kt)}function hn(n){St.unshift(n)}function gn(n){At.unshift(n)}function El(n){}function yn(n){kt.unshift(n)}var Re=0,st=null,We=null;function xl(n){return n}function it(n){Re++,t.monitorRunDependencies&&t.monitorRunDependencies(Re)}function Ke(n){if(Re--,t.monitorRunDependencies&&t.monitorRunDependencies(Re),Re==0&&(st!==null&&(clearInterval(st),st=null),We)){var e=We;We=null,e()}}function Pe(n){t.onAbort&&t.onAbort(n),n="Aborted("+n+")",Oe(n),yt=!0,an=1,n+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(n);throw _e(e),e}var qn="data:application/octet-stream;base64,";function It(n){return n.startsWith(qn)}function Sl(n){return n.startsWith("file://")}var Ae;t.locateFile?(Ae="sqlite3.wasm",It(Ae)||(Ae=nn(Ae))):Ae=new URL("sqlite3.wasm",import.meta.url).href;function Tt(n){try{if(n==Ae&&Ue)return new Uint8Array(Ue);if(tt)return tt(n);throw"both async and sync fetching of the wasm failed"}catch(e){Pe(e)}}function bn(){return!Ue&&(Ze||Ne)&&typeof fetch=="function"?fetch(Ae,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Ae+"'";return n.arrayBuffer()}).catch(function(){return Tt(Ae)}):Promise.resolve().then(function(){return Tt(Ae)})}function wn(){var n={env:Dt,wasi_snapshot_preview1:Dt};function e(p,g){var T=p.exports;t.asm=T,_n=t.asm.__indirect_function_table,gn(t.asm.__wasm_call_ctors),Ke("wasm-instantiate")}it("wasm-instantiate");function s(p){e(p.instance)}function o(p){return bn().then(function(g){return WebAssembly.instantiate(g,n)}).then(function(g){return g}).then(p,function(g){Oe("failed to asynchronously prepare wasm: "+g),Pe(g)})}function r(){return!Ue&&typeof WebAssembly.instantiateStreaming=="function"&&!It(Ae)&&typeof fetch=="function"?fetch(Ae,{credentials:"same-origin"}).then(function(p){var g=WebAssembly.instantiateStreaming(p,n);return g.then(s,function(T){return Oe("wasm streaming compile failed: "+T),Oe("falling back to ArrayBuffer instantiation"),o(s)})}):o(s)}if(t.instantiateWasm)try{var i=t.instantiateWasm(n,e);return i}catch(p){Oe("Module.instantiateWasm callback failed with error: "+p),_e(p)}return r().catch(_e),{}}var ie,ye,Al={};function kl(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function ot(n){for(;n.length>0;)n.shift()(t)}function Il(n,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return be[n>>0];case"i8":return be[n>>0];case"i16":return Ge[n>>1];case"i32":return se[n>>2];case"i64":return vt[n>>3];case"float":return nt[n>>2];case"double":return rt[n>>3];case"*":return me[n>>2];default:Pe("invalid type for getValue: "+e)}return null}function Tl(n,e,s="i8"){switch(s.endsWith("*")&&(s="*"),s){case"i1":be[n>>0]=e;break;case"i8":be[n>>0]=e;break;case"i16":Ge[n>>1]=e;break;case"i32":se[n>>2]=e;break;case"i64":ye=[e>>>0,(ie=e,+Math.abs(ie)>=1?ie>0?(Math.min(+Math.floor(ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],se[n>>2]=ye[0],se[n+4>>2]=ye[1];break;case"float":nt[n>>2]=e;break;case"double":rt[n>>3]=e;break;case"*":me[n>>2]=e;break;default:Pe("invalid type for setValue: "+s)}}var ue={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return e.exec(n).slice(1)},normalizeArray:(n,e)=>{for(var s=0,o=n.length-1;o>=0;o--){var r=n[o];r==="."?n.splice(o,1):r===".."?(n.splice(o,1),s++):s&&(n.splice(o,1),s--)}if(e)for(;s;s--)n.unshift("..");return n},normalize:n=>{var e=ue.isAbs(n),s=n.substr(-1)==="/";return n=ue.normalizeArray(n.split("/").filter(o=>!!o),!e).join("/"),!n&&!e&&(n="."),n&&s&&(n+="/"),(e?"/":"")+n},dirname:n=>{var e=ue.splitPath(n),s=e[0],o=e[1];return!s&&!o?".":(o&&(o=o.substr(0,o.length-1)),s+o)},basename:n=>{if(n==="/")return"/";n=ue.normalize(n),n=n.replace(/\/$/,"");var e=n.lastIndexOf("/");return e===-1?n:n.substr(e+1)},join:function(){var n=Array.prototype.slice.call(arguments);return ue.normalize(n.join("/"))},join2:(n,e)=>ue.normalize(n+"/"+e)};function vn(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else return()=>Pe("randomDevice")}var Ie={resolve:function(){for(var n="",e=!1,s=arguments.length-1;s>=-1&&!e;s--){var o=s>=0?arguments[s]:a.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";n=o+"/"+n,e=ue.isAbs(o)}return n=ue.normalizeArray(n.split("/").filter(r=>!!r),!e).join("/"),(e?"/":"")+n||"."},relative:(n,e)=>{n=Ie.resolve(n).substr(1),e=Ie.resolve(e).substr(1);function s(j){for(var Q=0;Q<j.length&&j[Q]==="";Q++);for(var V=j.length-1;V>=0&&j[V]==="";V--);return Q>V?[]:j.slice(Q,V-Q+1)}for(var o=s(n.split("/")),r=s(e.split("/")),i=Math.min(o.length,r.length),p=i,g=0;g<i;g++)if(o[g]!==r[g]){p=g;break}for(var T=[],g=p;g<o.length;g++)T.push("..");return T=T.concat(r.slice(p)),T.join("/")}};function at(n,e,s){var o=s>0?s:ze(n)+1,r=new Array(o),i=$e(n,r,0,r.length);return e&&(r.length=i),r}var Le={ttys:[],init:function(){},shutdown:function(){},register:function(n,e){Le.ttys[n]={input:[],output:[],ops:e},a.registerDevice(n,Le.stream_ops)},stream_ops:{open:function(n){var e=Le.ttys[n.node.rdev];if(!e)throw new a.ErrnoError(43);n.tty=e,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,e,s,o,r){if(!n.tty||!n.tty.ops.get_char)throw new a.ErrnoError(60);for(var i=0,p=0;p<o;p++){var g;try{g=n.tty.ops.get_char(n.tty)}catch{throw new a.ErrnoError(29)}if(g===void 0&&i===0)throw new a.ErrnoError(6);if(g==null)break;i++,e[s+p]=g}return i&&(n.node.timestamp=Date.now()),i},write:function(n,e,s,o,r){if(!n.tty||!n.tty.ops.put_char)throw new a.ErrnoError(60);try{for(var i=0;i<o;i++)n.tty.ops.put_char(n.tty,e[s+i])}catch{throw new a.ErrnoError(29)}return o&&(n.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(n){if(!n.input.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;n.input=at(e,!0)}return n.input.shift()},put_char:function(n,e){e===null||e===10?(Ve(Me(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(Ve(Me(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,e){e===null||e===10?(Oe(Me(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(Oe(Me(n.output,0)),n.output=[])}}};function En(n,e){return je.fill(0,n,n+e),n}function xn(n,e){return Math.ceil(n/e)*e}function Ot(n){n=xn(n,65536);var e=Mt(65536,n);return e?En(e,n):0}var oe={ops_table:null,mount:function(n){return oe.createNode(null,"/",16895,0)},createNode:function(n,e,s,o){if(a.isBlkdev(s)||a.isFIFO(s))throw new a.ErrnoError(63);oe.ops_table||(oe.ops_table={dir:{node:{getattr:oe.node_ops.getattr,setattr:oe.node_ops.setattr,lookup:oe.node_ops.lookup,mknod:oe.node_ops.mknod,rename:oe.node_ops.rename,unlink:oe.node_ops.unlink,rmdir:oe.node_ops.rmdir,readdir:oe.node_ops.readdir,symlink:oe.node_ops.symlink},stream:{llseek:oe.stream_ops.llseek}},file:{node:{getattr:oe.node_ops.getattr,setattr:oe.node_ops.setattr},stream:{llseek:oe.stream_ops.llseek,read:oe.stream_ops.read,write:oe.stream_ops.write,allocate:oe.stream_ops.allocate,mmap:oe.stream_ops.mmap,msync:oe.stream_ops.msync}},link:{node:{getattr:oe.node_ops.getattr,setattr:oe.node_ops.setattr,readlink:oe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:oe.node_ops.getattr,setattr:oe.node_ops.setattr},stream:a.chrdev_stream_ops}});var r=a.createNode(n,e,s,o);return a.isDir(r.mode)?(r.node_ops=oe.ops_table.dir.node,r.stream_ops=oe.ops_table.dir.stream,r.contents={}):a.isFile(r.mode)?(r.node_ops=oe.ops_table.file.node,r.stream_ops=oe.ops_table.file.stream,r.usedBytes=0,r.contents=null):a.isLink(r.mode)?(r.node_ops=oe.ops_table.link.node,r.stream_ops=oe.ops_table.link.stream):a.isChrdev(r.mode)&&(r.node_ops=oe.ops_table.chrdev.node,r.stream_ops=oe.ops_table.chrdev.stream),r.timestamp=Date.now(),n&&(n.contents[e]=r,n.timestamp=r.timestamp),r},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,e){var s=n.contents?n.contents.length:0;if(!(s>=e)){var o=1024*1024;e=Math.max(e,s*(s<o?2:1.125)>>>0),s!=0&&(e=Math.max(e,256));var r=n.contents;n.contents=new Uint8Array(e),n.usedBytes>0&&n.contents.set(r.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,e){if(n.usedBytes!=e)if(e==0)n.contents=null,n.usedBytes=0;else{var s=n.contents;n.contents=new Uint8Array(e),s&&n.contents.set(s.subarray(0,Math.min(e,n.usedBytes))),n.usedBytes=e}},node_ops:{getattr:function(n){var e={};return e.dev=a.isChrdev(n.mode)?n.id:1,e.ino=n.id,e.mode=n.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=n.rdev,a.isDir(n.mode)?e.size=4096:a.isFile(n.mode)?e.size=n.usedBytes:a.isLink(n.mode)?e.size=n.link.length:e.size=0,e.atime=new Date(n.timestamp),e.mtime=new Date(n.timestamp),e.ctime=new Date(n.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(n,e){e.mode!==void 0&&(n.mode=e.mode),e.timestamp!==void 0&&(n.timestamp=e.timestamp),e.size!==void 0&&oe.resizeFileStorage(n,e.size)},lookup:function(n,e){throw a.genericErrors[44]},mknod:function(n,e,s,o){return oe.createNode(n,e,s,o)},rename:function(n,e,s){if(a.isDir(n.mode)){var o;try{o=a.lookupNode(e,s)}catch{}if(o)for(var r in o.contents)throw new a.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=s,e.contents[s]=n,e.timestamp=n.parent.timestamp,n.parent=e},unlink:function(n,e){delete n.contents[e],n.timestamp=Date.now()},rmdir:function(n,e){var s=a.lookupNode(n,e);for(var o in s.contents)throw new a.ErrnoError(55);delete n.contents[e],n.timestamp=Date.now()},readdir:function(n){var e=[".",".."];for(var s in n.contents)n.contents.hasOwnProperty(s)&&e.push(s);return e},symlink:function(n,e,s){var o=oe.createNode(n,e,41471,0);return o.link=s,o},readlink:function(n){if(!a.isLink(n.mode))throw new a.ErrnoError(28);return n.link}},stream_ops:{read:function(n,e,s,o,r){var i=n.node.contents;if(r>=n.node.usedBytes)return 0;var p=Math.min(n.node.usedBytes-r,o);if(p>8&&i.subarray)e.set(i.subarray(r,r+p),s);else for(var g=0;g<p;g++)e[s+g]=i[r+g];return p},write:function(n,e,s,o,r,i){if(e.buffer===be.buffer&&(i=!1),!o)return 0;var p=n.node;if(p.timestamp=Date.now(),e.subarray&&(!p.contents||p.contents.subarray)){if(i)return p.contents=e.subarray(s,s+o),p.usedBytes=o,o;if(p.usedBytes===0&&r===0)return p.contents=e.slice(s,s+o),p.usedBytes=o,o;if(r+o<=p.usedBytes)return p.contents.set(e.subarray(s,s+o),r),o}if(oe.expandFileStorage(p,r+o),p.contents.subarray&&e.subarray)p.contents.set(e.subarray(s,s+o),r);else for(var g=0;g<o;g++)p.contents[r+g]=e[s+g];return p.usedBytes=Math.max(p.usedBytes,r+o),o},llseek:function(n,e,s){var o=e;if(s===1?o+=n.position:s===2&&a.isFile(n.node.mode)&&(o+=n.node.usedBytes),o<0)throw new a.ErrnoError(28);return o},allocate:function(n,e,s){oe.expandFileStorage(n.node,e+s),n.node.usedBytes=Math.max(n.node.usedBytes,e+s)},mmap:function(n,e,s,o,r){if(!a.isFile(n.node.mode))throw new a.ErrnoError(43);var i,p,g=n.node.contents;if(!(r&2)&&g.buffer===be.buffer)p=!1,i=g.byteOffset;else{if((s>0||s+e<g.length)&&(g.subarray?g=g.subarray(s,s+e):g=Array.prototype.slice.call(g,s,s+e)),p=!0,i=Ot(e),!i)throw new a.ErrnoError(48);be.set(g,i)}return{ptr:i,allocated:p}},msync:function(n,e,s,o,r){return oe.stream_ops.write(n,e,0,o,s,!1),0}}};function Sn(n,e,s,o){var r=o?"":"al "+n;gt(n,i=>{qt(i,'Loading data file "'+n+'" failed (no arrayBuffer).'),e(new Uint8Array(i)),r&&Ke(r)},i=>{if(s)s();else throw'Loading data file "'+n+'" failed.'}),r&&it(r)}var a={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,e={})=>{if(n=Ie.resolve(n),!n)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(e=Object.assign(s,e),e.recurse_count>8)throw new a.ErrnoError(32);for(var o=n.split("/").filter(V=>!!V),r=a.root,i="/",p=0;p<o.length;p++){var g=p===o.length-1;if(g&&e.parent)break;if(r=a.lookupNode(r,o[p]),i=ue.join2(i,o[p]),a.isMountpoint(r)&&(!g||g&&e.follow_mount)&&(r=r.mounted.root),!g||e.follow)for(var T=0;a.isLink(r.mode);){var j=a.readlink(i);i=Ie.resolve(ue.dirname(i),j);var Q=a.lookupPath(i,{recurse_count:e.recurse_count+1});if(r=Q.node,T++>40)throw new a.ErrnoError(32)}}return{path:i,node:r}},getPath:n=>{for(var e;;){if(a.isRoot(n)){var s=n.mount.mountpoint;return e?s[s.length-1]!=="/"?s+"/"+e:s+e:s}e=e?n.name+"/"+e:n.name,n=n.parent}},hashName:(n,e)=>{for(var s=0,o=0;o<e.length;o++)s=(s<<5)-s+e.charCodeAt(o)|0;return(n+s>>>0)%a.nameTable.length},hashAddNode:n=>{var e=a.hashName(n.parent.id,n.name);n.name_next=a.nameTable[e],a.nameTable[e]=n},hashRemoveNode:n=>{var e=a.hashName(n.parent.id,n.name);if(a.nameTable[e]===n)a.nameTable[e]=n.name_next;else for(var s=a.nameTable[e];s;){if(s.name_next===n){s.name_next=n.name_next;break}s=s.name_next}},lookupNode:(n,e)=>{var s=a.mayLookup(n);if(s)throw new a.ErrnoError(s,n);for(var o=a.hashName(n.id,e),r=a.nameTable[o];r;r=r.name_next){var i=r.name;if(r.parent.id===n.id&&i===e)return r}return a.lookup(n,e)},createNode:(n,e,s,o)=>{var r=new a.FSNode(n,e,s,o);return a.hashAddNode(r),r},destroyNode:n=>{a.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var e=a.flagModes[n];if(typeof e>"u")throw new Error("Unknown file open mode: "+n);return e},flagsToPermissionString:n=>{var e=["r","w","rw"][n&3];return n&512&&(e+="w"),e},nodePermissions:(n,e)=>a.ignorePermissions?0:e.includes("r")&&!(n.mode&292)||e.includes("w")&&!(n.mode&146)||e.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var e=a.nodePermissions(n,"x");return e||(n.node_ops.lookup?0:2)},mayCreate:(n,e)=>{try{var s=a.lookupNode(n,e);return 20}catch{}return a.nodePermissions(n,"wx")},mayDelete:(n,e,s)=>{var o;try{o=a.lookupNode(n,e)}catch(i){return i.errno}var r=a.nodePermissions(n,"wx");if(r)return r;if(s){if(!a.isDir(o.mode))return 54;if(a.isRoot(o)||a.getPath(o)===a.cwd())return 10}else if(a.isDir(o.mode))return 31;return 0},mayOpen:(n,e)=>n?a.isLink(n.mode)?32:a.isDir(n.mode)&&(a.flagsToPermissionString(e)!=="r"||e&512)?31:a.nodePermissions(n,a.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,e=a.MAX_OPEN_FDS)=>{for(var s=n;s<=e;s++)if(!a.streams[s])return s;throw new a.ErrnoError(33)},getStream:n=>a.streams[n],createStream:(n,e,s)=>{a.FSStream||(a.FSStream=function(){this.shared={}},a.FSStream.prototype={},Object.defineProperties(a.FSStream.prototype,{object:{get:function(){return this.node},set:function(r){this.node=r}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(r){this.shared.flags=r}},position:{get:function(){return this.shared.position},set:function(r){this.shared.position=r}}})),n=Object.assign(new a.FSStream,n);var o=a.nextfd(e,s);return n.fd=o,a.streams[o]=n,n},closeStream:n=>{a.streams[n]=null},chrdev_stream_ops:{open:n=>{var e=a.getDevice(n.node.rdev);n.stream_ops=e.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new a.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,e)=>n<<8|e,registerDevice:(n,e)=>{a.devices[n]={stream_ops:e}},getDevice:n=>a.devices[n],getMounts:n=>{for(var e=[],s=[n];s.length;){var o=s.pop();e.push(o),s.push.apply(s,o.mounts)}return e},syncfs:(n,e)=>{typeof n=="function"&&(e=n,n=!1),a.syncFSRequests++,a.syncFSRequests>1&&Oe("warning: "+a.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=a.getMounts(a.root.mount),o=0;function r(p){return a.syncFSRequests--,e(p)}function i(p){if(p)return i.errored?void 0:(i.errored=!0,r(p));++o>=s.length&&r(null)}s.forEach(p=>{if(!p.type.syncfs)return i(null);p.type.syncfs(p,n,i)})},mount:(n,e,s)=>{var o=s==="/",r=!s,i;if(o&&a.root)throw new a.ErrnoError(10);if(!o&&!r){var p=a.lookupPath(s,{follow_mount:!1});if(s=p.path,i=p.node,a.isMountpoint(i))throw new a.ErrnoError(10);if(!a.isDir(i.mode))throw new a.ErrnoError(54)}var g={type:n,opts:e,mountpoint:s,mounts:[]},T=n.mount(g);return T.mount=g,g.root=T,o?a.root=T:i&&(i.mounted=g,i.mount&&i.mount.mounts.push(g)),T},unmount:n=>{var e=a.lookupPath(n,{follow_mount:!1});if(!a.isMountpoint(e.node))throw new a.ErrnoError(28);var s=e.node,o=s.mounted,r=a.getMounts(o);Object.keys(a.nameTable).forEach(p=>{for(var g=a.nameTable[p];g;){var T=g.name_next;r.includes(g.mount)&&a.destroyNode(g),g=T}}),s.mounted=null;var i=s.mount.mounts.indexOf(o);s.mount.mounts.splice(i,1)},lookup:(n,e)=>n.node_ops.lookup(n,e),mknod:(n,e,s)=>{var o=a.lookupPath(n,{parent:!0}),r=o.node,i=ue.basename(n);if(!i||i==="."||i==="..")throw new a.ErrnoError(28);var p=a.mayCreate(r,i);if(p)throw new a.ErrnoError(p);if(!r.node_ops.mknod)throw new a.ErrnoError(63);return r.node_ops.mknod(r,i,e,s)},create:(n,e)=>(e=e!==void 0?e:438,e&=4095,e|=32768,a.mknod(n,e,0)),mkdir:(n,e)=>(e=e!==void 0?e:511,e&=1023,e|=16384,a.mknod(n,e,0)),mkdirTree:(n,e)=>{for(var s=n.split("/"),o="",r=0;r<s.length;++r)if(s[r]){o+="/"+s[r];try{a.mkdir(o,e)}catch(i){if(i.errno!=20)throw i}}},mkdev:(n,e,s)=>(typeof s>"u"&&(s=e,e=438),e|=8192,a.mknod(n,e,s)),symlink:(n,e)=>{if(!Ie.resolve(n))throw new a.ErrnoError(44);var s=a.lookupPath(e,{parent:!0}),o=s.node;if(!o)throw new a.ErrnoError(44);var r=ue.basename(e),i=a.mayCreate(o,r);if(i)throw new a.ErrnoError(i);if(!o.node_ops.symlink)throw new a.ErrnoError(63);return o.node_ops.symlink(o,r,n)},rename:(n,e)=>{var s=ue.dirname(n),o=ue.dirname(e),r=ue.basename(n),i=ue.basename(e),p,g,T;if(p=a.lookupPath(n,{parent:!0}),g=p.node,p=a.lookupPath(e,{parent:!0}),T=p.node,!g||!T)throw new a.ErrnoError(44);if(g.mount!==T.mount)throw new a.ErrnoError(75);var j=a.lookupNode(g,r),Q=Ie.relative(n,o);if(Q.charAt(0)!==".")throw new a.ErrnoError(28);if(Q=Ie.relative(e,s),Q.charAt(0)!==".")throw new a.ErrnoError(55);var V;try{V=a.lookupNode(T,i)}catch{}if(j!==V){var $=a.isDir(j.mode),h=a.mayDelete(g,r,$);if(h)throw new a.ErrnoError(h);if(h=V?a.mayDelete(T,i,$):a.mayCreate(T,i),h)throw new a.ErrnoError(h);if(!g.node_ops.rename)throw new a.ErrnoError(63);if(a.isMountpoint(j)||V&&a.isMountpoint(V))throw new a.ErrnoError(10);if(T!==g&&(h=a.nodePermissions(g,"w"),h))throw new a.ErrnoError(h);a.hashRemoveNode(j);try{g.node_ops.rename(j,T,i)}catch(f){throw f}finally{a.hashAddNode(j)}}},rmdir:n=>{var e=a.lookupPath(n,{parent:!0}),s=e.node,o=ue.basename(n),r=a.lookupNode(s,o),i=a.mayDelete(s,o,!0);if(i)throw new a.ErrnoError(i);if(!s.node_ops.rmdir)throw new a.ErrnoError(63);if(a.isMountpoint(r))throw new a.ErrnoError(10);s.node_ops.rmdir(s,o),a.destroyNode(r)},readdir:n=>{var e=a.lookupPath(n,{follow:!0}),s=e.node;if(!s.node_ops.readdir)throw new a.ErrnoError(54);return s.node_ops.readdir(s)},unlink:n=>{var e=a.lookupPath(n,{parent:!0}),s=e.node;if(!s)throw new a.ErrnoError(44);var o=ue.basename(n),r=a.lookupNode(s,o),i=a.mayDelete(s,o,!1);if(i)throw new a.ErrnoError(i);if(!s.node_ops.unlink)throw new a.ErrnoError(63);if(a.isMountpoint(r))throw new a.ErrnoError(10);s.node_ops.unlink(s,o),a.destroyNode(r)},readlink:n=>{var e=a.lookupPath(n),s=e.node;if(!s)throw new a.ErrnoError(44);if(!s.node_ops.readlink)throw new a.ErrnoError(28);return Ie.resolve(a.getPath(s.parent),s.node_ops.readlink(s))},stat:(n,e)=>{var s=a.lookupPath(n,{follow:!e}),o=s.node;if(!o)throw new a.ErrnoError(44);if(!o.node_ops.getattr)throw new a.ErrnoError(63);return o.node_ops.getattr(o)},lstat:n=>a.stat(n,!0),chmod:(n,e,s)=>{var o;if(typeof n=="string"){var r=a.lookupPath(n,{follow:!s});o=r.node}else o=n;if(!o.node_ops.setattr)throw new a.ErrnoError(63);o.node_ops.setattr(o,{mode:e&4095|o.mode&-4096,timestamp:Date.now()})},lchmod:(n,e)=>{a.chmod(n,e,!0)},fchmod:(n,e)=>{var s=a.getStream(n);if(!s)throw new a.ErrnoError(8);a.chmod(s.node,e)},chown:(n,e,s,o)=>{var r;if(typeof n=="string"){var i=a.lookupPath(n,{follow:!o});r=i.node}else r=n;if(!r.node_ops.setattr)throw new a.ErrnoError(63);r.node_ops.setattr(r,{timestamp:Date.now()})},lchown:(n,e,s)=>{a.chown(n,e,s,!0)},fchown:(n,e,s)=>{var o=a.getStream(n);if(!o)throw new a.ErrnoError(8);a.chown(o.node,e,s)},truncate:(n,e)=>{if(e<0)throw new a.ErrnoError(28);var s;if(typeof n=="string"){var o=a.lookupPath(n,{follow:!0});s=o.node}else s=n;if(!s.node_ops.setattr)throw new a.ErrnoError(63);if(a.isDir(s.mode))throw new a.ErrnoError(31);if(!a.isFile(s.mode))throw new a.ErrnoError(28);var r=a.nodePermissions(s,"w");if(r)throw new a.ErrnoError(r);s.node_ops.setattr(s,{size:e,timestamp:Date.now()})},ftruncate:(n,e)=>{var s=a.getStream(n);if(!s)throw new a.ErrnoError(8);if(!(s.flags&2097155))throw new a.ErrnoError(28);a.truncate(s.node,e)},utime:(n,e,s)=>{var o=a.lookupPath(n,{follow:!0}),r=o.node;r.node_ops.setattr(r,{timestamp:Math.max(e,s)})},open:(n,e,s)=>{if(n==="")throw new a.ErrnoError(44);e=typeof e=="string"?a.modeStringToFlags(e):e,s=typeof s>"u"?438:s,e&64?s=s&4095|32768:s=0;var o;if(typeof n=="object")o=n;else{n=ue.normalize(n);try{var r=a.lookupPath(n,{follow:!(e&131072)});o=r.node}catch{}}var i=!1;if(e&64)if(o){if(e&128)throw new a.ErrnoError(20)}else o=a.mknod(n,s,0),i=!0;if(!o)throw new a.ErrnoError(44);if(a.isChrdev(o.mode)&&(e&=-513),e&65536&&!a.isDir(o.mode))throw new a.ErrnoError(54);if(!i){var p=a.mayOpen(o,e);if(p)throw new a.ErrnoError(p)}e&512&&!i&&a.truncate(o,0),e&=-131713;var g=a.createStream({node:o,path:a.getPath(o),flags:e,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1});return g.stream_ops.open&&g.stream_ops.open(g),t.logReadFiles&&!(e&1)&&(a.readFiles||(a.readFiles={}),n in a.readFiles||(a.readFiles[n]=1)),g},close:n=>{if(a.isClosed(n))throw new a.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(e){throw e}finally{a.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,e,s)=>{if(a.isClosed(n))throw new a.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new a.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new a.ErrnoError(28);return n.position=n.stream_ops.llseek(n,e,s),n.ungotten=[],n.position},read:(n,e,s,o,r)=>{if(o<0||r<0)throw new a.ErrnoError(28);if(a.isClosed(n))throw new a.ErrnoError(8);if((n.flags&2097155)===1)throw new a.ErrnoError(8);if(a.isDir(n.node.mode))throw new a.ErrnoError(31);if(!n.stream_ops.read)throw new a.ErrnoError(28);var i=typeof r<"u";if(!i)r=n.position;else if(!n.seekable)throw new a.ErrnoError(70);var p=n.stream_ops.read(n,e,s,o,r);return i||(n.position+=p),p},write:(n,e,s,o,r,i)=>{if(o<0||r<0)throw new a.ErrnoError(28);if(a.isClosed(n))throw new a.ErrnoError(8);if(!(n.flags&2097155))throw new a.ErrnoError(8);if(a.isDir(n.node.mode))throw new a.ErrnoError(31);if(!n.stream_ops.write)throw new a.ErrnoError(28);n.seekable&&n.flags&1024&&a.llseek(n,0,2);var p=typeof r<"u";if(!p)r=n.position;else if(!n.seekable)throw new a.ErrnoError(70);var g=n.stream_ops.write(n,e,s,o,r,i);return p||(n.position+=g),g},allocate:(n,e,s)=>{if(a.isClosed(n))throw new a.ErrnoError(8);if(e<0||s<=0)throw new a.ErrnoError(28);if(!(n.flags&2097155))throw new a.ErrnoError(8);if(!a.isFile(n.node.mode)&&!a.isDir(n.node.mode))throw new a.ErrnoError(43);if(!n.stream_ops.allocate)throw new a.ErrnoError(138);n.stream_ops.allocate(n,e,s)},mmap:(n,e,s,o,r)=>{if(o&2&&!(r&2)&&(n.flags&2097155)!==2)throw new a.ErrnoError(2);if((n.flags&2097155)===1)throw new a.ErrnoError(2);if(!n.stream_ops.mmap)throw new a.ErrnoError(43);return n.stream_ops.mmap(n,e,s,o,r)},msync:(n,e,s,o,r)=>n.stream_ops.msync?n.stream_ops.msync(n,e,s,o,r):0,munmap:n=>0,ioctl:(n,e,s)=>{if(!n.stream_ops.ioctl)throw new a.ErrnoError(59);return n.stream_ops.ioctl(n,e,s)},readFile:(n,e={})=>{if(e.flags=e.flags||0,e.encoding=e.encoding||"binary",e.encoding!=="utf8"&&e.encoding!=="binary")throw new Error('Invalid encoding type "'+e.encoding+'"');var s,o=a.open(n,e.flags),r=a.stat(n),i=r.size,p=new Uint8Array(i);return a.read(o,p,0,i,0),e.encoding==="utf8"?s=Me(p,0):e.encoding==="binary"&&(s=p),a.close(o),s},writeFile:(n,e,s={})=>{s.flags=s.flags||577;var o=a.open(n,s.flags,s.mode);if(typeof e=="string"){var r=new Uint8Array(ze(e)+1),i=$e(e,r,0,r.length);a.write(o,r,0,i,void 0,s.canOwn)}else if(ArrayBuffer.isView(e))a.write(o,e,0,e.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");a.close(o)},cwd:()=>a.currentPath,chdir:n=>{var e=a.lookupPath(n,{follow:!0});if(e.node===null)throw new a.ErrnoError(44);if(!a.isDir(e.node.mode))throw new a.ErrnoError(54);var s=a.nodePermissions(e.node,"x");if(s)throw new a.ErrnoError(s);a.currentPath=e.path},createDefaultDirectories:()=>{a.mkdir("/tmp"),a.mkdir("/home"),a.mkdir("/home/web_user")},createDefaultDevices:()=>{a.mkdir("/dev"),a.registerDevice(a.makedev(1,3),{read:()=>0,write:(e,s,o,r,i)=>r}),a.mkdev("/dev/null",a.makedev(1,3)),Le.register(a.makedev(5,0),Le.default_tty_ops),Le.register(a.makedev(6,0),Le.default_tty1_ops),a.mkdev("/dev/tty",a.makedev(5,0)),a.mkdev("/dev/tty1",a.makedev(6,0));var n=vn();a.createDevice("/dev","random",n),a.createDevice("/dev","urandom",n),a.mkdir("/dev/shm"),a.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{a.mkdir("/proc");var n=a.mkdir("/proc/self");a.mkdir("/proc/self/fd"),a.mount({mount:()=>{var e=a.createNode(n,"fd",16895,73);return e.node_ops={lookup:(s,o)=>{var r=+o,i=a.getStream(r);if(!i)throw new a.ErrnoError(8);var p={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path}};return p.parent=p,p}},e}},{},"/proc/self/fd")},createStandardStreams:()=>{t.stdin?a.createDevice("/dev","stdin",t.stdin):a.symlink("/dev/tty","/dev/stdin"),t.stdout?a.createDevice("/dev","stdout",null,t.stdout):a.symlink("/dev/tty","/dev/stdout"),t.stderr?a.createDevice("/dev","stderr",null,t.stderr):a.symlink("/dev/tty1","/dev/stderr");var n=a.open("/dev/stdin",0),e=a.open("/dev/stdout",1),s=a.open("/dev/stderr",1)},ensureErrnoError:()=>{a.ErrnoError||(a.ErrnoError=function(e,s){this.node=s,this.setErrno=function(o){this.errno=o},this.setErrno(e),this.message="FS error"},a.ErrnoError.prototype=new Error,a.ErrnoError.prototype.constructor=a.ErrnoError,[44].forEach(n=>{a.genericErrors[n]=new a.ErrnoError(n),a.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{a.ensureErrnoError(),a.nameTable=new Array(4096),a.mount(oe,{},"/"),a.createDefaultDirectories(),a.createDefaultDevices(),a.createSpecialDirectories(),a.filesystems={MEMFS:oe}},init:(n,e,s)=>{a.init.initialized=!0,a.ensureErrnoError(),t.stdin=n||t.stdin,t.stdout=e||t.stdout,t.stderr=s||t.stderr,a.createStandardStreams()},quit:()=>{a.init.initialized=!1;for(var n=0;n<a.streams.length;n++){var e=a.streams[n];e&&a.close(e)}},getMode:(n,e)=>{var s=0;return n&&(s|=365),e&&(s|=146),s},findObject:(n,e)=>{var s=a.analyzePath(n,e);return s.exists?s.object:null},analyzePath:(n,e)=>{try{var s=a.lookupPath(n,{follow:!e});n=s.path}catch{}var o={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=a.lookupPath(n,{parent:!0});o.parentExists=!0,o.parentPath=s.path,o.parentObject=s.node,o.name=ue.basename(n),s=a.lookupPath(n,{follow:!e}),o.exists=!0,o.path=s.path,o.object=s.node,o.name=s.node.name,o.isRoot=s.path==="/"}catch(r){o.error=r.errno}return o},createPath:(n,e,s,o)=>{n=typeof n=="string"?n:a.getPath(n);for(var r=e.split("/").reverse();r.length;){var i=r.pop();if(i){var p=ue.join2(n,i);try{a.mkdir(p)}catch{}n=p}}return p},createFile:(n,e,s,o,r)=>{var i=ue.join2(typeof n=="string"?n:a.getPath(n),e),p=a.getMode(o,r);return a.create(i,p)},createDataFile:(n,e,s,o,r,i)=>{var p=e;n&&(n=typeof n=="string"?n:a.getPath(n),p=e?ue.join2(n,e):n);var g=a.getMode(o,r),T=a.create(p,g);if(s){if(typeof s=="string"){for(var j=new Array(s.length),Q=0,V=s.length;Q<V;++Q)j[Q]=s.charCodeAt(Q);s=j}a.chmod(T,g|146);var $=a.open(T,577);a.write($,s,0,s.length,0,i),a.close($),a.chmod(T,g)}return T},createDevice:(n,e,s,o)=>{var r=ue.join2(typeof n=="string"?n:a.getPath(n),e),i=a.getMode(!!s,!!o);a.createDevice.major||(a.createDevice.major=64);var p=a.makedev(a.createDevice.major++,0);return a.registerDevice(p,{open:g=>{g.seekable=!1},close:g=>{o&&o.buffer&&o.buffer.length&&o(10)},read:(g,T,j,Q,V)=>{for(var $=0,h=0;h<Q;h++){var f;try{f=s()}catch{throw new a.ErrnoError(29)}if(f===void 0&&$===0)throw new a.ErrnoError(6);if(f==null)break;$++,T[j+h]=f}return $&&(g.node.timestamp=Date.now()),$},write:(g,T,j,Q,V)=>{for(var $=0;$<Q;$++)try{o(T[j+$])}catch{throw new a.ErrnoError(29)}return Q&&(g.node.timestamp=Date.now()),$}}),a.mkdev(r,i,p)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(et)try{n.contents=at(et(n.url),!0),n.usedBytes=n.contents.length}catch{throw new a.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,e,s,o,r)=>{function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(h){if(!(h>this.length-1||h<0)){var f=h%this.chunkSize,_=h/this.chunkSize|0;return this.getter(_)[f]}},i.prototype.setDataGetter=function(h){this.getter=h},i.prototype.cacheLength=function(){var h=new XMLHttpRequest;if(h.open("HEAD",s,!1),h.send(null),!(h.status>=200&&h.status<300||h.status===304))throw new Error("Couldn't load "+s+". Status: "+h.status);var f=Number(h.getResponseHeader("Content-length")),_,b=(_=h.getResponseHeader("Accept-Ranges"))&&_==="bytes",x=(_=h.getResponseHeader("Content-Encoding"))&&_==="gzip",v=1024*1024;b||(v=f);var C=(R,z)=>{if(R>z)throw new Error("invalid range ("+R+", "+z+") or no bytes requested!");if(z>f-1)throw new Error("only "+f+" bytes available! programmer error!");var u=new XMLHttpRequest;if(u.open("GET",s,!1),f!==v&&u.setRequestHeader("Range","bytes="+R+"-"+z),u.responseType="arraybuffer",u.overrideMimeType&&u.overrideMimeType("text/plain; charset=x-user-defined"),u.send(null),!(u.status>=200&&u.status<300||u.status===304))throw new Error("Couldn't load "+s+". Status: "+u.status);return u.response!==void 0?new Uint8Array(u.response||[]):at(u.responseText||"",!0)},P=this;P.setDataGetter(R=>{var z=R*v,u=(R+1)*v-1;if(u=Math.min(u,f-1),typeof P.chunks[R]>"u"&&(P.chunks[R]=C(z,u)),typeof P.chunks[R]>"u")throw new Error("doXHR failed!");return P.chunks[R]}),(x||!f)&&(v=f=1,f=this.getter(0).length,v=f,Ve("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=f,this._chunkSize=v,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!Ne)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var p=new i;Object.defineProperties(p,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var g={isDevice:!1,contents:p}}else var g={isDevice:!1,url:s};var T=a.createFile(n,e,g,o,r);g.contents?T.contents=g.contents:g.url&&(T.contents=null,T.url=g.url),Object.defineProperties(T,{usedBytes:{get:function(){return this.contents.length}}});var j={},Q=Object.keys(T.stream_ops);Q.forEach($=>{var h=T.stream_ops[$];j[$]=function(){return a.forceLoadFile(T),h.apply(null,arguments)}});function V($,h,f,_,b){var x=$.node.contents;if(b>=x.length)return 0;var v=Math.min(x.length-b,_);if(x.slice)for(var C=0;C<v;C++)h[f+C]=x[b+C];else for(var C=0;C<v;C++)h[f+C]=x.get(b+C);return v}return j.read=($,h,f,_,b)=>(a.forceLoadFile(T),V($,h,f,_,b)),j.mmap=($,h,f,_,b)=>{a.forceLoadFile(T);var x=Ot(h);if(!x)throw new a.ErrnoError(48);return V($,be,x,h,f),{ptr:x,allocated:!0}},T.stream_ops=j,T},createPreloadedFile:(n,e,s,o,r,i,p,g,T,j)=>{var Q=e?Ie.resolve(ue.join2(n,e)):n,V="cp "+Q;function $(h){function f(_){j&&j(),g||a.createDataFile(n,e,_,o,r,T),i&&i(),Ke(V)}Browser.handledByPreloadPlugin(h,Q,f,()=>{p&&p(),Ke(V)})||f(h)}it(V),typeof s=="string"?Sn(s,h=>$(h),p):$(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var o=a.indexedDB();try{var r=o.open(a.DB_NAME(),a.DB_VERSION)}catch(i){return s(i)}r.onupgradeneeded=()=>{Ve("creating db");var i=r.result;i.createObjectStore(a.DB_STORE_NAME)},r.onsuccess=()=>{var i=r.result,p=i.transaction([a.DB_STORE_NAME],"readwrite"),g=p.objectStore(a.DB_STORE_NAME),T=0,j=0,Q=n.length;function V(){j==0?e():s()}n.forEach($=>{var h=g.put(a.analyzePath($).object.contents,$);h.onsuccess=()=>{T++,T+j==Q&&V()},h.onerror=()=>{j++,T+j==Q&&V()}}),p.onerror=s},r.onerror=s},loadFilesFromDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var o=a.indexedDB();try{var r=o.open(a.DB_NAME(),a.DB_VERSION)}catch(i){return s(i)}r.onupgradeneeded=s,r.onsuccess=()=>{var i=r.result;try{var p=i.transaction([a.DB_STORE_NAME],"readonly")}catch($){s($);return}var g=p.objectStore(a.DB_STORE_NAME),T=0,j=0,Q=n.length;function V(){j==0?e():s()}n.forEach($=>{var h=g.get($);h.onsuccess=()=>{a.analyzePath($).exists&&a.unlink($),a.createDataFile(ue.dirname($),ue.basename($),h.result,!0,!0,!0),T++,T+j==Q&&V()},h.onerror=()=>{j++,T+j==Q&&V()}}),p.onerror=s},r.onerror=s}},re={DEFAULT_POLLMASK:5,calculateAt:function(n,e,s){if(ue.isAbs(e))return e;var o;if(n===-100)o=a.cwd();else{var r=re.getStreamFromFD(n);o=r.path}if(e.length==0){if(!s)throw new a.ErrnoError(44);return o}return ue.join2(o,e)},doStat:function(n,e,s){try{var o=n(e)}catch(g){if(g&&g.node&&ue.normalize(e)!==ue.normalize(a.getPath(g.node)))return-54;throw g}se[s>>2]=o.dev,se[s+8>>2]=o.ino,se[s+12>>2]=o.mode,me[s+16>>2]=o.nlink,se[s+20>>2]=o.uid,se[s+24>>2]=o.gid,se[s+28>>2]=o.rdev,ye=[o.size>>>0,(ie=o.size,+Math.abs(ie)>=1?ie>0?(Math.min(+Math.floor(ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],se[s+40>>2]=ye[0],se[s+44>>2]=ye[1],se[s+48>>2]=4096,se[s+52>>2]=o.blocks;var r=o.atime.getTime(),i=o.mtime.getTime(),p=o.ctime.getTime();return ye=[Math.floor(r/1e3)>>>0,(ie=Math.floor(r/1e3),+Math.abs(ie)>=1?ie>0?(Math.min(+Math.floor(ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],se[s+56>>2]=ye[0],se[s+60>>2]=ye[1],me[s+64>>2]=r%1e3*1e3,ye=[Math.floor(i/1e3)>>>0,(ie=Math.floor(i/1e3),+Math.abs(ie)>=1?ie>0?(Math.min(+Math.floor(ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],se[s+72>>2]=ye[0],se[s+76>>2]=ye[1],me[s+80>>2]=i%1e3*1e3,ye=[Math.floor(p/1e3)>>>0,(ie=Math.floor(p/1e3),+Math.abs(ie)>=1?ie>0?(Math.min(+Math.floor(ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],se[s+88>>2]=ye[0],se[s+92>>2]=ye[1],me[s+96>>2]=p%1e3*1e3,ye=[o.ino>>>0,(ie=o.ino,+Math.abs(ie)>=1?ie>0?(Math.min(+Math.floor(ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],se[s+104>>2]=ye[0],se[s+108>>2]=ye[1],0},doMsync:function(n,e,s,o,r){if(!a.isFile(e.node.mode))throw new a.ErrnoError(43);if(o&2)return 0;var i=je.slice(n,n+s);a.msync(e,i,r,s,o)},varargs:void 0,get:function(){re.varargs+=4;var n=se[re.varargs-4>>2];return n},getStr:function(n){var e=ln(n);return e},getStreamFromFD:function(n){var e=a.getStream(n);if(!e)throw new a.ErrnoError(8);return e}};function An(n,e){try{return n=re.getStr(n),a.chmod(n,e),0}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function kn(n,e,s,o){try{if(e=re.getStr(e),e=re.calculateAt(n,e),s&-8)return-28;var r=a.lookupPath(e,{follow:!0}),i=r.node;if(!i)return-44;var p="";return s&4&&(p+="r"),s&2&&(p+="w"),s&1&&(p+="x"),p&&a.nodePermissions(i,p)?-2:0}catch(g){if(typeof a>"u"||!(g instanceof a.ErrnoError))throw g;return-g.errno}}function In(n,e){try{return a.fchmod(n,e),0}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function Tn(n,e,s){try{return a.fchown(n,e,s),0}catch(o){if(typeof a>"u"||!(o instanceof a.ErrnoError))throw o;return-o.errno}}function On(n){return se[Rt()>>2]=n,n}function Fn(n,e,s){re.varargs=s;try{var o=re.getStreamFromFD(n);switch(e){case 0:{var r=re.get();if(r<0)return-28;var i;return i=a.createStream(o,r),i.fd}case 1:case 2:return 0;case 3:return o.flags;case 4:{var r=re.get();return o.flags|=r,0}case 5:{var r=re.get(),p=0;return Ge[r+p>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return On(28),-1;default:return-28}}catch(g){if(typeof a>"u"||!(g instanceof a.ErrnoError))throw g;return-g.errno}}function Pn(n,e){try{var s=re.getStreamFromFD(n);return re.doStat(a.stat,s.path,e)}catch(o){if(typeof a>"u"||!(o instanceof a.ErrnoError))throw o;return-o.errno}}var Ln=9007199254740992,Cn=-9007199254740992;function Ft(n){return n<Cn||n>Ln?NaN:Number(n)}function Dn(n,e){try{return e=Ft(e),isNaN(e)?-61:(a.ftruncate(n,e),0)}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function Rn(n,e){try{if(e===0)return-28;var s=a.cwd(),o=ze(s)+1;return e<o?-68:(wt(s,n,e),o)}catch(r){if(typeof a>"u"||!(r instanceof a.ErrnoError))throw r;return-r.errno}}function Nn(n,e,s){re.varargs=s;try{var o=re.getStreamFromFD(n);switch(e){case 21509:case 21505:return o.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return o.tty?0:-59;case 21519:{if(!o.tty)return-59;var r=re.get();return se[r>>2]=0,0}case 21520:return o.tty?-28:-59;case 21531:{var r=re.get();return a.ioctl(o,e,r)}case 21523:return o.tty?0:-59;case 21524:return o.tty?0:-59;default:return-28}}catch(i){if(typeof a>"u"||!(i instanceof a.ErrnoError))throw i;return-i.errno}}function Mn(n,e){try{return n=re.getStr(n),re.doStat(a.lstat,n,e)}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function jn(n,e,s){try{return e=re.getStr(e),e=re.calculateAt(n,e),e=ue.normalize(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),a.mkdir(e,s,0),0}catch(o){if(typeof a>"u"||!(o instanceof a.ErrnoError))throw o;return-o.errno}}function Bn(n,e,s,o){try{e=re.getStr(e);var r=o&256,i=o&4096;return o=o&-6401,e=re.calculateAt(n,e,i),re.doStat(r?a.lstat:a.stat,e,s)}catch(p){if(typeof a>"u"||!(p instanceof a.ErrnoError))throw p;return-p.errno}}function Un(n,e,s,o){re.varargs=o;try{e=re.getStr(e),e=re.calculateAt(n,e);var r=o?re.get():0;return a.open(e,s,r).fd}catch(i){if(typeof a>"u"||!(i instanceof a.ErrnoError))throw i;return-i.errno}}function zn(n,e,s,o){try{if(e=re.getStr(e),e=re.calculateAt(n,e),o<=0)return-28;var r=a.readlink(e),i=Math.min(o,ze(r)),p=be[s+i];return wt(r,s,o+1),be[s+i]=p,i}catch(g){if(typeof a>"u"||!(g instanceof a.ErrnoError))throw g;return-g.errno}}function Wn(n){try{return n=re.getStr(n),a.rmdir(n),0}catch(e){if(typeof a>"u"||!(e instanceof a.ErrnoError))throw e;return-e.errno}}function Qn(n,e){try{return n=re.getStr(n),re.doStat(a.stat,n,e)}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return-s.errno}}function Hn(n,e,s){try{return e=re.getStr(e),e=re.calculateAt(n,e),s===0?a.unlink(e):s===512?a.rmdir(e):Pe("Invalid flags passed to unlinkat"),0}catch(o){if(typeof a>"u"||!(o instanceof a.ErrnoError))throw o;return-o.errno}}function lt(n){return me[n>>2]+se[n+4>>2]*4294967296}function Vn(n,e,s,o){try{if(e=re.getStr(e),e=re.calculateAt(n,e,!0),s){var p=lt(s),g=se[s+8>>2];r=p*1e3+g/1e6,s+=16,p=lt(s),g=se[s+8>>2],i=p*1e3+g/1e6}else var r=Date.now(),i=r;return a.utime(e,r,i),0}catch(T){if(typeof a>"u"||!(T instanceof a.ErrnoError))throw T;return-T.errno}}var $n=!0;function Gn(){return $n}function Kn(n){return n%4===0&&(n%100!==0||n%400===0)}var Jn=[0,31,60,91,121,152,182,213,244,274,305,335],Xn=[0,31,59,90,120,151,181,212,243,273,304,334];function Yn(n){var e=Kn(n.getFullYear()),s=e?Jn:Xn,o=s[n.getMonth()]+n.getDate()-1;return o}function Zn(n,e){var s=new Date(lt(n)*1e3);se[e>>2]=s.getSeconds(),se[e+4>>2]=s.getMinutes(),se[e+8>>2]=s.getHours(),se[e+12>>2]=s.getDate(),se[e+16>>2]=s.getMonth(),se[e+20>>2]=s.getFullYear()-1900,se[e+24>>2]=s.getDay();var o=Yn(s)|0;se[e+28>>2]=o,se[e+36>>2]=-(s.getTimezoneOffset()*60);var r=new Date(s.getFullYear(),0,1),i=new Date(s.getFullYear(),6,1).getTimezoneOffset(),p=r.getTimezoneOffset(),g=(i!=p&&s.getTimezoneOffset()==Math.min(p,i))|0;se[e+32>>2]=g}function er(n,e,s,o,r,i,p){try{var g=re.getStreamFromFD(o),T=a.mmap(g,n,r,e,s),j=T.ptr;return se[i>>2]=T.allocated,me[p>>2]=j,0}catch(Q){if(typeof a>"u"||!(Q instanceof a.ErrnoError))throw Q;return-Q.errno}}function tr(n,e,s,o,r,i){try{var p=re.getStreamFromFD(r);s&2&&re.doMsync(n,p,e,o,i),a.munmap(p)}catch(g){if(typeof a>"u"||!(g instanceof a.ErrnoError))throw g;return-g.errno}}function Pt(n){var e=ze(n)+1,s=Nt(e);return s&&$e(n,be,s,e),s}function nr(n,e,s){var o=new Date().getFullYear(),r=new Date(o,0,1),i=new Date(o,6,1),p=r.getTimezoneOffset(),g=i.getTimezoneOffset(),T=Math.max(p,g);me[n>>2]=T*60,se[e>>2]=+(p!=g);function j(f){var _=f.toTimeString().match(/\(([A-Za-z ]+)\)$/);return _?_[1]:"GMT"}var Q=j(r),V=j(i),$=Pt(Q),h=Pt(V);g<p?(me[s>>2]=$,me[s+4>>2]=h):(me[s>>2]=h,me[s+4>>2]=$)}function rr(){return Date.now()}var Lt;Lt=()=>performance.now();function sr(){return 2147483648}function ir(n){var e=Fe.buffer;try{return Fe.grow(n-e.byteLength+65535>>>16),Et(),1}catch{}}function or(n){var e=je.length;n=n>>>0;var s=sr();if(n>s)return!1;let o=(T,j)=>T+(j-T%j)%j;for(var r=1;r<=4;r*=2){var i=e*(1+.2/r);i=Math.min(i,n+100663296);var p=Math.min(s,o(Math.max(n,i),65536)),g=ir(p);if(g)return!0}return!1}var ct={};function ar(){return ht||"./this.program"}function Qe(){if(!Qe.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:ar()};for(var s in ct)ct[s]===void 0?delete e[s]:e[s]=ct[s];var o=[];for(var s in e)o.push(s+"="+e[s]);Qe.strings=o}return Qe.strings}function lr(n,e,s){for(var o=0;o<n.length;++o)be[e++>>0]=n.charCodeAt(o);s||(be[e>>0]=0)}function cr(n,e){var s=0;return Qe().forEach(function(o,r){var i=e+s;me[n+r*4>>2]=i,lr(o,i),s+=o.length+1}),0}function ur(n,e){var s=Qe();me[n>>2]=s.length;var o=0;return s.forEach(function(r){o+=r.length+1}),me[e>>2]=o,0}function _r(n){try{var e=re.getStreamFromFD(n);return a.close(e),0}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return s.errno}}function fr(n,e){try{var s=re.getStreamFromFD(n),o=s.tty?2:a.isDir(s.mode)?3:a.isLink(s.mode)?7:4;return be[e>>0]=o,0}catch(r){if(typeof a>"u"||!(r instanceof a.ErrnoError))throw r;return r.errno}}function pr(n,e,s,o){for(var r=0,i=0;i<s;i++){var p=me[e>>2],g=me[e+4>>2];e+=8;var T=a.read(n,be,p,g,o);if(T<0)return-1;if(r+=T,T<g)break;typeof o<"u"&&(o+=T)}return r}function dr(n,e,s,o){try{var r=re.getStreamFromFD(n),i=pr(r,e,s);return me[o>>2]=i,0}catch(p){if(typeof a>"u"||!(p instanceof a.ErrnoError))throw p;return p.errno}}function mr(n,e,s,o){try{if(e=Ft(e),isNaN(e))return 61;var r=re.getStreamFromFD(n);return a.llseek(r,e,s),ye=[r.position>>>0,(ie=r.position,+Math.abs(ie)>=1?ie>0?(Math.min(+Math.floor(ie/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],se[o>>2]=ye[0],se[o+4>>2]=ye[1],r.getdents&&e===0&&s===0&&(r.getdents=null),0}catch(i){if(typeof a>"u"||!(i instanceof a.ErrnoError))throw i;return i.errno}}function hr(n){try{var e=re.getStreamFromFD(n);return e.stream_ops&&e.stream_ops.fsync?e.stream_ops.fsync(e):0}catch(s){if(typeof a>"u"||!(s instanceof a.ErrnoError))throw s;return s.errno}}function gr(n,e,s,o){for(var r=0,i=0;i<s;i++){var p=me[e>>2],g=me[e+4>>2];e+=8;var T=a.write(n,be,p,g,o);if(T<0)return-1;r+=T,typeof o<"u"&&(o+=T)}return r}function yr(n,e,s,o){try{var r=re.getStreamFromFD(n),i=gr(r,e,s);return me[o>>2]=i,0}catch(p){if(typeof a>"u"||!(p instanceof a.ErrnoError))throw p;return p.errno}}var Ct=function(n,e,s,o){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=a.nextInode++,this.name=e,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=o},Je=365,Xe=146;Object.defineProperties(Ct.prototype,{read:{get:function(){return(this.mode&Je)===Je},set:function(n){n?this.mode|=Je:this.mode&=~Je}},write:{get:function(){return(this.mode&Xe)===Xe},set:function(n){n?this.mode|=Xe:this.mode&=~Xe}},isFolder:{get:function(){return a.isDir(this.mode)}},isDevice:{get:function(){return a.isChrdev(this.mode)}}}),a.FSNode=Ct,a.staticInit();var Ol=!1,Dt={__syscall_chmod:An,__syscall_faccessat:kn,__syscall_fchmod:In,__syscall_fchown32:Tn,__syscall_fcntl64:Fn,__syscall_fstat64:Pn,__syscall_ftruncate64:Dn,__syscall_getcwd:Rn,__syscall_ioctl:Nn,__syscall_lstat64:Mn,__syscall_mkdirat:jn,__syscall_newfstatat:Bn,__syscall_openat:Un,__syscall_readlinkat:zn,__syscall_rmdir:Wn,__syscall_stat64:Qn,__syscall_unlinkat:Hn,__syscall_utimensat:Vn,_emscripten_get_now_is_monotonic:Gn,_localtime_js:Zn,_mmap_js:er,_munmap_js:tr,_tzset_js:nr,emscripten_date_now:rr,emscripten_get_now:Lt,emscripten_resize_heap:or,environ_get:cr,environ_sizes_get:ur,fd_close:_r,fd_fdstat_get:fr,fd_read:dr,fd_seek:mr,fd_sync:hr,fd_write:yr,memory:Fe},Fl=wn(),qr=t.___wasm_call_ctors=function(){return(qr=t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},br=t._sqlite3_status64=function(){return(br=t._sqlite3_status64=t.asm.sqlite3_status64).apply(null,arguments)},wr=t._sqlite3_status=function(){return(wr=t._sqlite3_status=t.asm.sqlite3_status).apply(null,arguments)},vr=t._sqlite3_db_status=function(){return(vr=t._sqlite3_db_status=t.asm.sqlite3_db_status).apply(null,arguments)},Er=t._sqlite3_msize=function(){return(Er=t._sqlite3_msize=t.asm.sqlite3_msize).apply(null,arguments)},xr=t._sqlite3_vfs_find=function(){return(xr=t._sqlite3_vfs_find=t.asm.sqlite3_vfs_find).apply(null,arguments)},Sr=t._sqlite3_initialize=function(){return(Sr=t._sqlite3_initialize=t.asm.sqlite3_initialize).apply(null,arguments)},Ar=t._sqlite3_malloc=function(){return(Ar=t._sqlite3_malloc=t.asm.sqlite3_malloc).apply(null,arguments)},kr=t._sqlite3_free=function(){return(kr=t._sqlite3_free=t.asm.sqlite3_free).apply(null,arguments)},Ir=t._sqlite3_vfs_register=function(){return(Ir=t._sqlite3_vfs_register=t.asm.sqlite3_vfs_register).apply(null,arguments)},Tr=t._sqlite3_vfs_unregister=function(){return(Tr=t._sqlite3_vfs_unregister=t.asm.sqlite3_vfs_unregister).apply(null,arguments)},Or=t._sqlite3_malloc64=function(){return(Or=t._sqlite3_malloc64=t.asm.sqlite3_malloc64).apply(null,arguments)},Fr=t._sqlite3_realloc=function(){return(Fr=t._sqlite3_realloc=t.asm.sqlite3_realloc).apply(null,arguments)},Pr=t._sqlite3_realloc64=function(){return(Pr=t._sqlite3_realloc64=t.asm.sqlite3_realloc64).apply(null,arguments)},Lr=t._sqlite3_value_text=function(){return(Lr=t._sqlite3_value_text=t.asm.sqlite3_value_text).apply(null,arguments)},Cr=t._sqlite3_randomness=function(){return(Cr=t._sqlite3_randomness=t.asm.sqlite3_randomness).apply(null,arguments)},Dr=t._sqlite3_stricmp=function(){return(Dr=t._sqlite3_stricmp=t.asm.sqlite3_stricmp).apply(null,arguments)},Rr=t._sqlite3_strnicmp=function(){return(Rr=t._sqlite3_strnicmp=t.asm.sqlite3_strnicmp).apply(null,arguments)},Nr=t._sqlite3_uri_parameter=function(){return(Nr=t._sqlite3_uri_parameter=t.asm.sqlite3_uri_parameter).apply(null,arguments)},Rt=t.___errno_location=function(){return(Rt=t.___errno_location=t.asm.__errno_location).apply(null,arguments)},Mr=t._sqlite3_uri_boolean=function(){return(Mr=t._sqlite3_uri_boolean=t.asm.sqlite3_uri_boolean).apply(null,arguments)},jr=t._sqlite3_serialize=function(){return(jr=t._sqlite3_serialize=t.asm.sqlite3_serialize).apply(null,arguments)},Br=t._sqlite3_prepare_v2=function(){return(Br=t._sqlite3_prepare_v2=t.asm.sqlite3_prepare_v2).apply(null,arguments)},Ur=t._sqlite3_step=function(){return(Ur=t._sqlite3_step=t.asm.sqlite3_step).apply(null,arguments)},zr=t._sqlite3_column_int64=function(){return(zr=t._sqlite3_column_int64=t.asm.sqlite3_column_int64).apply(null,arguments)},Wr=t._sqlite3_column_int=function(){return(Wr=t._sqlite3_column_int=t.asm.sqlite3_column_int).apply(null,arguments)},Qr=t._sqlite3_finalize=function(){return(Qr=t._sqlite3_finalize=t.asm.sqlite3_finalize).apply(null,arguments)},Hr=t._sqlite3_file_control=function(){return(Hr=t._sqlite3_file_control=t.asm.sqlite3_file_control).apply(null,arguments)},Vr=t._sqlite3_reset=function(){return(Vr=t._sqlite3_reset=t.asm.sqlite3_reset).apply(null,arguments)},$r=t._sqlite3_deserialize=function(){return($r=t._sqlite3_deserialize=t.asm.sqlite3_deserialize).apply(null,arguments)},Gr=t._sqlite3_clear_bindings=function(){return(Gr=t._sqlite3_clear_bindings=t.asm.sqlite3_clear_bindings).apply(null,arguments)},Kr=t._sqlite3_value_blob=function(){return(Kr=t._sqlite3_value_blob=t.asm.sqlite3_value_blob).apply(null,arguments)},Jr=t._sqlite3_value_bytes=function(){return(Jr=t._sqlite3_value_bytes=t.asm.sqlite3_value_bytes).apply(null,arguments)},Xr=t._sqlite3_value_double=function(){return(Xr=t._sqlite3_value_double=t.asm.sqlite3_value_double).apply(null,arguments)},Yr=t._sqlite3_value_int=function(){return(Yr=t._sqlite3_value_int=t.asm.sqlite3_value_int).apply(null,arguments)},Zr=t._sqlite3_value_int64=function(){return(Zr=t._sqlite3_value_int64=t.asm.sqlite3_value_int64).apply(null,arguments)},es=t._sqlite3_value_subtype=function(){return(es=t._sqlite3_value_subtype=t.asm.sqlite3_value_subtype).apply(null,arguments)},ts=t._sqlite3_value_pointer=function(){return(ts=t._sqlite3_value_pointer=t.asm.sqlite3_value_pointer).apply(null,arguments)},ns=t._sqlite3_value_type=function(){return(ns=t._sqlite3_value_type=t.asm.sqlite3_value_type).apply(null,arguments)},rs=t._sqlite3_value_nochange=function(){return(rs=t._sqlite3_value_nochange=t.asm.sqlite3_value_nochange).apply(null,arguments)},ss=t._sqlite3_value_frombind=function(){return(ss=t._sqlite3_value_frombind=t.asm.sqlite3_value_frombind).apply(null,arguments)},is=t._sqlite3_value_dup=function(){return(is=t._sqlite3_value_dup=t.asm.sqlite3_value_dup).apply(null,arguments)},os=t._sqlite3_value_free=function(){return(os=t._sqlite3_value_free=t.asm.sqlite3_value_free).apply(null,arguments)},as=t._sqlite3_result_blob=function(){return(as=t._sqlite3_result_blob=t.asm.sqlite3_result_blob).apply(null,arguments)},ls=t._sqlite3_result_error_nomem=function(){return(ls=t._sqlite3_result_error_nomem=t.asm.sqlite3_result_error_nomem).apply(null,arguments)},cs=t._sqlite3_result_error_toobig=function(){return(cs=t._sqlite3_result_error_toobig=t.asm.sqlite3_result_error_toobig).apply(null,arguments)},us=t._sqlite3_result_double=function(){return(us=t._sqlite3_result_double=t.asm.sqlite3_result_double).apply(null,arguments)},_s=t._sqlite3_result_error=function(){return(_s=t._sqlite3_result_error=t.asm.sqlite3_result_error).apply(null,arguments)},fs=t._sqlite3_result_int=function(){return(fs=t._sqlite3_result_int=t.asm.sqlite3_result_int).apply(null,arguments)},ps=t._sqlite3_result_int64=function(){return(ps=t._sqlite3_result_int64=t.asm.sqlite3_result_int64).apply(null,arguments)},ds=t._sqlite3_result_null=function(){return(ds=t._sqlite3_result_null=t.asm.sqlite3_result_null).apply(null,arguments)},ms=t._sqlite3_result_pointer=function(){return(ms=t._sqlite3_result_pointer=t.asm.sqlite3_result_pointer).apply(null,arguments)},hs=t._sqlite3_result_subtype=function(){return(hs=t._sqlite3_result_subtype=t.asm.sqlite3_result_subtype).apply(null,arguments)},gs=t._sqlite3_result_text=function(){return(gs=t._sqlite3_result_text=t.asm.sqlite3_result_text).apply(null,arguments)},ys=t._sqlite3_result_zeroblob=function(){return(ys=t._sqlite3_result_zeroblob=t.asm.sqlite3_result_zeroblob).apply(null,arguments)},qs=t._sqlite3_result_zeroblob64=function(){return(qs=t._sqlite3_result_zeroblob64=t.asm.sqlite3_result_zeroblob64).apply(null,arguments)},bs=t._sqlite3_result_error_code=function(){return(bs=t._sqlite3_result_error_code=t.asm.sqlite3_result_error_code).apply(null,arguments)},ws=t._sqlite3_user_data=function(){return(ws=t._sqlite3_user_data=t.asm.sqlite3_user_data).apply(null,arguments)},vs=t._sqlite3_context_db_handle=function(){return(vs=t._sqlite3_context_db_handle=t.asm.sqlite3_context_db_handle).apply(null,arguments)},Es=t._sqlite3_vtab_nochange=function(){return(Es=t._sqlite3_vtab_nochange=t.asm.sqlite3_vtab_nochange).apply(null,arguments)},xs=t._sqlite3_vtab_in_first=function(){return(xs=t._sqlite3_vtab_in_first=t.asm.sqlite3_vtab_in_first).apply(null,arguments)},Ss=t._sqlite3_vtab_in_next=function(){return(Ss=t._sqlite3_vtab_in_next=t.asm.sqlite3_vtab_in_next).apply(null,arguments)},As=t._sqlite3_aggregate_context=function(){return(As=t._sqlite3_aggregate_context=t.asm.sqlite3_aggregate_context).apply(null,arguments)},ks=t._sqlite3_get_auxdata=function(){return(ks=t._sqlite3_get_auxdata=t.asm.sqlite3_get_auxdata).apply(null,arguments)},Is=t._sqlite3_set_auxdata=function(){return(Is=t._sqlite3_set_auxdata=t.asm.sqlite3_set_auxdata).apply(null,arguments)},Ts=t._sqlite3_column_count=function(){return(Ts=t._sqlite3_column_count=t.asm.sqlite3_column_count).apply(null,arguments)},Os=t._sqlite3_data_count=function(){return(Os=t._sqlite3_data_count=t.asm.sqlite3_data_count).apply(null,arguments)},Fs=t._sqlite3_column_blob=function(){return(Fs=t._sqlite3_column_blob=t.asm.sqlite3_column_blob).apply(null,arguments)},Ps=t._sqlite3_column_bytes=function(){return(Ps=t._sqlite3_column_bytes=t.asm.sqlite3_column_bytes).apply(null,arguments)},Ls=t._sqlite3_column_double=function(){return(Ls=t._sqlite3_column_double=t.asm.sqlite3_column_double).apply(null,arguments)},Cs=t._sqlite3_column_text=function(){return(Cs=t._sqlite3_column_text=t.asm.sqlite3_column_text).apply(null,arguments)},Ds=t._sqlite3_column_value=function(){return(Ds=t._sqlite3_column_value=t.asm.sqlite3_column_value).apply(null,arguments)},Rs=t._sqlite3_column_type=function(){return(Rs=t._sqlite3_column_type=t.asm.sqlite3_column_type).apply(null,arguments)},Ns=t._sqlite3_column_name=function(){return(Ns=t._sqlite3_column_name=t.asm.sqlite3_column_name).apply(null,arguments)},Ms=t._sqlite3_bind_blob=function(){return(Ms=t._sqlite3_bind_blob=t.asm.sqlite3_bind_blob).apply(null,arguments)},js=t._sqlite3_bind_double=function(){return(js=t._sqlite3_bind_double=t.asm.sqlite3_bind_double).apply(null,arguments)},Bs=t._sqlite3_bind_int=function(){return(Bs=t._sqlite3_bind_int=t.asm.sqlite3_bind_int).apply(null,arguments)},Us=t._sqlite3_bind_int64=function(){return(Us=t._sqlite3_bind_int64=t.asm.sqlite3_bind_int64).apply(null,arguments)},zs=t._sqlite3_bind_null=function(){return(zs=t._sqlite3_bind_null=t.asm.sqlite3_bind_null).apply(null,arguments)},Ws=t._sqlite3_bind_pointer=function(){return(Ws=t._sqlite3_bind_pointer=t.asm.sqlite3_bind_pointer).apply(null,arguments)},Qs=t._sqlite3_bind_text=function(){return(Qs=t._sqlite3_bind_text=t.asm.sqlite3_bind_text).apply(null,arguments)},Hs=t._sqlite3_bind_parameter_count=function(){return(Hs=t._sqlite3_bind_parameter_count=t.asm.sqlite3_bind_parameter_count).apply(null,arguments)},Vs=t._sqlite3_bind_parameter_index=function(){return(Vs=t._sqlite3_bind_parameter_index=t.asm.sqlite3_bind_parameter_index).apply(null,arguments)},$s=t._sqlite3_db_handle=function(){return($s=t._sqlite3_db_handle=t.asm.sqlite3_db_handle).apply(null,arguments)},Gs=t._sqlite3_stmt_readonly=function(){return(Gs=t._sqlite3_stmt_readonly=t.asm.sqlite3_stmt_readonly).apply(null,arguments)},Ks=t._sqlite3_stmt_isexplain=function(){return(Ks=t._sqlite3_stmt_isexplain=t.asm.sqlite3_stmt_isexplain).apply(null,arguments)},Js=t._sqlite3_stmt_status=function(){return(Js=t._sqlite3_stmt_status=t.asm.sqlite3_stmt_status).apply(null,arguments)},Xs=t._sqlite3_sql=function(){return(Xs=t._sqlite3_sql=t.asm.sqlite3_sql).apply(null,arguments)},Ys=t._sqlite3_expanded_sql=function(){return(Ys=t._sqlite3_expanded_sql=t.asm.sqlite3_expanded_sql).apply(null,arguments)},Zs=t._sqlite3_preupdate_old=function(){return(Zs=t._sqlite3_preupdate_old=t.asm.sqlite3_preupdate_old).apply(null,arguments)},ei=t._sqlite3_preupdate_count=function(){return(ei=t._sqlite3_preupdate_count=t.asm.sqlite3_preupdate_count).apply(null,arguments)},ti=t._sqlite3_preupdate_depth=function(){return(ti=t._sqlite3_preupdate_depth=t.asm.sqlite3_preupdate_depth).apply(null,arguments)},ni=t._sqlite3_preupdate_blobwrite=function(){return(ni=t._sqlite3_preupdate_blobwrite=t.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},ri=t._sqlite3_preupdate_new=function(){return(ri=t._sqlite3_preupdate_new=t.asm.sqlite3_preupdate_new).apply(null,arguments)},si=t._sqlite3_value_numeric_type=function(){return(si=t._sqlite3_value_numeric_type=t.asm.sqlite3_value_numeric_type).apply(null,arguments)},ii=t._sqlite3_errmsg=function(){return(ii=t._sqlite3_errmsg=t.asm.sqlite3_errmsg).apply(null,arguments)},oi=t._sqlite3_set_authorizer=function(){return(oi=t._sqlite3_set_authorizer=t.asm.sqlite3_set_authorizer).apply(null,arguments)},ai=t._sqlite3_strglob=function(){return(ai=t._sqlite3_strglob=t.asm.sqlite3_strglob).apply(null,arguments)},li=t._sqlite3_strlike=function(){return(li=t._sqlite3_strlike=t.asm.sqlite3_strlike).apply(null,arguments)},ci=t._sqlite3_exec=function(){return(ci=t._sqlite3_exec=t.asm.sqlite3_exec).apply(null,arguments)},ui=t._sqlite3_auto_extension=function(){return(ui=t._sqlite3_auto_extension=t.asm.sqlite3_auto_extension).apply(null,arguments)},_i=t._sqlite3_cancel_auto_extension=function(){return(_i=t._sqlite3_cancel_auto_extension=t.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},fi=t._sqlite3_reset_auto_extension=function(){return(fi=t._sqlite3_reset_auto_extension=t.asm.sqlite3_reset_auto_extension).apply(null,arguments)},pi=t._sqlite3_prepare_v3=function(){return(pi=t._sqlite3_prepare_v3=t.asm.sqlite3_prepare_v3).apply(null,arguments)},di=t._sqlite3_create_module=function(){return(di=t._sqlite3_create_module=t.asm.sqlite3_create_module).apply(null,arguments)},mi=t._sqlite3_create_module_v2=function(){return(mi=t._sqlite3_create_module_v2=t.asm.sqlite3_create_module_v2).apply(null,arguments)},hi=t._sqlite3_drop_modules=function(){return(hi=t._sqlite3_drop_modules=t.asm.sqlite3_drop_modules).apply(null,arguments)},gi=t._sqlite3_declare_vtab=function(){return(gi=t._sqlite3_declare_vtab=t.asm.sqlite3_declare_vtab).apply(null,arguments)},yi=t._sqlite3_vtab_on_conflict=function(){return(yi=t._sqlite3_vtab_on_conflict=t.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},qi=t._sqlite3_vtab_collation=function(){return(qi=t._sqlite3_vtab_collation=t.asm.sqlite3_vtab_collation).apply(null,arguments)},bi=t._sqlite3_vtab_in=function(){return(bi=t._sqlite3_vtab_in=t.asm.sqlite3_vtab_in).apply(null,arguments)},wi=t._sqlite3_vtab_rhs_value=function(){return(wi=t._sqlite3_vtab_rhs_value=t.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},vi=t._sqlite3_vtab_distinct=function(){return(vi=t._sqlite3_vtab_distinct=t.asm.sqlite3_vtab_distinct).apply(null,arguments)},Ei=t._sqlite3_keyword_name=function(){return(Ei=t._sqlite3_keyword_name=t.asm.sqlite3_keyword_name).apply(null,arguments)},xi=t._sqlite3_keyword_count=function(){return(xi=t._sqlite3_keyword_count=t.asm.sqlite3_keyword_count).apply(null,arguments)},Si=t._sqlite3_keyword_check=function(){return(Si=t._sqlite3_keyword_check=t.asm.sqlite3_keyword_check).apply(null,arguments)},Ai=t._sqlite3_complete=function(){return(Ai=t._sqlite3_complete=t.asm.sqlite3_complete).apply(null,arguments)},ki=t._sqlite3_libversion=function(){return(ki=t._sqlite3_libversion=t.asm.sqlite3_libversion).apply(null,arguments)},Ii=t._sqlite3_libversion_number=function(){return(Ii=t._sqlite3_libversion_number=t.asm.sqlite3_libversion_number).apply(null,arguments)},Ti=t._sqlite3_shutdown=function(){return(Ti=t._sqlite3_shutdown=t.asm.sqlite3_shutdown).apply(null,arguments)},Oi=t._sqlite3_last_insert_rowid=function(){return(Oi=t._sqlite3_last_insert_rowid=t.asm.sqlite3_last_insert_rowid).apply(null,arguments)},Fi=t._sqlite3_set_last_insert_rowid=function(){return(Fi=t._sqlite3_set_last_insert_rowid=t.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},Pi=t._sqlite3_changes64=function(){return(Pi=t._sqlite3_changes64=t.asm.sqlite3_changes64).apply(null,arguments)},Li=t._sqlite3_changes=function(){return(Li=t._sqlite3_changes=t.asm.sqlite3_changes).apply(null,arguments)},Ci=t._sqlite3_total_changes64=function(){return(Ci=t._sqlite3_total_changes64=t.asm.sqlite3_total_changes64).apply(null,arguments)},Di=t._sqlite3_total_changes=function(){return(Di=t._sqlite3_total_changes=t.asm.sqlite3_total_changes).apply(null,arguments)},Ri=t._sqlite3_txn_state=function(){return(Ri=t._sqlite3_txn_state=t.asm.sqlite3_txn_state).apply(null,arguments)},Ni=t._sqlite3_close_v2=function(){return(Ni=t._sqlite3_close_v2=t.asm.sqlite3_close_v2).apply(null,arguments)},Mi=t._sqlite3_busy_handler=function(){return(Mi=t._sqlite3_busy_handler=t.asm.sqlite3_busy_handler).apply(null,arguments)},ji=t._sqlite3_progress_handler=function(){return(ji=t._sqlite3_progress_handler=t.asm.sqlite3_progress_handler).apply(null,arguments)},Bi=t._sqlite3_busy_timeout=function(){return(Bi=t._sqlite3_busy_timeout=t.asm.sqlite3_busy_timeout).apply(null,arguments)},Ui=t._sqlite3_create_function=function(){return(Ui=t._sqlite3_create_function=t.asm.sqlite3_create_function).apply(null,arguments)},zi=t._sqlite3_create_function_v2=function(){return(zi=t._sqlite3_create_function_v2=t.asm.sqlite3_create_function_v2).apply(null,arguments)},Wi=t._sqlite3_create_window_function=function(){return(Wi=t._sqlite3_create_window_function=t.asm.sqlite3_create_window_function).apply(null,arguments)},Qi=t._sqlite3_overload_function=function(){return(Qi=t._sqlite3_overload_function=t.asm.sqlite3_overload_function).apply(null,arguments)},Hi=t._sqlite3_trace_v2=function(){return(Hi=t._sqlite3_trace_v2=t.asm.sqlite3_trace_v2).apply(null,arguments)},Vi=t._sqlite3_commit_hook=function(){return(Vi=t._sqlite3_commit_hook=t.asm.sqlite3_commit_hook).apply(null,arguments)},$i=t._sqlite3_update_hook=function(){return($i=t._sqlite3_update_hook=t.asm.sqlite3_update_hook).apply(null,arguments)},Gi=t._sqlite3_rollback_hook=function(){return(Gi=t._sqlite3_rollback_hook=t.asm.sqlite3_rollback_hook).apply(null,arguments)},Ki=t._sqlite3_preupdate_hook=function(){return(Ki=t._sqlite3_preupdate_hook=t.asm.sqlite3_preupdate_hook).apply(null,arguments)},Ji=t._sqlite3_error_offset=function(){return(Ji=t._sqlite3_error_offset=t.asm.sqlite3_error_offset).apply(null,arguments)},Xi=t._sqlite3_errcode=function(){return(Xi=t._sqlite3_errcode=t.asm.sqlite3_errcode).apply(null,arguments)},Yi=t._sqlite3_extended_errcode=function(){return(Yi=t._sqlite3_extended_errcode=t.asm.sqlite3_extended_errcode).apply(null,arguments)},Zi=t._sqlite3_errstr=function(){return(Zi=t._sqlite3_errstr=t.asm.sqlite3_errstr).apply(null,arguments)},eo=t._sqlite3_limit=function(){return(eo=t._sqlite3_limit=t.asm.sqlite3_limit).apply(null,arguments)},to=t._sqlite3_open=function(){return(to=t._sqlite3_open=t.asm.sqlite3_open).apply(null,arguments)},no=t._sqlite3_open_v2=function(){return(no=t._sqlite3_open_v2=t.asm.sqlite3_open_v2).apply(null,arguments)},ro=t._sqlite3_create_collation=function(){return(ro=t._sqlite3_create_collation=t.asm.sqlite3_create_collation).apply(null,arguments)},so=t._sqlite3_create_collation_v2=function(){return(so=t._sqlite3_create_collation_v2=t.asm.sqlite3_create_collation_v2).apply(null,arguments)},io=t._sqlite3_collation_needed=function(){return(io=t._sqlite3_collation_needed=t.asm.sqlite3_collation_needed).apply(null,arguments)},oo=t._sqlite3_table_column_metadata=function(){return(oo=t._sqlite3_table_column_metadata=t.asm.sqlite3_table_column_metadata).apply(null,arguments)},ao=t._sqlite3_extended_result_codes=function(){return(ao=t._sqlite3_extended_result_codes=t.asm.sqlite3_extended_result_codes).apply(null,arguments)},lo=t._sqlite3_uri_key=function(){return(lo=t._sqlite3_uri_key=t.asm.sqlite3_uri_key).apply(null,arguments)},co=t._sqlite3_uri_int64=function(){return(co=t._sqlite3_uri_int64=t.asm.sqlite3_uri_int64).apply(null,arguments)},uo=t._sqlite3_db_name=function(){return(uo=t._sqlite3_db_name=t.asm.sqlite3_db_name).apply(null,arguments)},_o=t._sqlite3_db_filename=function(){return(_o=t._sqlite3_db_filename=t.asm.sqlite3_db_filename).apply(null,arguments)},fo=t._sqlite3_compileoption_used=function(){return(fo=t._sqlite3_compileoption_used=t.asm.sqlite3_compileoption_used).apply(null,arguments)},po=t._sqlite3_compileoption_get=function(){return(po=t._sqlite3_compileoption_get=t.asm.sqlite3_compileoption_get).apply(null,arguments)},mo=t._sqlite3session_diff=function(){return(mo=t._sqlite3session_diff=t.asm.sqlite3session_diff).apply(null,arguments)},ho=t._sqlite3session_attach=function(){return(ho=t._sqlite3session_attach=t.asm.sqlite3session_attach).apply(null,arguments)},go=t._sqlite3session_create=function(){return(go=t._sqlite3session_create=t.asm.sqlite3session_create).apply(null,arguments)},yo=t._sqlite3session_delete=function(){return(yo=t._sqlite3session_delete=t.asm.sqlite3session_delete).apply(null,arguments)},qo=t._sqlite3session_table_filter=function(){return(qo=t._sqlite3session_table_filter=t.asm.sqlite3session_table_filter).apply(null,arguments)},bo=t._sqlite3session_changeset=function(){return(bo=t._sqlite3session_changeset=t.asm.sqlite3session_changeset).apply(null,arguments)},wo=t._sqlite3session_changeset_strm=function(){return(wo=t._sqlite3session_changeset_strm=t.asm.sqlite3session_changeset_strm).apply(null,arguments)},vo=t._sqlite3session_patchset_strm=function(){return(vo=t._sqlite3session_patchset_strm=t.asm.sqlite3session_patchset_strm).apply(null,arguments)},Eo=t._sqlite3session_patchset=function(){return(Eo=t._sqlite3session_patchset=t.asm.sqlite3session_patchset).apply(null,arguments)},xo=t._sqlite3session_enable=function(){return(xo=t._sqlite3session_enable=t.asm.sqlite3session_enable).apply(null,arguments)},So=t._sqlite3session_indirect=function(){return(So=t._sqlite3session_indirect=t.asm.sqlite3session_indirect).apply(null,arguments)},Ao=t._sqlite3session_isempty=function(){return(Ao=t._sqlite3session_isempty=t.asm.sqlite3session_isempty).apply(null,arguments)},ko=t._sqlite3session_memory_used=function(){return(ko=t._sqlite3session_memory_used=t.asm.sqlite3session_memory_used).apply(null,arguments)},Io=t._sqlite3session_object_config=function(){return(Io=t._sqlite3session_object_config=t.asm.sqlite3session_object_config).apply(null,arguments)},To=t._sqlite3session_changeset_size=function(){return(To=t._sqlite3session_changeset_size=t.asm.sqlite3session_changeset_size).apply(null,arguments)},Oo=t._sqlite3changeset_start=function(){return(Oo=t._sqlite3changeset_start=t.asm.sqlite3changeset_start).apply(null,arguments)},Fo=t._sqlite3changeset_start_v2=function(){return(Fo=t._sqlite3changeset_start_v2=t.asm.sqlite3changeset_start_v2).apply(null,arguments)},Po=t._sqlite3changeset_start_strm=function(){return(Po=t._sqlite3changeset_start_strm=t.asm.sqlite3changeset_start_strm).apply(null,arguments)},Lo=t._sqlite3changeset_start_v2_strm=function(){return(Lo=t._sqlite3changeset_start_v2_strm=t.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},Co=t._sqlite3changeset_next=function(){return(Co=t._sqlite3changeset_next=t.asm.sqlite3changeset_next).apply(null,arguments)},Do=t._sqlite3changeset_op=function(){return(Do=t._sqlite3changeset_op=t.asm.sqlite3changeset_op).apply(null,arguments)},Ro=t._sqlite3changeset_pk=function(){return(Ro=t._sqlite3changeset_pk=t.asm.sqlite3changeset_pk).apply(null,arguments)},No=t._sqlite3changeset_old=function(){return(No=t._sqlite3changeset_old=t.asm.sqlite3changeset_old).apply(null,arguments)},Mo=t._sqlite3changeset_new=function(){return(Mo=t._sqlite3changeset_new=t.asm.sqlite3changeset_new).apply(null,arguments)},jo=t._sqlite3changeset_conflict=function(){return(jo=t._sqlite3changeset_conflict=t.asm.sqlite3changeset_conflict).apply(null,arguments)},Bo=t._sqlite3changeset_fk_conflicts=function(){return(Bo=t._sqlite3changeset_fk_conflicts=t.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},Uo=t._sqlite3changeset_finalize=function(){return(Uo=t._sqlite3changeset_finalize=t.asm.sqlite3changeset_finalize).apply(null,arguments)},zo=t._sqlite3changeset_invert=function(){return(zo=t._sqlite3changeset_invert=t.asm.sqlite3changeset_invert).apply(null,arguments)},Wo=t._sqlite3changeset_invert_strm=function(){return(Wo=t._sqlite3changeset_invert_strm=t.asm.sqlite3changeset_invert_strm).apply(null,arguments)},Qo=t._sqlite3changeset_apply_v2=function(){return(Qo=t._sqlite3changeset_apply_v2=t.asm.sqlite3changeset_apply_v2).apply(null,arguments)},Ho=t._sqlite3changeset_apply=function(){return(Ho=t._sqlite3changeset_apply=t.asm.sqlite3changeset_apply).apply(null,arguments)},Vo=t._sqlite3changeset_apply_v2_strm=function(){return(Vo=t._sqlite3changeset_apply_v2_strm=t.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},$o=t._sqlite3changeset_apply_strm=function(){return($o=t._sqlite3changeset_apply_strm=t.asm.sqlite3changeset_apply_strm).apply(null,arguments)},Go=t._sqlite3changegroup_new=function(){return(Go=t._sqlite3changegroup_new=t.asm.sqlite3changegroup_new).apply(null,arguments)},Ko=t._sqlite3changegroup_add=function(){return(Ko=t._sqlite3changegroup_add=t.asm.sqlite3changegroup_add).apply(null,arguments)},Jo=t._sqlite3changegroup_output=function(){return(Jo=t._sqlite3changegroup_output=t.asm.sqlite3changegroup_output).apply(null,arguments)},Xo=t._sqlite3changegroup_add_strm=function(){return(Xo=t._sqlite3changegroup_add_strm=t.asm.sqlite3changegroup_add_strm).apply(null,arguments)},Yo=t._sqlite3changegroup_output_strm=function(){return(Yo=t._sqlite3changegroup_output_strm=t.asm.sqlite3changegroup_output_strm).apply(null,arguments)},Zo=t._sqlite3changegroup_delete=function(){return(Zo=t._sqlite3changegroup_delete=t.asm.sqlite3changegroup_delete).apply(null,arguments)},ea=t._sqlite3changeset_concat=function(){return(ea=t._sqlite3changeset_concat=t.asm.sqlite3changeset_concat).apply(null,arguments)},ta=t._sqlite3changeset_concat_strm=function(){return(ta=t._sqlite3changeset_concat_strm=t.asm.sqlite3changeset_concat_strm).apply(null,arguments)},na=t._sqlite3session_config=function(){return(na=t._sqlite3session_config=t.asm.sqlite3session_config).apply(null,arguments)},ra=t._sqlite3_sourceid=function(){return(ra=t._sqlite3_sourceid=t.asm.sqlite3_sourceid).apply(null,arguments)},sa=t._sqlite3_wasm_pstack_ptr=function(){return(sa=t._sqlite3_wasm_pstack_ptr=t.asm.sqlite3_wasm_pstack_ptr).apply(null,arguments)},ia=t._sqlite3_wasm_pstack_restore=function(){return(ia=t._sqlite3_wasm_pstack_restore=t.asm.sqlite3_wasm_pstack_restore).apply(null,arguments)},oa=t._sqlite3_wasm_pstack_alloc=function(){return(oa=t._sqlite3_wasm_pstack_alloc=t.asm.sqlite3_wasm_pstack_alloc).apply(null,arguments)},aa=t._sqlite3_wasm_pstack_remaining=function(){return(aa=t._sqlite3_wasm_pstack_remaining=t.asm.sqlite3_wasm_pstack_remaining).apply(null,arguments)},la=t._sqlite3_wasm_pstack_quota=function(){return(la=t._sqlite3_wasm_pstack_quota=t.asm.sqlite3_wasm_pstack_quota).apply(null,arguments)},ca=t._sqlite3_wasm_db_error=function(){return(ca=t._sqlite3_wasm_db_error=t.asm.sqlite3_wasm_db_error).apply(null,arguments)},ua=t._sqlite3_wasm_test_struct=function(){return(ua=t._sqlite3_wasm_test_struct=t.asm.sqlite3_wasm_test_struct).apply(null,arguments)},_a=t._sqlite3_wasm_enum_json=function(){return(_a=t._sqlite3_wasm_enum_json=t.asm.sqlite3_wasm_enum_json).apply(null,arguments)},fa=t._sqlite3_wasm_vfs_unlink=function(){return(fa=t._sqlite3_wasm_vfs_unlink=t.asm.sqlite3_wasm_vfs_unlink).apply(null,arguments)},pa=t._sqlite3_wasm_db_vfs=function(){return(pa=t._sqlite3_wasm_db_vfs=t.asm.sqlite3_wasm_db_vfs).apply(null,arguments)},da=t._sqlite3_wasm_db_reset=function(){return(da=t._sqlite3_wasm_db_reset=t.asm.sqlite3_wasm_db_reset).apply(null,arguments)},ma=t._sqlite3_wasm_db_export_chunked=function(){return(ma=t._sqlite3_wasm_db_export_chunked=t.asm.sqlite3_wasm_db_export_chunked).apply(null,arguments)},ha=t._sqlite3_wasm_db_serialize=function(){return(ha=t._sqlite3_wasm_db_serialize=t.asm.sqlite3_wasm_db_serialize).apply(null,arguments)},ga=t._sqlite3_wasm_vfs_create_file=function(){return(ga=t._sqlite3_wasm_vfs_create_file=t.asm.sqlite3_wasm_vfs_create_file).apply(null,arguments)},ya=t._sqlite3_wasm_posix_create_file=function(){return(ya=t._sqlite3_wasm_posix_create_file=t.asm.sqlite3_wasm_posix_create_file).apply(null,arguments)},qa=t._sqlite3_wasm_kvvfsMakeKeyOnPstack=function(){return(qa=t._sqlite3_wasm_kvvfsMakeKeyOnPstack=t.asm.sqlite3_wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},ba=t._sqlite3_wasm_kvvfs_methods=function(){return(ba=t._sqlite3_wasm_kvvfs_methods=t.asm.sqlite3_wasm_kvvfs_methods).apply(null,arguments)},wa=t._sqlite3_wasm_vtab_config=function(){return(wa=t._sqlite3_wasm_vtab_config=t.asm.sqlite3_wasm_vtab_config).apply(null,arguments)},va=t._sqlite3_wasm_db_config_ip=function(){return(va=t._sqlite3_wasm_db_config_ip=t.asm.sqlite3_wasm_db_config_ip).apply(null,arguments)},Ea=t._sqlite3_wasm_db_config_pii=function(){return(Ea=t._sqlite3_wasm_db_config_pii=t.asm.sqlite3_wasm_db_config_pii).apply(null,arguments)},xa=t._sqlite3_wasm_db_config_s=function(){return(xa=t._sqlite3_wasm_db_config_s=t.asm.sqlite3_wasm_db_config_s).apply(null,arguments)},Sa=t._sqlite3_wasm_config_i=function(){return(Sa=t._sqlite3_wasm_config_i=t.asm.sqlite3_wasm_config_i).apply(null,arguments)},Aa=t._sqlite3_wasm_config_ii=function(){return(Aa=t._sqlite3_wasm_config_ii=t.asm.sqlite3_wasm_config_ii).apply(null,arguments)},ka=t._sqlite3_wasm_config_j=function(){return(ka=t._sqlite3_wasm_config_j=t.asm.sqlite3_wasm_config_j).apply(null,arguments)},Ia=t._sqlite3_wasm_init_wasmfs=function(){return(Ia=t._sqlite3_wasm_init_wasmfs=t.asm.sqlite3_wasm_init_wasmfs).apply(null,arguments)},Ta=t._sqlite3_wasm_test_intptr=function(){return(Ta=t._sqlite3_wasm_test_intptr=t.asm.sqlite3_wasm_test_intptr).apply(null,arguments)},Oa=t._sqlite3_wasm_test_voidptr=function(){return(Oa=t._sqlite3_wasm_test_voidptr=t.asm.sqlite3_wasm_test_voidptr).apply(null,arguments)},Fa=t._sqlite3_wasm_test_int64_max=function(){return(Fa=t._sqlite3_wasm_test_int64_max=t.asm.sqlite3_wasm_test_int64_max).apply(null,arguments)},Pa=t._sqlite3_wasm_test_int64_min=function(){return(Pa=t._sqlite3_wasm_test_int64_min=t.asm.sqlite3_wasm_test_int64_min).apply(null,arguments)},La=t._sqlite3_wasm_test_int64_times2=function(){return(La=t._sqlite3_wasm_test_int64_times2=t.asm.sqlite3_wasm_test_int64_times2).apply(null,arguments)},Ca=t._sqlite3_wasm_test_int64_minmax=function(){return(Ca=t._sqlite3_wasm_test_int64_minmax=t.asm.sqlite3_wasm_test_int64_minmax).apply(null,arguments)},Da=t._sqlite3_wasm_test_int64ptr=function(){return(Da=t._sqlite3_wasm_test_int64ptr=t.asm.sqlite3_wasm_test_int64ptr).apply(null,arguments)},Ra=t._sqlite3_wasm_test_stack_overflow=function(){return(Ra=t._sqlite3_wasm_test_stack_overflow=t.asm.sqlite3_wasm_test_stack_overflow).apply(null,arguments)},Na=t._sqlite3_wasm_test_str_hello=function(){return(Na=t._sqlite3_wasm_test_str_hello=t.asm.sqlite3_wasm_test_str_hello).apply(null,arguments)},Nt=t._malloc=function(){return(Nt=t._malloc=t.asm.malloc).apply(null,arguments)},Ma=t._free=function(){return(Ma=t._free=t.asm.free).apply(null,arguments)},ja=t._realloc=function(){return(ja=t._realloc=t.asm.realloc).apply(null,arguments)},Mt=t._emscripten_builtin_memalign=function(){return(Mt=t._emscripten_builtin_memalign=t.asm.emscripten_builtin_memalign).apply(null,arguments)},Ba=t.stackSave=function(){return(Ba=t.stackSave=t.asm.stackSave).apply(null,arguments)},Ua=t.stackRestore=function(){return(Ua=t.stackRestore=t.asm.stackRestore).apply(null,arguments)},za=t.stackAlloc=function(){return(za=t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)};t.wasmMemory=Fe;var Ye;We=function n(){Ye||jt(),Ye||(We=n)};function jt(n){if(n=n||mt,Re>0||(pn(),Re>0))return;function e(){Ye||(Ye=!0,t.calledRun=!0,!yt&&(dn(),ae(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),mn()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return jt(),t.postRun||(t.postRun=[]),t.postRun.push(function(n){"use strict";"use strict";if(globalThis.sqlite3ApiBootstrap=function e(s=globalThis.sqlite3ApiConfig||e.defaultConfig){if(e.sqlite3)return console.warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),e.sqlite3;let o=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:(()=>typeof n<"u"?!!n.HEAPU64:!!globalThis.BigInt64Array)(),debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},s||{});Object.assign(o,{allocExportName:o.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:o.useStdAlloc?"free":"sqlite3_free",reallocExportName:o.useStdAlloc?"realloc":"sqlite3_realloc"},o),["exports","memory","wasmfsOpfsDir"].forEach(l=>{typeof o[l]=="function"&&(o[l]=o[l]())});let r=Object.create(null),i=Object.create(null),p=l=>r.sqlite3_js_rc_str&&r.sqlite3_js_rc_str(l)||"Unknown result code #"+l,g=l=>typeof l=="number"&&l===(l|0);class T extends Error{constructor(...c){let m;if(c.length)if(g(c[0]))if(m=c[0],c.length===1)super(p(c[0]));else{let w=p(m);typeof c[1]=="object"?super(w,c[1]):(c[0]=w+":",super(c.join(" ")))}else c.length===2&&typeof c[1]=="object"?super(...c):super(c.join(" "));this.resultCode=m||r.SQLITE_ERROR,this.name="SQLite3Error"}}T.toss=(...l)=>{throw new T(...l)};let j=T.toss;o.wasmfsOpfsDir&&!/^\/[^/]+$/.test(o.wasmfsOpfsDir)&&j("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");let Q=l=>typeof l!="bigint"&&l===(l|0)&&l<=2147483647&&l>=-2147483648,V=function l(c){return l._max||(l._max=BigInt("0x7fffffffffffffff"),l._min=~l._max),c>=l._min&&c<=l._max},$=l=>l>=-0x7fffffffn-1n&&l<=0x7fffffffn,h=function l(c){return l._min||(l._min=Number.MIN_SAFE_INTEGER,l._max=Number.MAX_SAFE_INTEGER),c>=l._min&&c<=l._max},f=l=>l&&l.constructor&&Q(l.constructor.BYTES_PER_ELEMENT)?l:!1,_=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,b=l=>l.buffer instanceof _,x=(l,c,m)=>b(l)?l.slice(c,m):l.subarray(c,m),v=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),C=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),P=l=>v(l)||j("Value is not of a supported TypedArray type."),R=new TextDecoder("utf-8"),z=function(l,c,m){return R.decode(x(l,c,m))},u=function(l){return C(l)?z(l instanceof ArrayBuffer?new Uint8Array(l):l):Array.isArray(l)?l.join(""):(i.isPtr(l)&&(l=i.cstrToJs(l)),l)};class y extends Error{constructor(...c){c.length===2&&typeof c[1]=="object"?super(...c):c.length?super(c.join(" ")):super("Allocation failed."),this.resultCode=r.SQLITE_NOMEM,this.name="WasmAllocError"}}y.toss=(...l)=>{throw new y(...l)},Object.assign(r,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(l,c,m,w,B,W,te,Y,ne)=>{},sqlite3_create_function:(l,c,m,w,B,W,te,Y)=>{},sqlite3_create_window_function:(l,c,m,w,B,W,te,Y,ne,le)=>{},sqlite3_prepare_v3:(l,c,m,w,B,W)=>{},sqlite3_prepare_v2:(l,c,m,w,B)=>{},sqlite3_exec:(l,c,m,w,B)=>{},sqlite3_randomness:(l,c)=>{}});let A={affirmBindableTypedArray:P,flexibleString:u,bigIntFits32:$,bigIntFits64:V,bigIntFitsDouble:h,isBindableTypedArray:v,isInt32:Q,isSQLableTypedArray:C,isTypedArray:f,typedArrayToString:z,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:b,toss:function(...l){throw new Error(l.join(" "))},toss3:j,typedArrayPart:x};Object.assign(i,{ptrSizeof:o.wasmPtrSizeof||4,ptrIR:o.wasmPtrIR||"i32",bigIntEnabled:!!o.bigIntEnabled,exports:o.exports||j("Missing API config.exports (WASM module exports)."),memory:o.memory||o.exports.memory||j("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),i.allocFromTypedArray=function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l)),P(l);let c=i.alloc(l.byteLength||1);return i.heapForSize(l.constructor).set(l.byteLength?l:[0],c),c};{let l=o.allocExportName,c=o.deallocExportName,m=o.reallocExportName;for(let w of[l,c,m])i.exports[w]instanceof Function||j("Missing required exports[",w,"] function.");i.alloc=function w(B){return w.impl(B)||y.toss("Failed to allocate",B," bytes.")},i.alloc.impl=i.exports[l],i.realloc=function w(B,W){let te=w.impl(B,W);return W?te||y.toss("Failed to reallocate",W," bytes."):0},i.realloc.impl=i.exports[m],i.dealloc=i.exports[c]}i.compileOptionUsed=function l(c){if(arguments.length){if(Array.isArray(c)){let m={};return c.forEach(w=>{m[w]=r.sqlite3_compileoption_used(w)}),m}else if(typeof c=="object")return Object.keys(c).forEach(m=>{c[m]=r.sqlite3_compileoption_used(m)}),c}else{if(l._result)return l._result;l._opt||(l._rx=/^([^=]+)=(.+)/,l._rxInt=/^-?\d+$/,l._opt=function(te,Y){let ne=l._rx.exec(te);Y[0]=ne?ne[1]:te,Y[1]=ne?l._rxInt.test(ne[2])?+ne[2]:ne[2]:!0});let m={},w=[0,0],B=0,W;for(;W=r.sqlite3_compileoption_get(B++);)l._opt(W,w),m[w[0]]=w[1];return l._result=m}return typeof c=="string"?!!r.sqlite3_compileoption_used(c):!1},i.pstack=Object.assign(Object.create(null),{restore:i.exports.sqlite3_wasm_pstack_restore,alloc:function(l){return typeof l=="string"&&!(l=i.sizeofIR(l))&&y.toss("Invalid value for pstack.alloc(",arguments[0],")"),i.exports.sqlite3_wasm_pstack_alloc(l)||y.toss("Could not allocate",l,"bytes from the pstack.")},allocChunks:function(l,c){typeof c=="string"&&!(c=i.sizeofIR(c))&&y.toss("Invalid size value for allocChunks(",arguments[1],")");let m=i.pstack.alloc(l*c),w=[],B=0,W=0;for(;B<l;++B,W+=c)w.push(m+W);return w},allocPtr:(l=1,c=!0)=>l===1?i.pstack.alloc(c?8:i.ptrSizeof):i.pstack.allocChunks(l,c?8:i.ptrSizeof)}),Object.defineProperties(i.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3_wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3_wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3_wasm_pstack_remaining}}),r.sqlite3_randomness=(...l)=>{if(l.length===1&&A.isTypedArray(l[0])&&l[0].BYTES_PER_ELEMENT===1){let c=l[0];if(c.byteLength===0)return i.exports.sqlite3_randomness(0,0),c;let m=i.pstack.pointer;try{let w=c.byteLength,B=0,W=i.exports.sqlite3_randomness,te=i.heap8u(),Y=w<512?w:512,ne=i.pstack.alloc(Y);do{let le=w>Y?Y:w;W(le,ne),c.set(x(te,ne,ne+le),B),w-=le,B+=le}while(w>0)}catch(w){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",w)}finally{i.pstack.restore(m)}return c}i.exports.sqlite3_randomness(...l)};let L;if(r.sqlite3_wasmfs_opfs_dir=function(){if(L!==void 0)return L;let l=o.wasmfsOpfsDir;if(!l||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return L="";try{return l&&i.xCallWrapped("sqlite3_wasm_init_wasmfs","i32",["string"],l)===0?L=l:L=""}catch{return L=""}},r.sqlite3_wasmfs_filename_is_persistent=function(l){let c=r.sqlite3_wasmfs_opfs_dir();return c&&l?l.startsWith(c+"/"):!1},r.sqlite3_js_db_uses_vfs=function(l,c,m=0){try{let w=r.sqlite3_vfs_find(c);return w?l?w===r.sqlite3_js_db_vfs(l,m)?w:!1:w===r.sqlite3_vfs_find(0)?w:!1:!1}catch{return!1}},r.sqlite3_js_vfs_list=function(){let l=[],c=r.sqlite3_vfs_find(0);for(;c;){let m=new r.sqlite3_vfs(c);l.push(i.cstrToJs(m.$zName)),c=m.$pNext,m.dispose()}return l},r.sqlite3_js_db_export=function(l,c=0){l=i.xWrap.testConvertArg("sqlite3*",l),l||j("Invalid sqlite3* argument."),i.bigIntEnabled||j("BigInt64 support is not enabled.");let m=i.scopedAllocPush(),w;try{let B=i.scopedAlloc(8+i.ptrSizeof),W=B+8,te=c?i.isPtr(c)?c:i.scopedAllocCString(""+c):0,Y=i.exports.sqlite3_wasm_db_serialize(l,te,W,B,0);Y&&j("Database serialization failed with code",d.capi.sqlite3_js_rc_str(Y)),w=i.peekPtr(W);let ne=i.peek(B,"i64");return Y=ne?i.heap8u().slice(w,w+Number(ne)):new Uint8Array,Y}finally{w&&i.exports.sqlite3_free(w),i.scopedAllocPop(m)}},r.sqlite3_js_db_vfs=(l,c=0)=>i.sqlite3_wasm_db_vfs(l,c),r.sqlite3_js_aggregate_context=(l,c)=>r.sqlite3_aggregate_context(l,c)||(c?y.toss("Cannot allocate",c,"bytes for sqlite3_aggregate_context()"):0),r.sqlite3_js_posix_create_file=function(l,c,m){let w;c&&i.isPtr(c)?w=c:c instanceof ArrayBuffer||c instanceof Uint8Array?(w=i.allocFromTypedArray(c),(arguments.length<3||!A.isInt32(m)||m<0)&&(m=c.byteLength)):T.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!A.isInt32(m)||m<0)&&T.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");let B=i.sqlite3_wasm_posix_create_file(l,w,m);B&&T.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str(B))}finally{i.dealloc(w)}},r.sqlite3_js_vfs_create_file=function(l,c,m,w){o.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let B;m?(i.isPtr(m)?B=m:m instanceof ArrayBuffer&&(m=new Uint8Array(m)),m instanceof Uint8Array?(B=i.allocFromTypedArray(m),(arguments.length<4||!A.isInt32(w)||w<0)&&(w=m.byteLength)):T.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):B=0,(!A.isInt32(w)||w<0)&&(i.dealloc(B),T.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{let W=i.sqlite3_wasm_vfs_create_file(l,c,B,w);W&&T.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str(W))}finally{i.dealloc(B)}},A.isUIThread()){let l=function(c){let m=Object.create(null);return m.prefix="kvvfs-"+c,m.stores=[],(c==="session"||c==="")&&m.stores.push(globalThis.sessionStorage),(c==="local"||c==="")&&m.stores.push(globalThis.localStorage),m};r.sqlite3_js_kvvfs_clear=function(c=""){let m=0,w=l(c);return w.stores.forEach(B=>{let W=[],te;for(te=0;te<B.length;++te){let Y=B.key(te);Y.startsWith(w.prefix)&&W.push(Y)}W.forEach(Y=>B.removeItem(Y)),m+=W.length}),m},r.sqlite3_js_kvvfs_size=function(c=""){let m=0,w=l(c);return w.stores.forEach(B=>{let W;for(W=0;W<B.length;++W){let te=B.key(W);te.startsWith(w.prefix)&&(m+=te.length,m+=B.getItem(te).length)}}),m*2}}r.sqlite3_db_config=function(l,c,...m){switch(this.s||(this.s=i.xWrap("sqlite3_wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=i.xWrap("sqlite3_wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=i.xWrap("sqlite3_wasm_db_config_ip","int",["sqlite3*","int","int","*"])),c){case r.SQLITE_DBCONFIG_ENABLE_FKEY:case r.SQLITE_DBCONFIG_ENABLE_TRIGGER:case r.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case r.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case r.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case r.SQLITE_DBCONFIG_ENABLE_QPSG:case r.SQLITE_DBCONFIG_TRIGGER_EQP:case r.SQLITE_DBCONFIG_RESET_DATABASE:case r.SQLITE_DBCONFIG_DEFENSIVE:case r.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case r.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case r.SQLITE_DBCONFIG_DQS_DML:case r.SQLITE_DBCONFIG_DQS_DDL:case r.SQLITE_DBCONFIG_ENABLE_VIEW:case r.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case r.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case r.SQLITE_DBCONFIG_STMT_SCANSTATUS:case r.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(l,c,m[0],m[1]||0);case r.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(l,c,m[0],m[1],m[2]);case r.SQLITE_DBCONFIG_MAINDBNAME:return this.s(l,c,m[0]);default:return r.SQLITE_MISUSE}}.bind(Object.create(null)),r.sqlite3_value_to_js=function(l,c=!0){let m,w=r.sqlite3_value_type(l);switch(w){case r.SQLITE_INTEGER:i.bigIntEnabled?(m=r.sqlite3_value_int64(l),A.bigIntFitsDouble(m)&&(m=Number(m))):m=r.sqlite3_value_double(l);break;case r.SQLITE_FLOAT:m=r.sqlite3_value_double(l);break;case r.SQLITE_TEXT:m=r.sqlite3_value_text(l);break;case r.SQLITE_BLOB:{let B=r.sqlite3_value_bytes(l),W=r.sqlite3_value_blob(l);B&&!W&&d.WasmAllocError.toss("Cannot allocate memory for blob argument of",B,"byte(s)"),m=B?i.heap8u().slice(W,W+Number(B)):null;break}case r.SQLITE_NULL:m=null;break;default:c&&j(r.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",w),m=void 0}return m},r.sqlite3_values_to_js=function(l,c,m=!0){let w,B=[];for(w=0;w<l;++w)B.push(r.sqlite3_value_to_js(i.peekPtr(c+i.ptrSizeof*w),m));return B},r.sqlite3_result_error_js=function(l,c){c instanceof y?r.sqlite3_result_error_nomem(l):r.sqlite3_result_error(l,""+c,-1)},r.sqlite3_result_js=function(l,c){if(c instanceof Error){r.sqlite3_result_error_js(l,c);return}try{switch(typeof c){case"undefined":break;case"boolean":r.sqlite3_result_int(l,c?1:0);break;case"bigint":A.bigIntFits32(c)?r.sqlite3_result_int(l,Number(c)):A.bigIntFitsDouble(c)?r.sqlite3_result_double(l,Number(c)):i.bigIntEnabled?A.bigIntFits64(c)?r.sqlite3_result_int64(l,c):j("BigInt value",c.toString(),"is too BigInt for int64."):j("BigInt value",c.toString(),"is too BigInt.");break;case"number":{let m;A.isInt32(c)?m=r.sqlite3_result_int:i.bigIntEnabled&&Number.isInteger(c)&&A.bigIntFits64(BigInt(c))?m=r.sqlite3_result_int64:m=r.sqlite3_result_double,m(l,c);break}case"string":{let[m,w]=i.allocCString(c,!0);r.sqlite3_result_text(l,m,w,r.SQLITE_WASM_DEALLOC);break}case"object":if(c===null){r.sqlite3_result_null(l);break}else if(A.isBindableTypedArray(c)){let m=i.allocFromTypedArray(c);r.sqlite3_result_blob(l,m,c.byteLength,r.SQLITE_WASM_DEALLOC);break}default:j("Don't not how to handle this UDF result value:",typeof c,c)}}catch(m){r.sqlite3_result_error_js(l,m)}},r.sqlite3_column_js=function(l,c,m=!0){let w=r.sqlite3_column_value(l,c);return w===0?void 0:r.sqlite3_value_to_js(w,m)};let O=function(l,c,m){m=r[m],this.ptr?i.pokePtr(this.ptr,0):this.ptr=i.allocPtr();let w=m(l,c,this.ptr);if(w)return T.toss(w,arguments[2]+"() failed with code "+w);let B=i.peekPtr(this.ptr);return B?r.sqlite3_value_to_js(B,!0):void 0}.bind(Object.create(null));r.sqlite3_preupdate_new_js=(l,c)=>O(l,c,"sqlite3_preupdate_new"),r.sqlite3_preupdate_old_js=(l,c)=>O(l,c,"sqlite3_preupdate_old"),r.sqlite3changeset_new_js=(l,c)=>O(l,c,"sqlite3changeset_new"),r.sqlite3changeset_old_js=(l,c)=>O(l,c,"sqlite3changeset_old");let d={WasmAllocError:y,SQLite3Error:T,capi:r,util:A,wasm:i,config:o,version:Object.create(null),client:void 0,asyncPostInit:async function l(){if(l.isReady instanceof Promise)return l.isReady;let c=e.initializersAsync;delete e.initializersAsync;let m=async()=>(d.__isUnderTest||(delete d.util,delete d.StructBinder),d),w=W=>{throw o.error("an async sqlite3 initializer failed:",W),W};if(!c||!c.length)return l.isReady=m().catch(w);c=c.map(W=>W instanceof Function?async te=>W(d):W),c.push(m);let B=Promise.resolve(d);for(;c.length;)B=B.then(c.shift());return l.isReady=B.catch(w)},scriptInfo:void 0};try{e.initializers.forEach(l=>{l(d)})}catch(l){throw console.error("sqlite3 bootstrap initializer threw:",l),l}return delete e.initializers,e.sqlite3=d,d},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(e){"use strict";e.bigIntEnabled===void 0&&(e.bigIntEnabled=!!globalThis.BigInt64Array);let s=(...u)=>{throw new Error(u.join(" "))};e.exports||Object.defineProperty(e,"exports",{enumerable:!0,configurable:!0,get:()=>e.instance&&e.instance.exports});let o=e.pointerIR||"i32",r=e.ptrSizeof=o==="i32"?4:o==="i64"?8:s("Unhandled ptrSizeof:",o),i=Object.create(null);i.heapSize=0,i.memory=null,i.freeFuncIndexes=[],i.scopedAlloc=[],i.utf8Decoder=new TextDecoder,i.utf8Encoder=new TextEncoder("utf-8"),e.sizeofIR=u=>{switch(u){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return r;default:return(""+u).endsWith("*")?r:void 0}};let p=function(){if(!i.memory)i.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;else if(i.heapSize===i.memory.buffer.byteLength)return i;let u=i.memory.buffer;return i.HEAP8=new Int8Array(u),i.HEAP8U=new Uint8Array(u),i.HEAP16=new Int16Array(u),i.HEAP16U=new Uint16Array(u),i.HEAP32=new Int32Array(u),i.HEAP32U=new Uint32Array(u),e.bigIntEnabled&&(i.HEAP64=new BigInt64Array(u),i.HEAP64U=new BigUint64Array(u)),i.HEAP32F=new Float32Array(u),i.HEAP64F=new Float64Array(u),i.heapSize=u.byteLength,i};e.heap8=()=>p().HEAP8,e.heap8u=()=>p().HEAP8U,e.heap16=()=>p().HEAP16,e.heap16u=()=>p().HEAP16U,e.heap32=()=>p().HEAP32,e.heap32u=()=>p().HEAP32U,e.heapForSize=function(u,y=!0){let A,L=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:p();switch(u){case Int8Array:return L.HEAP8;case Uint8Array:return L.HEAP8U;case Int16Array:return L.HEAP16;case Uint16Array:return L.HEAP16U;case Int32Array:return L.HEAP32;case Uint32Array:return L.HEAP32U;case 8:return y?L.HEAP8U:L.HEAP8;case 16:return y?L.HEAP16U:L.HEAP16;case 32:return y?L.HEAP32U:L.HEAP32;case 64:if(L.HEAP64)return y?L.HEAP64U:L.HEAP64;break;default:if(e.bigIntEnabled){if(u===globalThis.BigUint64Array)return L.HEAP64U;if(u===globalThis.BigInt64Array)return L.HEAP64;break}}s("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},e.functionTable=function(){return e.exports.__indirect_function_table},e.functionEntry=function(u){let y=e.functionTable();return u<y.length?y.get(u):void 0},e.jsFuncToWasm=function u(y,A){if(u._||(u._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(d,l,c){c<128?d[l](c):d[l](c%128|128,c>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(d){let l=u._.rxJSig.exec(d);return l?l[2]:d.substr(1)},letterType:d=>u._.sigTypes[d]||s("Invalid signature letter:",d),pushSigType:(d,l)=>d.push(u._.typeCodes[u._.letterType(l)])}),typeof y=="string"){let d=A;A=y,y=d}let L=u._.sigParams(A),O=[1,96];u._.uleb128Encode(O,"push",L.length);for(let d of L)u._.pushSigType(O,d);return A[0]==="v"?O.push(0):(O.push(1),u._.pushSigType(O,A[0])),u._.uleb128Encode(O,"unshift",O.length),O.unshift(0,97,115,109,1,0,0,0,1),O.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(O)),{e:{f:y}}).exports.f};let g=function(y,A,L){if(L&&!i.scopedAlloc.length&&s("No scopedAllocPush() scope is active."),typeof y=="string"){let c=A;A=y,y=c}(typeof A!="string"||!(y instanceof Function))&&s("Invalid arguments: expecting (function,signature) or (signature,function).");let O=e.functionTable(),d=O.length,l;for(;i.freeFuncIndexes.length&&(l=i.freeFuncIndexes.pop(),O.get(l));){l=null;continue}l||(l=d,O.grow(1));try{return O.set(l,y),L&&i.scopedAlloc[i.scopedAlloc.length-1].push(l),l}catch(c){if(!(c instanceof TypeError))throw l===d&&i.freeFuncIndexes.push(d),c}try{let c=e.jsFuncToWasm(y,A);O.set(l,c),L&&i.scopedAlloc[i.scopedAlloc.length-1].push(l)}catch(c){throw l===d&&i.freeFuncIndexes.push(d),c}return l};e.installFunction=(u,y)=>g(u,y,!1),e.scopedInstallFunction=(u,y)=>g(u,y,!0),e.uninstallFunction=function(u){if(!u&&u!==0)return;let y=i.freeFuncIndexes,A=e.functionTable();y.push(u);let L=A.get(u);return A.set(u,null),L},e.peek=function(y,A="i8"){A.endsWith("*")&&(A=o);let L=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:p(),O=Array.isArray(y)?[]:void 0,d;do{switch(O&&(y=arguments[0].shift()),A){case"i1":case"i8":d=L.HEAP8[y>>0];break;case"i16":d=L.HEAP16[y>>1];break;case"i32":d=L.HEAP32[y>>2];break;case"float":case"f32":d=L.HEAP32F[y>>2];break;case"double":case"f64":d=Number(L.HEAP64F[y>>3]);break;case"i64":if(e.bigIntEnabled){d=BigInt(L.HEAP64[y>>3]);break}default:s("Invalid type for peek():",A)}O&&O.push(d)}while(O&&arguments[0].length);return O||d},e.poke=function(u,y,A="i8"){A.endsWith("*")&&(A=o);let L=i.memory&&i.heapSize===i.memory.buffer.byteLength?i:p();for(let O of Array.isArray(u)?u:[u])switch(A){case"i1":case"i8":L.HEAP8[O>>0]=y;continue;case"i16":L.HEAP16[O>>1]=y;continue;case"i32":L.HEAP32[O>>2]=y;continue;case"float":case"f32":L.HEAP32F[O>>2]=y;continue;case"double":case"f64":L.HEAP64F[O>>3]=y;continue;case"i64":if(L.HEAP64){L.HEAP64[O>>3]=BigInt(y);continue}default:s("Invalid type for poke(): "+A)}return this},e.peekPtr=(...u)=>e.peek(u.length===1?u[0]:u,o),e.pokePtr=(u,y=0)=>e.poke(u,y,o),e.peek8=(...u)=>e.peek(u.length===1?u[0]:u,"i8"),e.poke8=(u,y)=>e.poke(u,y,"i8"),e.peek16=(...u)=>e.peek(u.length===1?u[0]:u,"i16"),e.poke16=(u,y)=>e.poke(u,y,"i16"),e.peek32=(...u)=>e.peek(u.length===1?u[0]:u,"i32"),e.poke32=(u,y)=>e.poke(u,y,"i32"),e.peek64=(...u)=>e.peek(u.length===1?u[0]:u,"i64"),e.poke64=(u,y)=>e.poke(u,y,"i64"),e.peek32f=(...u)=>e.peek(u.length===1?u[0]:u,"f32"),e.poke32f=(u,y)=>e.poke(u,y,"f32"),e.peek64f=(...u)=>e.peek(u.length===1?u[0]:u,"f64"),e.poke64f=(u,y)=>e.poke(u,y,"f64"),e.getMemValue=e.peek,e.getPtrValue=e.peekPtr,e.setMemValue=e.poke,e.setPtrValue=e.pokePtr,e.isPtr32=u=>typeof u=="number"&&u===(u|0)&&u>=0,e.isPtr=e.isPtr32,e.cstrlen=function(u){if(!u||!e.isPtr(u))return null;let y=p().HEAP8U,A=u;for(;y[A]!==0;++A);return A-u};let T=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,j=function(u,y,A){return i.utf8Decoder.decode(u.buffer instanceof T?u.slice(y,A):u.subarray(y,A))};e.cstrToJs=function(u){let y=e.cstrlen(u);return y?j(p().HEAP8U,u,u+y):y===null?y:""},e.jstrlen=function(u){if(typeof u!="string")return null;let y=u.length,A=0;for(let L=0;L<y;++L){let O=u.charCodeAt(L);O>=55296&&O<=57343&&(O=65536+((O&1023)<<10)|u.charCodeAt(++L)&1023),O<=127?++A:O<=2047?A+=2:O<=65535?A+=3:A+=4}return A},e.jstrcpy=function(u,y,A=0,L=-1,O=!0){if((!y||!(y instanceof Int8Array)&&!(y instanceof Uint8Array))&&s("jstrcpy() target must be an Int8Array or Uint8Array."),L<0&&(L=y.length-A),!(L>0)||!(A>=0))return 0;let d=0,l=u.length,c=A,m=A+L-(O?1:0);for(;d<l&&A<m;++d){let w=u.charCodeAt(d);if(w>=55296&&w<=57343&&(w=65536+((w&1023)<<10)|u.charCodeAt(++d)&1023),w<=127){if(A>=m)break;y[A++]=w}else if(w<=2047){if(A+1>=m)break;y[A++]=192|w>>6,y[A++]=128|w&63}else if(w<=65535){if(A+2>=m)break;y[A++]=224|w>>12,y[A++]=128|w>>6&63,y[A++]=128|w&63}else{if(A+3>=m)break;y[A++]=240|w>>18,y[A++]=128|w>>12&63,y[A++]=128|w>>6&63,y[A++]=128|w&63}}return O&&(y[A++]=0),A-c},e.cstrncpy=function(u,y,A){if((!u||!y)&&s("cstrncpy() does not accept NULL strings."),A<0)A=e.cstrlen(strPtr)+1;else if(!(A>0))return 0;let L=e.heap8u(),O=0,d;for(;O<A&&(d=L[y+O]);++O)L[u+O]=d;return O<A&&(L[u+O++]=0),O},e.jstrToUintArray=(u,y=!1)=>i.utf8Encoder.encode(y?u+"\0":u);let Q=(u,y)=>{(!(u.alloc instanceof Function)||!(u.dealloc instanceof Function))&&s("Object is missing alloc() and/or dealloc() function(s)","required by",y+"().")},V=function(u,y,A,L){if(Q(e,L),typeof u!="string")return null;{let O=i.utf8Encoder.encode(u),d=A(O.length+1),l=p().HEAP8U;return l.set(O,d),l[d+O.length]=0,y?[d,O.length]:d}};e.allocCString=(u,y=!1)=>V(u,y,e.alloc,"allocCString()"),e.scopedAllocPush=function(){Q(e,"scopedAllocPush");let u=[];return i.scopedAlloc.push(u),u},e.scopedAllocPop=function(u){Q(e,"scopedAllocPop");let y=arguments.length?i.scopedAlloc.indexOf(u):i.scopedAlloc.length-1;y<0&&s("Invalid state object for scopedAllocPop()."),arguments.length===0&&(u=i.scopedAlloc[y]),i.scopedAlloc.splice(y,1);for(let A;A=u.pop();)e.functionEntry(A)?e.uninstallFunction(A):e.dealloc(A)},e.scopedAlloc=function(u){i.scopedAlloc.length||s("No scopedAllocPush() scope is active.");let y=e.alloc(u);return i.scopedAlloc[i.scopedAlloc.length-1].push(y),y},Object.defineProperty(e.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>i.scopedAlloc.length,set:()=>s("The 'active' property is read-only.")}),e.scopedAllocCString=(u,y=!1)=>V(u,y,e.scopedAlloc,"scopedAllocCString()");let $=function(u,y){let A=e[u?"scopedAlloc":"alloc"]((y.length+1)*e.ptrSizeof),L=0;return y.forEach(O=>{e.pokePtr(A+e.ptrSizeof*L++,e[u?"scopedAllocCString":"allocCString"](""+O))}),e.pokePtr(A+e.ptrSizeof*L,0),A};e.scopedAllocMainArgv=u=>$(!0,u),e.allocMainArgv=u=>$(!1,u),e.cArgvToJs=(u,y)=>{let A=[];for(let L=0;L<u;++L){let O=e.peekPtr(y+e.ptrSizeof*L);A.push(O?e.cstrToJs(O):null)}return A},e.scopedAllocCall=function(u){e.scopedAllocPush();try{return u()}finally{e.scopedAllocPop()}};let h=function(u,y,A){Q(e,A);let L=y?"i64":o,O=e[A](u*(y?8:r));if(e.poke(O,0,L),u===1)return O;let d=[O];for(let l=1;l<u;++l)O+=y?8:r,d[l]=O,e.poke(O,0,L);return d};e.allocPtr=(u=1,y=!0)=>h(u,y,"alloc"),e.scopedAllocPtr=(u=1,y=!0)=>h(u,y,"scopedAlloc"),e.xGet=function(u){return e.exports[u]||s("Cannot find exported symbol:",u)};let f=(u,y)=>s(u+"() requires",y,"argument(s).");e.xCall=function(u,...y){let A=e.xGet(u);return A instanceof Function||s("Exported symbol",u,"is not a function."),A.length!==y.length&&f(u,A.length),arguments.length===2&&Array.isArray(arguments[1])?A.apply(null,arguments[1]):A.apply(null,y)},i.xWrap=Object.create(null),i.xWrap.convert=Object.create(null),i.xWrap.convert.arg=new Map,i.xWrap.convert.result=new Map;let _=i.xWrap.convert.arg,b=i.xWrap.convert.result;e.bigIntEnabled&&_.set("i64",u=>BigInt(u));let x=o==="i32"?u=>u|0:u=>BigInt(u)|BigInt(0);_.set("i32",x).set("i16",u=>(u|0)&65535).set("i8",u=>(u|0)&255).set("f32",u=>Number(u).valueOf()).set("float",_.get("f32")).set("f64",_.get("f32")).set("double",_.get("f64")).set("int",_.get("i32")).set("null",u=>u).set(null,_.get("null")).set("**",x).set("*",x),b.set("*",x).set("pointer",x).set("number",u=>Number(u)).set("void",u=>{}).set("null",u=>u).set(null,b.get("null"));{let u=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&u.push("i64");let y=_.get(o);for(let A of u)_.set(A+"*",y),b.set(A+"*",y),b.set(A,_.get(A)||s("Missing arg converter:",A))}let v=function(u){return typeof u=="string"?e.scopedAllocCString(u):u?x(u):null};_.set("string",v).set("utf8",v).set("pointer",v),b.set("string",u=>e.cstrToJs(u)).set("utf8",b.get("string")).set("string:dealloc",u=>{try{return u?e.cstrToJs(u):null}finally{e.dealloc(u)}}).set("utf8:dealloc",b.get("string:dealloc")).set("json",u=>JSON.parse(e.cstrToJs(u))).set("json:dealloc",u=>{try{return u?JSON.parse(e.cstrToJs(u)):null}finally{e.dealloc(u)}});let C=class{constructor(u){this.name=u.name||"unnamed adapter"}convertArg(u,y,A){s("AbstractArgAdapter must be subclassed.")}};_.FuncPtrAdapter=class Te extends C{constructor(y){super(y),_.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",y),this.name=y.name||"unnamed",this.signature=y.signature,y.contextKey instanceof Function&&(this.contextKey=y.contextKey,y.bindScope||(y.bindScope="context")),this.bindScope=y.bindScope||s("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Te.bindScopes.indexOf(y.bindScope)<0&&s("Invalid options.bindScope ("+y.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Te.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=y.callProxy instanceof Function?y.callProxy:void 0}contextKey(y,A){return this}contextMap(y){let A=this.__cmap||(this.__cmap=new Map),L=A.get(y);return L===void 0&&A.set(y,L=[]),L}convertArg(y,A,L){let O=this.singleton;if(!O&&this.isContext&&(O=this.contextMap(this.contextKey(A,L))),O&&O[0]===y)return O[1];if(y instanceof Function){this.callProxy&&(y=this.callProxy(y));let d=g(y,this.signature,this.isTransient);if(Te.debugFuncInstall&&Te.debugOut("FuncPtrAdapter installed",this,this.contextKey(A,L),"@"+d,y),O){if(O[1]){Te.debugFuncInstall&&Te.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(A,L),"@"+O[1],y);try{i.scopedAlloc[i.scopedAlloc.length-1].push(O[1])}catch{}}O[0]=y,O[1]=d}return d}else if(e.isPtr(y)||y===null||y===void 0){if(O&&O[1]&&O[1]!==y){Te.debugFuncInstall&&Te.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(A,L),"@"+O[1],y);try{i.scopedAlloc[i.scopedAlloc.length-1].push(O[1])}catch{}O[0]=O[1]=y|0}return y||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},_.FuncPtrAdapter.warnOnUse=!1,_.FuncPtrAdapter.debugFuncInstall=!1,_.FuncPtrAdapter.debugOut=console.debug.bind(console),_.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];let P=u=>_.get(u)||s("Argument adapter not found:",u),R=u=>b.get(u)||s("Result adapter not found:",u);i.xWrap.convertArg=(u,...y)=>P(u)(...y),i.xWrap.convertArgNoCheck=(u,...y)=>_.get(u)(...y),i.xWrap.convertResult=(u,y)=>u===null?y:u?R(u)(y):void 0,i.xWrap.convertResultNoCheck=(u,y)=>u===null?y:u?b.get(u)(y):void 0,e.xWrap=function(u,y,...A){arguments.length===3&&Array.isArray(arguments[2])&&(A=arguments[2]),e.isPtr(u)&&(u=e.functionEntry(u)||s("Function pointer not found in WASM function table."));let L=u instanceof Function,O=L?u:e.xGet(u);if(L&&(u=O.name||"unnamed function"),A.length!==O.length&&f(u,O.length),y===null&&O.length===0)return O;y!=null&&R(y);for(let l of A)l instanceof C?_.set(l,(...c)=>l.convertArg(...c)):P(l);let d=i.xWrap;return O.length===0?(...l)=>l.length?f(u,O.length):d.convertResult(y,O.call(null)):function(...l){l.length!==O.length&&f(u,O.length);let c=e.scopedAllocPush();try{for(let m in l)l[m]=d.convertArgNoCheck(A[m],l[m],l,m);return d.convertResultNoCheck(y,O.apply(null,l))}finally{e.scopedAllocPop(c)}}};let z=function(u,y,A,L,O,d){if(typeof A=="string"){if(y===1)return d.get(A);if(y===2){if(L)L instanceof Function||s(O,"requires a function argument.");else return delete d.get(A),u;return d.set(A,L),u}}s("Invalid arguments to",O)};return e.xWrap.resultAdapter=function u(y,A){return z(u,arguments.length,y,A,"resultAdapter()",b)},e.xWrap.argAdapter=function u(y,A){return z(u,arguments.length,y,A,"argAdapter()",_)},e.xWrap.FuncPtrAdapter=_.FuncPtrAdapter,e.xCallWrapped=function(u,y,A,...L){return Array.isArray(arguments[3])&&(L=arguments[3]),e.xWrap(u,y,A||[]).apply(null,L||[])},e.xWrap.testConvertArg=i.xWrap.convertArg,e.xWrap.testConvertResult=i.xWrap.convertResult,e},globalThis.WhWasmUtilInstaller.yawl=function(e){let s=()=>fetch(e.uri,{credentials:"same-origin"}),o=this,r=function(p){if(e.wasmUtilTarget){let g=(...j)=>{throw new Error(j.join(" "))},T=e.wasmUtilTarget;if(T.module=p.module,T.instance=p.instance,T.instance.exports.memory||(T.memory=e.imports&&e.imports.env&&e.imports.env.memory||g("Missing 'memory' object!")),!T.alloc&&p.instance.exports.malloc){let j=p.instance.exports;T.alloc=function(Q){return j.malloc(Q)||g("Allocation of",Q,"bytes failed.")},T.dealloc=function(Q){j.free(Q)}}o(T)}return e.onload&&e.onload(p,e),p};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(s(),e.imports||{}).then(r)}:function(){return s().then(g=>g.arrayBuffer()).then(g=>WebAssembly.instantiate(g,e.imports||{})).then(r)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function e(s){let o=(...I)=>{throw new Error(I.join(" "))};!(s.heap instanceof WebAssembly.Memory)&&!(s.heap instanceof Function)&&o("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(I){s[I]instanceof Function||o("Config option '"+I+"' must be a function.")});let r=e,i=s.heap instanceof Function?s.heap:()=>new Uint8Array(s.heap.buffer),p=s.alloc,g=s.dealloc,T=s.log||console.log.bind(console),j=s.memberPrefix||"",Q=s.memberSuffix||"",V=s.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!s.bigIntEnabled,$=globalThis.BigInt,h=globalThis.BigInt64Array,f=s.ptrSizeof||4,_=s.ptrIR||"i32";r.debugFlags||(r.__makeDebugFlags=function(I=null){I&&I.__flags&&(I=I.__flags);let U=function G(X){return arguments.length===0?G.__flags:(X<0?(delete G.__flags.getter,delete G.__flags.setter,delete G.__flags.alloc,delete G.__flags.dealloc):(G.__flags.getter=(1&X)!==0,G.__flags.setter=(2&X)!==0,G.__flags.alloc=(4&X)!==0,G.__flags.dealloc=(8&X)!==0),G._flags)};return Object.defineProperty(U,"__flags",{iterable:!1,writable:!1,value:Object.create(I)}),I||U(0),U},r.debugFlags=r.__makeDebugFlags());let b=function(){let I=new ArrayBuffer(2);return new DataView(I).setInt16(0,256,!0),new Int16Array(I)[0]===256}(),x=I=>I[1]==="(",v=I=>I==="p"||I==="P",C=I=>I==="P",P=I=>x(I)?"p":I[0],R=function(I){switch(P(I)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return _;case"j":return"i64";case"f":return"float";case"d":return"double"}o("Unhandled signature IR:",I)},z=h?()=>!0:()=>o("BigInt64Array is not available."),u=function(I){switch(P(I)){case"p":case"P":case"s":{switch(f){case 4:return"getInt32";case 8:return z()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return z()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}o("Unhandled DataView getter for signature:",I)},y=function(I){switch(P(I)){case"p":case"P":case"s":{switch(f){case 4:return"setInt32";case 8:return z()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return z()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}o("Unhandled DataView setter for signature:",I)},A=function(I){switch(P(I)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return z()&&$;case"p":case"P":case"s":switch(f){case 4:return Number;case 8:return z()&&$}break}o("Unhandled DataView set wrapper for signature:",I)},L=(I,U)=>I+"::"+U,O=function(I,U){return()=>o(L(I,U),"is read-only.")},d=new WeakMap,l="(pointer-is-external)",c=function(I,U,G){if(G||(G=d.get(U)),G){if(d.delete(U),Array.isArray(U.ondispose)){let X;for(;X=U.ondispose.shift();)try{X instanceof Function?X.call(U):X instanceof pe?X.dispose():typeof X=="number"&&g(X)}catch(fe){console.warn("ondispose() for",I.structName,"@",G,"threw. NOT propagating it.",fe)}}else if(U.ondispose instanceof Function)try{U.ondispose()}catch(X){console.warn("ondispose() for",I.structName,"@",G,"threw. NOT propagating it.",X)}delete U.ondispose,I.debugFlags.__flags.dealloc&&T("debug.dealloc:",U[l]?"EXTERNAL":"",I.structName,"instance:",I.structInfo.sizeof,"bytes @"+G),U[l]||g(G)}},m=I=>({configurable:!1,writable:!1,iterable:!1,value:I}),w=function(I,U,G){let X=!G;G?Object.defineProperty(U,l,m(G)):(G=p(I.structInfo.sizeof),G||o("Allocation of",I.structName,"structure failed."));try{I.debugFlags.__flags.alloc&&T("debug.alloc:",X?"":"EXTERNAL",I.structName,"instance:",I.structInfo.sizeof,"bytes @"+G),X&&i().fill(0,G,G+I.structInfo.sizeof),d.set(U,G)}catch(fe){throw c(I,U,G),fe}},B=function(){let I=this.pointer;return I?new Uint8Array(i().slice(I,I+this.structInfo.sizeof)):null},te=m(I=>j+I+Q),Y=function(I,U,G=!0){let X=I.members[U];if(!X&&(j||Q)){for(let fe of Object.values(I.members))if(fe.key===U){X=fe;break}!X&&G&&o(L(I.name,U),"is not a mapped struct member.")}return X},ne=function I(U,G,X=!1){I._||(I._=ge=>ge.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));let fe=Y(U.structInfo,G,!0);return X?I._(fe.signature):fe.signature},le={configurable:!1,enumerable:!1,get:function(){return d.get(this)},set:()=>o("Cannot assign the 'pointer' property of a struct.")},M=m(function(){let I=[];for(let U of Object.keys(this.structInfo.members))I.push(this.memberKey(U));return I}),E=new TextDecoder("utf-8"),F=new TextEncoder,q=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,S=function(I,U,G){return E.decode(I.buffer instanceof q?I.slice(U,G):I.subarray(U,G))},k=function(I,U,G=!1){let X=Y(I.structInfo,U,G);return X&&X.signature.length===1&&X.signature[0]==="s"?X:!1},D=function(I){I.signature!=="s"&&o("Invalid member type signature for C-string value:",JSON.stringify(I))},N=function(U,G){let X=Y(U.structInfo,G,!0);D(X);let fe=U[X.key];if(!fe)return null;let ge=fe,de=i();for(;de[ge]!==0;++ge);return fe===ge?"":S(de,fe,ge)},Z=function(I,...U){I.ondispose?Array.isArray(I.ondispose)||(I.ondispose=[I.ondispose]):I.ondispose=[],I.ondispose.push(...U)},ce=function(I){let U=F.encode(I),G=p(U.length+1);G||o("Allocation error while duplicating string:",I);let X=i();return X.set(U,G),X[G+U.length]=0,G},J=function(I,U,G){let X=Y(I.structInfo,U,!0);D(X);let fe=ce(G);return I[X.key]=fe,Z(I,fe),I},pe=function(U,G){arguments[2]!==m&&o("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:m(U),structInfo:m(G)})};pe.prototype=Object.create(null,{dispose:m(function(){c(this.constructor,this)}),lookupMember:m(function(I,U=!0){return Y(this.structInfo,I,U)}),memberToJsString:m(function(I){return N(this,I)}),memberIsString:m(function(I,U=!0){return k(this,I,U)}),memberKey:te,memberKeys:M,memberSignature:m(function(I,U=!1){return ne(this,I,U)}),memoryDump:m(B),pointer:le,setMemberCString:m(function(I,U){return J(this,I,U)})}),Object.assign(pe.prototype,{addOnDispose:function(...I){return Z(this,...I),this}}),Object.defineProperties(pe,{allocCString:m(ce),isA:m(I=>I instanceof pe),hasExternalPointer:m(I=>I instanceof pe&&!!I[l]),memberKey:te});let xe=I=>Number.isFinite(I)||I instanceof($||Number),ve=function I(U,G,X){if(!I._){I._={getters:{},setters:{},sw:{}};let Ee=["i","c","C","p","P","s","f","d","v()"];V&&Ee.push("j"),Ee.forEach(function(ke){I._.getters[ke]=u(ke),I._.setters[ke]=y(ke),I._.sw[ke]=A(ke)});let Wa=/^[ipPsjfdcC]$/,Qa=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;I.sigCheck=function(ke,Ha,Bt,ut){Object.prototype.hasOwnProperty.call(ke,Bt)&&o(ke.structName,"already has a property named",Bt+"."),Wa.test(ut)||Qa.test(ut)||o("Malformed signature for",L(ke.structName,Ha)+":",ut)}}let fe=U.memberKey(G);I.sigCheck(U.prototype,G,fe,X.signature),X.key=fe,X.name=G;let ge=P(X.signature),de=L(U.prototype.structName,fe),he=U.prototype.debugFlags.__flags,Be=Object.create(null);Be.configurable=!1,Be.enumerable=!1,Be.get=function(){he.getter&&T("debug.getter:",I._.getters[ge],"for",R(ge),de,"@",this.pointer,"+",X.offset,"sz",X.sizeof);let Ee=new DataView(i().buffer,this.pointer+X.offset,X.sizeof)[I._.getters[ge]](0,b);return he.getter&&T("debug.getter:",de,"result =",Ee),Ee},X.readOnly?Be.set=O(U.prototype.structName,fe):Be.set=function(Ee){if(he.setter&&T("debug.setter:",I._.setters[ge],"for",R(ge),de,"@",this.pointer,"+",X.offset,"sz",X.sizeof,Ee),this.pointer||o("Cannot set struct property on disposed instance."),Ee===null)Ee=0;else for(;!xe(Ee);){if(C(X.signature)&&Ee instanceof pe){Ee=Ee.pointer||0,he.setter&&T("debug.setter:",de,"resolved to",Ee);break}o("Invalid value for pointer-type",de+".")}new DataView(i().buffer,this.pointer+X.offset,X.sizeof)[I._.setters[ge]](0,I._.sw[ge](Ee),b)},Object.defineProperty(U.prototype,fe,Be)},qe=function I(U,G){arguments.length===1?(G=U,U=G.name):G.name||(G.name=U),U||o("Struct name is required.");let X=!1;Object.keys(G.members).forEach(de=>{let he=G.members[de];he.sizeof?he.sizeof===1?he.signature==="c"||he.signature==="C"||o("Unexpected sizeof==1 member",L(G.name,de),"with signature",he.signature):(he.sizeof%4!==0&&(console.warn("Invalid struct member description =",he,"from",G),o(U,"member",de,"sizeof is not aligned. sizeof="+he.sizeof)),he.offset%4!==0&&(console.warn("Invalid struct member description =",he,"from",G),o(U,"member",de,"offset is not aligned. offset="+he.offset))):o(U,"member",de,"is missing sizeof."),(!X||X.offset<he.offset)&&(X=he)}),X?G.sizeof<X.offset+X.sizeof&&o("Invalid struct config:",U,"max member offset ("+X.offset+") ","extends past end of struct (sizeof="+G.sizeof+")."):o("No member property descriptions found.");let fe=m(r.__makeDebugFlags(I.debugFlags)),ge=function de(he){this instanceof de?arguments.length?((he!==(he|0)||he<=0)&&o("Invalid pointer value for",U,"constructor."),w(de,this,he)):w(de,this):o("The",U,"constructor may only be called via 'new'.")};return Object.defineProperties(ge,{debugFlags:fe,isA:m(de=>de instanceof ge),memberKey:te,memberKeys:M,methodInfoForKey:m(function(de){}),structInfo:m(G),structName:m(U)}),ge.prototype=new pe(U,G,m),Object.defineProperties(ge.prototype,{debugFlags:fe,constructor:m(ge)}),Object.keys(G.members).forEach(de=>ve(ge,de,G.members[de])),ge};return qe.StructType=pe,qe.config=s,qe.allocCString=ce,qe.debugFlags||(qe.debugFlags=r.__makeDebugFlags(r.debugFlags)),qe},globalThis.sqlite3ApiBootstrap.initializers.push(function(e){"use strict";let s=(...h)=>{throw new Error(h.join(" "))},o=e.SQLite3Error.toss,r=e.capi,i=e.wasm,p=e.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(h,f)=>h[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:h=>h[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:h=>{let f;return(_,b,x,v)=>{try{let C=i.cArgvToJs(b,x);return f||(f=i.cArgvToJs(b,v)),h(C,f)|0}catch(C){return C.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(h,f)=>h[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:h=>h[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(h,f)=>h[0],callProxy:h=>(f,_,b,x,v,C)=>{try{return b=b&&i.cstrToJs(b),x=x&&i.cstrToJs(x),v=v&&i.cstrToJs(v),C=C&&i.cstrToJs(C),h(f,_,b,x,v,C)||0}catch(P){return P.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new i.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(h,f)=>h[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(h,f)=>h[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.exports.sqlite3_activate_see instanceof Function&&i.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"]),i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:h=>h[0],callProxy:h=>(f,_,b,x,v,C,P)=>{h(f,_,b,i.cstrToJs(x),i.cstrToJs(v),C,P)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:h=>h[0],callProxy:h=>(f,_,b,x,v)=>{h(f,_,i.cstrToJs(b),i.cstrToJs(x),v)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],i.bigIntEnabled&&i.exports.sqlite3changegroup_add){let h={signature:"i(ps)",callProxy:f=>(_,b)=>{try{return f(_,i.cstrToJs(b))|0}catch(x){return x.resultCode||r.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...h}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...h}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...h}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...h}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...h,contextKey:(f,_)=>f[0]}),"*"]])}i.bindingSignatures.wasm=[["sqlite3_wasm_db_reset","int","sqlite3*"],["sqlite3_wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3_wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3_wasm_posix_create_file","int","string","*","int"],["sqlite3_wasm_vfs_unlink","int","sqlite3_vfs*","string"]],e.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{let h=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",v=>h(p.flexibleString(v))),i.xWrap.argAdapter("string:static",function(v){return i.isPtr(v)?v:(v=""+v,this[v]||(this[v]=i.allocCString(v)))}.bind(Object.create(null)));let f=i.xWrap.argAdapter("*"),_=function(){};i.xWrap.argAdapter("sqlite3_filename",f)("sqlite3_context*",f)("sqlite3_value*",f)("void*",f)("sqlite3_changegroup*",f)("sqlite3_changeset_iter*",f)("sqlite3_session*",f)("sqlite3_stmt*",v=>f(v instanceof(e?.oo1?.Stmt||_)?v.pointer:v))("sqlite3*",v=>f(v instanceof(e?.oo1?.DB||_)?v.pointer:v))("sqlite3_index_info*",v=>f(v instanceof(r.sqlite3_index_info||_)?v.pointer:v))("sqlite3_module*",v=>f(v instanceof(r.sqlite3_module||_)?v.pointer:v))("sqlite3_vfs*",v=>typeof v=="string"?r.sqlite3_vfs_find(v)||e.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",v):f(v instanceof(r.sqlite3_vfs||_)?v.pointer:v));let b=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",b)("sqlite3_context*",b)("sqlite3_stmt*",b)("sqlite3_value*",b)("sqlite3_vfs*",b)("void*",b),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(let v of i.bindingSignatures)r[v[0]]=i.xWrap.apply(null,v);for(let v of i.bindingSignatures.wasm)i[v[0]]=i.xWrap.apply(null,v);let x=function(v){return()=>s(v+"() is unavailable due to lack","of BigInt support in this build.")};for(let v of i.bindingSignatures.int64)r[v[0]]=i.bigIntEnabled?i.xWrap.apply(null,v):x(v[0]);if(delete i.bindingSignatures,i.exports.sqlite3_wasm_db_error){let v=i.xWrap("sqlite3_wasm_db_error","int","sqlite3*","int","string");p.sqlite3_wasm_db_error=function(C,P,R){return P instanceof e.WasmAllocError?(P=r.SQLITE_NOMEM,R=0):P instanceof Error&&(R=R||""+P,P=P.resultCode||r.SQLITE_ERROR),C?v(C,P,R):P}}else p.sqlite3_wasm_db_error=function(v,C,P){return console.warn("sqlite3_wasm_db_error() is not exported.",arguments),C}}{let h=i.xCall("sqlite3_wasm_enum_json");h||s("Maintenance required: increase sqlite3_wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(h));let f=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&f.push("serialize","session","vtab");for(let x of f)for(let v of Object.entries(i.ctype[x]))r[v[0]]=v[1];i.functionEntry(r.SQLITE_WASM_DEALLOC)||s("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");let _=Object.create(null);for(let x of["resultCodes"])for(let v of Object.entries(i.ctype[x]))_[v[1]]=v[0];r.sqlite3_js_rc_str=x=>_[x];let b=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!p.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(let x of i.ctype.structs)b[x.name]||(r[x.name]=e.StructBinder(x));if(r.sqlite3_index_info){for(let x of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[x]=r[x],delete r[x];r.sqlite3_vtab_config=i.xWrap("sqlite3_wasm_vtab_config","int",["sqlite3*","int","int"])}}let g=(h,f,_)=>p.sqlite3_wasm_db_error(h,r.SQLITE_MISUSE,f+"() requires "+_+" argument"+(_===1?"":"s")+"."),T=h=>p.sqlite3_wasm_db_error(h,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),j=h=>i.xWrap.argAdapter("sqlite3*")(h),Q=h=>i.isPtr(h)?i.cstrToJs(h):h,V=function(h,f){h=j(h);let _=this.dbMap.get(h);if(f)!_&&f>0&&this.dbMap.set(h,_=Object.create(null));else return this.dbMap.delete(h),_;return _}.bind(Object.assign(Object.create(null),{dbMap:new Map}));V.addCollation=function(h,f){let _=V(h,1);_.collation||(_.collation=new Set),_.collation.add(Q(f).toLowerCase())},V._addUDF=function(h,f,_,b){f=Q(f).toLowerCase();let x=b.get(f);x||b.set(f,x=new Set),x.add(_<0?-1:_)},V.addFunction=function(h,f,_){let b=V(h,1);b.udf||(b.udf=new Map),this._addUDF(h,f,_,b.udf)},V.addWindowFunc=function(h,f,_){let b=V(h,1);b.wudf||(b.wudf=new Map),this._addUDF(h,f,_,b.wudf)},V.cleanup=function(h){h=j(h);let f=[h];for(let x of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){let v=i.exports[x];f.length=v.length;try{r[x](...f)}catch(C){console.warn("close-time call of",x+"(",f,") threw:",C)}}let _=V(h,0);if(!_)return;if(_.collation){for(let x of _.collation)try{r.sqlite3_create_collation_v2(h,x,r.SQLITE_UTF8,0,0,0)}catch{}delete _.collation}let b;for(b=0;b<2;++b){let x=b?_.wudf:_.udf;if(!x)continue;let v=b?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(let C of x){let P=C[0],R=C[1],z=[h,P,0,r.SQLITE_UTF8,0,0,0,0,0];b&&z.push(0);for(let u of R)try{z[2]=u,v.apply(null,z)}catch{}R.clear()}x.clear()}delete _.udf,delete _.wudf};{let h=i.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(f){if(arguments.length!==1)return g(f,"sqlite3_close_v2",1);if(f)try{V.cleanup(f)}catch{}return h(f)}}if(r.sqlite3session_table_filter){let h=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(f){if(arguments.length!==1)return g(pDb,"sqlite3session_delete",1);f&&r.sqlite3session_table_filter(f,0,0),h(f)}}{let h=(_,b)=>"argv["+b+"]:"+_[0]+":"+i.cstrToJs(_[1]).toLowerCase(),f=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:h}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:h})]);r.sqlite3_create_collation_v2=function(_,b,x,v,C,P){if(arguments.length!==6)return g(_,"sqlite3_create_collation_v2",6);if(!(x&15))x|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(x&15))return T(_);try{let R=f(_,b,x,v,C,P);return R===0&&C instanceof Function&&V.addCollation(_,b),R}catch(R){return p.sqlite3_wasm_db_error(_,R)}},r.sqlite3_create_collation=(_,b,x,v,C)=>arguments.length===5?r.sqlite3_create_collation_v2(_,b,x,v,C,0):g(_,"sqlite3_create_collation",5)}{let h=function(x,v){return x[0]+":"+(x[2]<0?-1:x[2])+":"+v+":"+i.cstrToJs(x[1]).toLowerCase()},f=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:h,callProxy:x=>(v,C,P)=>{try{x(v,...r.sqlite3_values_to_js(C,P))}catch(R){r.sqlite3_result_error_js(v,R)}}},xFinalAndValue:{signature:"v(p)",contextKey:h,callProxy:x=>v=>{try{r.sqlite3_result_js(v,x(v))}catch(C){r.sqlite3_result_error_js(v,C)}}},xFunc:{signature:"v(pip)",contextKey:h,callProxy:x=>(v,C,P)=>{try{r.sqlite3_result_js(v,x(v,...r.sqlite3_values_to_js(C,P)))}catch(R){r.sqlite3_result_error_js(v,R)}}},xDestroy:{signature:"v(p)",contextKey:h,callProxy:x=>v=>{try{x(v)}catch(C){console.error("UDF xDestroy method threw:",C)}}}}),_=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...f.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...f.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...f.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...f.xDestroy})]),b=i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...f.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...f.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...f.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...f.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...f.xDestroy})]);r.sqlite3_create_function_v2=function x(v,C,P,R,z,u,y,A,L){if(x.length!==arguments.length)return g(v,"sqlite3_create_function_v2",x.length);if(!(R&15))R|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(R&15))return T(v);try{let O=_(v,C,P,R,z,u,y,A,L);return O===0&&(u instanceof Function||y instanceof Function||A instanceof Function||L instanceof Function)&&V.addFunction(v,C,P),O}catch(O){return console.error("sqlite3_create_function_v2() setup threw:",O),p.sqlite3_wasm_db_error(v,O,"Creation of UDF threw: "+O)}},r.sqlite3_create_function=function x(v,C,P,R,z,u,y,A){return x.length===arguments.length?r.sqlite3_create_function_v2(v,C,P,R,z,u,y,A,0):g(v,"sqlite3_create_function",x.length)},r.sqlite3_create_window_function=function x(v,C,P,R,z,u,y,A,L,O){if(x.length!==arguments.length)return g(v,"sqlite3_create_window_function",x.length);if(!(R&15))R|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(R&15))return T(v);try{let d=b(v,C,P,R,z,u,y,A,L,O);return d===0&&(u instanceof Function||y instanceof Function||A instanceof Function||L instanceof Function||O instanceof Function)&&V.addWindowFunc(v,C,P),d}catch(d){return console.error("sqlite3_create_window_function() setup threw:",d),p.sqlite3_wasm_db_error(v,d,"Creation of UDF threw: "+d)}},r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{let h=(_,b)=>(typeof _=="string"?b=-1:p.isSQLableTypedArray(_)?(b=_.byteLength,_=p.typedArrayToString(_ instanceof ArrayBuffer?new Uint8Array(_):_)):Array.isArray(_)&&(_=_.join(""),b=-1),[_,b]),f={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function _(b,x,v,C,P,R){if(_.length!==arguments.length)return g(b,"sqlite3_prepare_v3",_.length);let[z,u]=h(x,v);switch(typeof z){case"string":return f.basic(b,z,u,C,P,null);case"number":return f.full(b,z,u,C,P,R);default:return p.sqlite3_wasm_db_error(b,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function _(b,x,v,C,P){return _.length===arguments.length?r.sqlite3_prepare_v3(b,x,v,0,C,P):g(b,"sqlite3_prepare_v2",_.length)}}{let h=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),f=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function _(b,x,v,C,P){if(_.length!==arguments.length)return g(r.sqlite3_db_handle(b),"sqlite3_bind_text",_.length);if(i.isPtr(v)||v===null)return h(b,x,v,C,P);v instanceof ArrayBuffer?v=new Uint8Array(v):Array.isArray(pMem)&&(v=pMem.join(""));let R,z;try{if(p.isSQLableTypedArray(v))R=i.allocFromTypedArray(v),z=v.byteLength;else if(typeof v=="string")[R,z]=i.allocCString(v);else return p.sqlite3_wasm_db_error(r.sqlite3_db_handle(b),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return h(b,x,R,z,r.SQLITE_WASM_DEALLOC)}catch(u){return i.dealloc(R),p.sqlite3_wasm_db_error(r.sqlite3_db_handle(b),u)}},r.sqlite3_bind_blob=function _(b,x,v,C,P){if(_.length!==arguments.length)return g(r.sqlite3_db_handle(b),"sqlite3_bind_blob",_.length);if(i.isPtr(v)||v===null)return f(b,x,v,C,P);v instanceof ArrayBuffer?v=new Uint8Array(v):Array.isArray(v)&&(v=v.join(""));let R,z;try{if(p.isBindableTypedArray(v))R=i.allocFromTypedArray(v),z=C>=0?C:v.byteLength;else if(typeof v=="string")[R,z]=i.allocCString(v);else return p.sqlite3_wasm_db_error(r.sqlite3_db_handle(b),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return f(b,x,R,z,r.SQLITE_WASM_DEALLOC)}catch(u){return i.dealloc(R),p.sqlite3_wasm_db_error(r.sqlite3_db_handle(b),u)}}}r.sqlite3_config=function(h,...f){if(arguments.length<2)return r.SQLITE_MISUSE;switch(h){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return i.exports.sqlite3_wasm_config_i(h,f[0]);case r.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3_wasm_config_ii(h,f[0],f[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3_wasm_config_j(h,f[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{let h=new Set;r.sqlite3_auto_extension=function(f){if(f instanceof Function)f=i.installFunction("i(ppp)",f);else if(arguments.length!==1||!i.isPtr(f))return r.SQLITE_MISUSE;let _=i.exports.sqlite3_auto_extension(f);return f!==arguments[0]&&(_===0?h.add(f):i.uninstallFunction(f)),_},r.sqlite3_cancel_auto_extension=function(f){return!f||arguments.length!==1||!i.isPtr(f)?0:i.exports.sqlite3_cancel_auto_extension(f)},r.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(let f of h)i.uninstallFunction(f);h.clear()}}let $=r.sqlite3_vfs_find("kvvfs");if($)if(p.isUIThread()){let h=new r.sqlite3_kvvfs_methods(i.exports.sqlite3_wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;let f=i.exports.sqlite3_wasm_kvvfsMakeKeyOnPstack,_=i.pstack,b=v=>i.peek(v)===115?sessionStorage:localStorage,x={xRead:(v,C,P,R)=>{let z=_.pointer,u=i.scopedAllocPush();try{let y=f(v,C);if(!y)return-3;let A=i.cstrToJs(y),L=b(v).getItem(A);if(!L)return-1;let O=L.length;if(R<=0)return O;if(R===1)return i.poke(P,0),O;let d=i.scopedAllocCString(L);return R>O+1&&(R=O+1),i.heap8u().copyWithin(P,d,d+R-1),i.poke(P+R-1,0),R-1}catch(y){return console.error("kvstorageRead()",y),-2}finally{_.restore(z),i.scopedAllocPop(u)}},xWrite:(v,C,P)=>{let R=_.pointer;try{let z=f(v,C);if(!z)return 1;let u=i.cstrToJs(z);return b(v).setItem(u,i.cstrToJs(P)),0}catch(z){return console.error("kvstorageWrite()",z),r.SQLITE_IOERR}finally{_.restore(R)}},xDelete:(v,C)=>{let P=_.pointer;try{let R=f(v,C);return R?(b(v).removeItem(i.cstrToJs(R)),0):1}catch(R){return console.error("kvstorageDelete()",R),r.SQLITE_IOERR}finally{_.restore(P)}}};for(let v of Object.keys(x))h[h.memberKey(v)]=i.installFunction(h.memberSignature(v),x[v])}else r.sqlite3_vfs_unregister($);i.xWrap.FuncPtrAdapter.warnOnUse=!0}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.version={libVersion:"3.43.2",libVersionNumber:3043002,sourceId:"2023-10-10 12:14:04 4310099cce5a487035fa535dd3002c59ac7f1d1bec68d7cf317fd3e769484790",downloadVersion:3430200}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){let s=(...d)=>{throw new Error(d.join(" "))},o=(...d)=>{throw new e.SQLite3Error(...d)},r=e.capi,i=e.wasm,p=e.util,g=new WeakMap,T=new WeakMap,j=(d,l,c)=>{let m=Object.getOwnPropertyDescriptor(d,l);return m?m.value:c},Q=function(d,l){return l&&(d instanceof f&&(d=d.pointer),o(l,"sqlite3 result code",l+":",d?r.sqlite3_errmsg(d):r.sqlite3_errstr(l))),arguments[0]},V=i.installFunction("i(ippp)",function(d,l,c,m){r.SQLITE_TRACE_STMT===d&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+l+":",i.cstrToJs(m))}.bind({counter:0})),$=Object.create(null),h=function d(...l){if(!d._name2vfs){d._name2vfs=Object.create(null);let M=typeof importScripts=="function"?E=>o("The VFS for",E,"is only available in the main window thread."):!1;d._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:M||(()=>"local")},d._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:M||(()=>"session")}}let c=d.normalizeArgs(...l),m=c.filename,w=c.vfs,B=c.flags;(typeof m!="string"&&typeof m!="number"||typeof B!="string"||w&&typeof w!="string"&&typeof w!="number")&&(e.config.error("Invalid DB ctor args",c,arguments),o("Invalid arguments for DB constructor."));let W=typeof m=="number"?i.cstrToJs(m):m,te=d._name2vfs[W];te&&(w=te.vfs,m=W=te.filename(W));let Y,ne=0;B.indexOf("c")>=0&&(ne|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),B.indexOf("w")>=0&&(ne|=r.SQLITE_OPEN_READWRITE),ne===0&&(ne|=r.SQLITE_OPEN_READONLY),ne|=r.SQLITE_OPEN_EXRESCODE;let le=i.pstack.pointer;try{let M=i.pstack.allocPtr(),E=r.sqlite3_open_v2(m,M,ne,w||0);Y=i.peekPtr(M),Q(Y,E),r.sqlite3_extended_result_codes(Y,1),B.indexOf("t")>=0&&r.sqlite3_trace_v2(Y,r.SQLITE_TRACE_STMT,V,Y)}catch(M){throw Y&&r.sqlite3_close_v2(Y),M}finally{i.pstack.restore(le)}this.filename=W,g.set(this,Y),T.set(this,Object.create(null));try{let M=r.sqlite3_js_db_vfs(Y);M||o("Internal error: cannot get VFS for new db handle.");let E=$[M];E instanceof Function?E(this,e):E&&Q(Y,r.sqlite3_exec(Y,E,0,0,0))}catch(M){throw this.close(),M}};h.setVfsPostOpenSql=function(d,l){$[d]=l},h.normalizeArgs=function(d=":memory:",l="c",c=null){let m={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(m,arguments[0]),m.flags===void 0&&(m.flags="c"),m.vfs===void 0&&(m.vfs=null),m.filename===void 0&&(m.filename=":memory:")):(m.filename=d,m.flags=l,m.vfs=c),m};let f=function(...d){h.apply(this,d)};f.dbCtorHelper=h;let _={null:1,number:2,string:3,boolean:4,blob:5};_.undefined==_.null,i.bigIntEnabled&&(_.bigint=_.number);let b=function(){_!==arguments[2]&&o(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],g.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},x=function(d){return d.pointer||o("DB has been closed."),d},v=function(d,l){return(l!==(l|0)||l<0||l>=d.columnCount)&&o("Column index",l,"is out of range."),d},C=function(d,l){let c=Object.create(null);switch(c.opt=Object.create(null),l.length){case 1:typeof l[0]=="string"||p.isSQLableTypedArray(l[0])||Array.isArray(l[0])?c.sql=l[0]:l[0]&&typeof l[0]=="object"&&(c.opt=l[0],c.sql=c.opt.sql);break;case 2:c.sql=l[0],c.opt=l[1];break;default:o("Invalid argument count for exec().")}c.sql=p.flexibleString(c.sql),typeof c.sql!="string"&&o("Missing SQL argument or unsupported SQL value type.");let m=c.opt;switch(m.returnValue){case"resultRows":m.resultRows||(m.resultRows=[]),c.returnVal=()=>m.resultRows;break;case"saveSql":m.saveSql||(m.saveSql=[]),c.returnVal=()=>m.saveSql;break;case void 0:case"this":c.returnVal=()=>d;break;default:o("Invalid returnValue value:",m.returnValue)}if(!m.callback&&!m.returnValue&&m.rowMode!==void 0&&(m.resultRows||(m.resultRows=[]),c.returnVal=()=>m.resultRows),m.callback||m.resultRows)switch(m.rowMode===void 0?"array":m.rowMode){case"object":c.cbArg=w=>w.get(Object.create(null));break;case"array":c.cbArg=w=>w.get([]);break;case"stmt":Array.isArray(m.resultRows)&&o("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),c.cbArg=w=>w;break;default:if(p.isInt32(m.rowMode)){c.cbArg=w=>w.get(m.rowMode);break}else if(typeof m.rowMode=="string"&&m.rowMode.length>1&&m.rowMode[0]==="$"){let w=m.rowMode.substr(1);c.cbArg=B=>{let W=B.get(Object.create(null))[w];return W===void 0?o(r.SQLITE_NOTFOUND,"exec(): unknown result column:",w):W};break}o("Invalid rowMode:",m.rowMode)}return c},P=(d,l,c,...m)=>{let w=d.prepare(l);try{let B=w.bind(c).step()?w.get(...m):void 0;return w.reset(),B}finally{w.finalize()}},R=(d,l,c,m)=>d.exec({sql:l,bind:c,rowMode:m,returnValue:"resultRows"});f.checkRc=(d,l)=>Q(d,l),f.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return x(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}let d=this.pointer;if(Object.keys(T.get(this)).forEach((l,c)=>{if(c&&c.pointer)try{c.finalize()}catch{}}),g.delete(this),T.delete(this),r.sqlite3_close_v2(d),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(d=!1,l=!1){let c=x(this).pointer;return d?l?r.sqlite3_total_changes64(c):r.sqlite3_total_changes(c):l?r.sqlite3_changes64(c):r.sqlite3_changes(c)},dbFilename:function(d="main"){return r.sqlite3_db_filename(x(this).pointer,d)},dbName:function(d=0){return r.sqlite3_db_name(x(this).pointer,d)},dbVfsName:function(d=0){let l,c=r.sqlite3_js_db_vfs(x(this).pointer,d);if(c){let m=new r.sqlite3_vfs(c);try{l=i.cstrToJs(m.$zName)}finally{m.dispose()}}return l},prepare:function(d){x(this);let l=i.pstack.pointer,c,m;try{c=i.pstack.alloc(8),f.checkRc(this,r.sqlite3_prepare_v2(this.pointer,d,-1,c,null)),m=i.peekPtr(c)}finally{i.pstack.restore(l)}m||o("Cannot prepare empty SQL.");let w=new b(this,m,_);return T.get(this)[m]=w,w},exec:function(){x(this);let d=C(this,arguments);if(!d.sql)return o("exec() requires an SQL string.");let l=d.opt,c=l.callback,m=Array.isArray(l.resultRows)?l.resultRows:void 0,w,B=l.bind,W=!!(d.cbArg||l.columnNames||m),te=i.scopedAllocPush(),Y=Array.isArray(l.saveSql)?l.saveSql:void 0;try{let ne=p.isSQLableTypedArray(d.sql),le=ne?d.sql.byteLength:i.jstrlen(d.sql),M=i.scopedAlloc(2*i.ptrSizeof+(le+1)),E=M+i.ptrSizeof,F=E+i.ptrSizeof,q=F+le;for(ne?i.heap8().set(d.sql,F):i.jstrcpy(d.sql,i.heap8(),F,le,!1),i.poke(F+le,0);F&&i.peek(F,"i8");){i.pokePtr([M,E],0),f.checkRc(this,r.sqlite3_prepare_v3(this.pointer,F,le,0,M,E));let S=i.peekPtr(M);if(F=i.peekPtr(E),le=q-F,!!S){if(Y&&Y.push(r.sqlite3_sql(S).trim()),w=new b(this,S,_),B&&w.parameterCount&&(w.bind(B),B=null),W&&w.columnCount){let k=Array.isArray(l.columnNames)?0:1;if(W=!1,d.cbArg||m){for(;w.step();w._lockedByExec=!1){k++===0&&w.getColumnNames(l.columnNames),w._lockedByExec=!0;let D=d.cbArg(w);if(m&&m.push(D),c&&c.call(l,D,w)===!1)break}w._lockedByExec=!1}k===0&&w.getColumnNames(l.columnNames)}else w.step();w.reset().finalize(),w=null}}}finally{i.scopedAllocPop(te),w&&(delete w._lockedByExec,w.finalize())}return d.returnVal()},createFunction:function(l,c,m){let w=D=>D instanceof Function;switch(arguments.length){case 1:m=l,l=m.name,c=m.xFunc||0;break;case 2:w(c)||(m=c,c=m.xFunc||0);break;case 3:break;default:break}m||(m={}),typeof l!="string"&&o("Invalid arguments: missing function name.");let B=m.xStep||0,W=m.xFinal||0,te=m.xValue||0,Y=m.xInverse||0,ne;w(c)?(ne=!1,(w(B)||w(W))&&o("Ambiguous arguments: scalar or aggregate?"),B=W=null):w(B)?(w(W)||o("Missing xFinal() callback for aggregate or window UDF."),c=null):w(W)?o("Missing xStep() callback for aggregate or window UDF."):o("Missing function-type properties."),ne===!1?(w(te)||w(Y))&&o("xValue and xInverse are not permitted for non-window UDFs."):w(te)?(w(Y)||o("xInverse must be provided if xValue is."),ne=!0):w(Y)&&o("xValue must be provided if xInverse is.");let le=m.pApp;le!=null&&(typeof le!="number"||!p.isInt32(le))&&o("Invalid value for pApp property. Must be a legal WASM pointer value.");let M=m.xDestroy||0;M&&!w(M)&&o("xDestroy property must be a function.");let E=0;j(m,"deterministic")&&(E|=r.SQLITE_DETERMINISTIC),j(m,"directOnly")&&(E|=r.SQLITE_DIRECTONLY),j(m,"innocuous")&&(E|=r.SQLITE_INNOCUOUS),l=l.toLowerCase();let F=c||B,q=j(m,"arity"),S=typeof q=="number"?q:F.length?F.length-1:0,k;return ne?k=r.sqlite3_create_window_function(this.pointer,l,S,r.SQLITE_UTF8|E,le||0,B,W,te,Y,M):k=r.sqlite3_create_function_v2(this.pointer,l,S,r.SQLITE_UTF8|E,le||0,c,B,W,M),f.checkRc(this,k),this},selectValue:function(d,l,c){return P(this,d,l,0,c)},selectValues:function(d,l,c){let m=this.prepare(d),w=[];try{for(m.bind(l);m.step();)w.push(m.get(0,c));m.reset()}finally{m.finalize()}return w},selectArray:function(d,l){return P(this,d,l,[])},selectObject:function(d,l){return P(this,d,l,{})},selectArrays:function(d,l){return R(this,d,l,"array")},selectObjects:function(d,l){return R(this,d,l,"object")},openStatementCount:function(){return this.pointer?Object.keys(T.get(this)).length:0},transaction:function(d){let l="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&o(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),l+=" "+arguments[0],d=arguments[1]),x(this).exec(l);try{let c=d(this);return this.exec("COMMIT"),c}catch(c){throw this.exec("ROLLBACK"),c}},savepoint:function(d){x(this).exec("SAVEPOINT oo1");try{let l=d(this);return this.exec("RELEASE oo1"),l}catch(l){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),l}},checkRc:function(d){return Q(this,d)}};let z=function(d){return d.pointer||o("Stmt has been closed."),d},u=function(d){let l=_[d==null?"null":typeof d];switch(l){case _.boolean:case _.null:case _.number:case _.string:return l;case _.bigint:if(i.bigIntEnabled)return l;default:return p.isBindableTypedArray(d)?_.blob:void 0}},y=function(d){return u(d)||o("Unsupported bind() argument type:",typeof d)},A=function(d,l){let c=typeof l=="number"?l:r.sqlite3_bind_parameter_index(d.pointer,l);return c===0||!p.isInt32(c)?o("Invalid bind() parameter name: "+l):(c<1||c>d.parameterCount)&&o("Bind index",l,"is out of range."),c},L=function(d,l){return d._lockedByExec&&o("Operation is illegal when statement is locked:",l),d},O=function d(l,c,m,w){L(z(l),"bind()"),d._||(d._tooBigInt=W=>o("BigInt value is too big to store without precision loss:",W),d._={string:function(W,te,Y,ne){let[le,M]=i.allocCString(Y,!0);return(ne?r.sqlite3_bind_blob:r.sqlite3_bind_text)(W.pointer,te,le,M,r.SQLITE_WASM_DEALLOC)}}),y(w),c=A(l,c);let B=0;switch(w==null?_.null:m){case _.null:B=r.sqlite3_bind_null(l.pointer,c);break;case _.string:B=d._.string(l,c,w,!1);break;case _.number:{let W;p.isInt32(w)?W=r.sqlite3_bind_int:typeof w=="bigint"?p.bigIntFits64(w)?i.bigIntEnabled?W=r.sqlite3_bind_int64:p.bigIntFitsDouble(w)?(w=Number(w),W=r.sqlite3_bind_double):d._tooBigInt(w):d._tooBigInt(w):(w=Number(w),i.bigIntEnabled&&Number.isInteger(w)?W=r.sqlite3_bind_int64:W=r.sqlite3_bind_double),B=W(l.pointer,c,w);break}case _.boolean:B=r.sqlite3_bind_int(l.pointer,c,w?1:0);break;case _.blob:{if(typeof w=="string"){B=d._.string(l,c,w,!0);break}else w instanceof ArrayBuffer?w=new Uint8Array(w):p.isBindableTypedArray(w)||o("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");let W=i.alloc(w.byteLength||1);i.heap8().set(w.byteLength?w:[0],W),B=r.sqlite3_bind_blob(l.pointer,c,W,w.byteLength,r.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",w),o("Unsupported bind() argument type: "+typeof w)}return B&&f.checkRc(l.db.pointer,B),l._mayGet=!1,l};b.prototype={finalize:function(){if(this.pointer){L(this,"finalize()");let d=r.sqlite3_finalize(this.pointer);return delete T.get(this.db)[this.pointer],g.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,d}},clearBindings:function(){return L(z(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(d){L(this,"reset()"),d&&this.clearBindings();let l=r.sqlite3_reset(z(this).pointer);return this._mayGet=!1,Q(this.db,l),this},bind:function(){z(this);let d,l;switch(arguments.length){case 1:d=1,l=arguments[0];break;case 2:d=arguments[0],l=arguments[1];break;default:o("Invalid bind() arguments.")}return l===void 0?this:(this.parameterCount||o("This statement has no bindable parameters."),this._mayGet=!1,l===null?O(this,d,_.null,l):Array.isArray(l)?(arguments.length!==1&&o("When binding an array, an index argument is not permitted."),l.forEach((c,m)=>O(this,m+1,y(c),c)),this):(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),typeof l=="object"&&!p.isBindableTypedArray(l)?(arguments.length!==1&&o("When binding an object, an index argument is not permitted."),Object.keys(l).forEach(c=>O(this,c,y(l[c]),l[c])),this):O(this,d,y(l),l)))},bindAsBlob:function(d,l){z(this),arguments.length===1&&(l=d,d=1);let c=y(l);return _.string!==c&&_.blob!==c&&_.null!==c&&o("Invalid value type for bindAsBlob()"),O(this,d,_.blob,l)},step:function(){L(this,"step()");let d=r.sqlite3_step(z(this).pointer);switch(d){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,e.config.warn("sqlite3_step() rc=",d,r.sqlite3_js_rc_str(d),"SQL =",r.sqlite3_sql(this.pointer)),f.checkRc(this.db.pointer,d)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{let d=this.step();return this.reset(),d}finally{try{this.finalize()}catch{}}},get:function(d,l){if(z(this)._mayGet||o("Stmt.step() has not (recently) returned true."),Array.isArray(d)){let c=0,m=this.columnCount;for(;c<m;)d[c]=this.get(c++);return d}else if(d&&typeof d=="object"){let c=0,m=this.columnCount;for(;c<m;)d[r.sqlite3_column_name(this.pointer,c)]=this.get(c++);return d}switch(v(this,d),l===void 0?r.sqlite3_column_type(this.pointer,d):l){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(i.bigIntEnabled){let c=r.sqlite3_column_int64(this.pointer,d);return c>=Number.MIN_SAFE_INTEGER&&c<=Number.MAX_SAFE_INTEGER?Number(c).valueOf():c}else{let c=r.sqlite3_column_double(this.pointer,d);return(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&o("Integer is out of range for JS integer range: "+c),p.isInt32(c)?c|0:c}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,d);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,d);case r.SQLITE_BLOB:{let c=r.sqlite3_column_bytes(this.pointer,d),m=r.sqlite3_column_blob(this.pointer,d),w=new Uint8Array(c);return c&&w.set(i.heap8u().slice(m,m+c),0),c&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(w.buffer),w}default:o("Don't know how to translate","type of result column #"+d+".")}o("Not reached.")},getInt:function(d){return this.get(d,r.SQLITE_INTEGER)},getFloat:function(d){return this.get(d,r.SQLITE_FLOAT)},getString:function(d){return this.get(d,r.SQLITE_TEXT)},getBlob:function(d){return this.get(d,r.SQLITE_BLOB)},getJSON:function(d){let l=this.get(d,r.SQLITE_STRING);return l===null?l:JSON.parse(l)},getColumnName:function(d){return r.sqlite3_column_name(v(z(this),d).pointer,d)},getColumnNames:function(d=[]){v(z(this),0);let l=this.columnCount;for(let c=0;c<l;++c)d.push(r.sqlite3_column_name(this.pointer,c));return d},getParamIndex:function(d){return z(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,d):void 0}};{let d={enumerable:!0,get:function(){return g.get(this)},set:()=>o("The pointer property is read-only.")};Object.defineProperty(b.prototype,"pointer",d),Object.defineProperty(f.prototype,"pointer",d)}if(Object.defineProperty(b.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>o("The columnCount property is read-only.")}),e.oo1={DB:f,Stmt:b},p.isUIThread()){e.oo1.JsStorageDb=function(l="session"){l!=="session"&&l!=="local"&&o("JsStorageDb db name must be one of 'session' or 'local'."),h.call(this,{filename:l,flags:"c",vfs:"kvvfs"})};let d=e.oo1.JsStorageDb;d.prototype=Object.create(f.prototype),d.clearStorage=r.sqlite3_js_kvvfs_clear,d.prototype.clearStorage=function(){return d.clearStorage(x(this).filename)},d.storageSize=r.sqlite3_js_kvvfs_size,d.prototype.storageSize=function(){return d.storageSize(x(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.initWorker1API=function(){"use strict";let s=(...f)=>{throw new Error(f.join(" "))};globalThis.WorkerGlobalScope instanceof Function||s("initWorker1API() must be run from a Worker thread.");let o=this.self,r=this.sqlite3||s("Missing this.sqlite3 object."),i=r.oo1.DB,p=function(f){let _=g.idMap.get(f);return _||(_="db#"+ ++g.idSeq+"@"+f.pointer,g.idMap.set(f,_),_)},g={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(f){let _=new i(f);return this.dbs[p(_)]=_,this.dbList.indexOf(_)<0&&this.dbList.push(_),_},close:function(f,_){if(f){delete this.dbs[p(f)];let b=f.filename,x=r.wasm.sqlite3_wasm_db_vfs(f.pointer,0);f.close();let v=this.dbList.indexOf(f);v>=0&&this.dbList.splice(v,1),_&&b&&x&&r.wasm.sqlite3_wasm_vfs_unlink(x,b)}},post:function(f,_){_&&_.length?(globalThis.postMessage(f,Array.from(_)),_.length=0):globalThis.postMessage(f)},dbs:Object.create(null),getDb:function(f,_=!0){return this.dbs[f]||(_?s("Unknown (or closed) DB ID:",f):void 0)}},T=function(f=g.dbList[0]){return f&&f.pointer?f:s("DB is not opened.")},j=function(f,_=!0){let b=g.getDb(f.dbId,!1)||g.dbList[0];return _?T(b):b},Q=function(){return g.dbList[0]&&p(g.dbList[0])},V=function(f){let _=/^file:.+(vfs=(\w+))/.exec(f);return r.capi.sqlite3_vfs_find(_?_[2]:0)},$=f=>f===""||f[0]===":",h={open:function(f){let _=Object.create(null),b=f.args||Object.create(null);b.simulateError&&s("Throwing because of simulateError flag.");let x=Object.create(null),v,C;if(_.vfs=b.vfs,$(b.filename)?_.filename=b.filename||"":(_.filename=b.filename,v=b.byteArray,v&&(C=V(b.filename))),C){let R;try{R=r.wasm.allocFromTypedArray(v);let z=r.wasm.sqlite3_wasm_vfs_create_file(C,_.filename,R,v.byteLength);z&&r.SQLite3Error.toss(z)}catch(z){throw new r.SQLite3Error(z.name+" creating "+b.filename+": "+z.message,{cause:z})}finally{R&&r.wasm.dealloc(R)}}let P=g.open(_);return x.filename=P.filename,x.persistent=!!r.capi.sqlite3_js_db_uses_vfs(P.pointer,"opfs"),x.dbId=p(P),x.vfs=P.dbVfsName(),x},close:function(f){let _=j(f,!1),b={filename:_&&_.filename};if(_){let x=f.args&&typeof f.args=="object"?!!f.args.unlink:!1;g.close(_,x)}return b},exec:function(f){let _=typeof f.args=="string"?{sql:f.args}:f.args||Object.create(null);_.rowMode==="stmt"?s("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):_.sql||s("'exec' requires input SQL.");let b=j(f);(_.callback||Array.isArray(_.resultRows))&&(b._blobXfer=g.xfer);let x=_.callback,v=0,C=!!_.columnNames;typeof x=="string"&&(C||(_.columnNames=[]),_.callback=function(P,R){g.post({type:x,columnNames:_.columnNames,rowNumber:++v,row:P},g.xfer)});try{let P=_.countChanges?b.changes(!0,_.countChanges===64):void 0;b.exec(_),P!==void 0&&(_.changeCount=b.changes(!0,_.countChanges===64)-P),_.callback instanceof Function&&(_.callback=x,g.post({type:x,columnNames:_.columnNames,rowNumber:null,row:void 0}))}finally{delete b._blobXfer,_.callback&&(_.callback=x)}return _},"config-get":function(){let f=Object.create(null),_=r.config;return["bigIntEnabled"].forEach(function(b){Object.getOwnPropertyDescriptor(_,b)&&(f[b]=_[b])}),f.version=r.version,f.vfsList=r.capi.sqlite3_js_vfs_list(),f.opfsEnabled=!!r.opfs,f},export:function(f){let _=j(f),b={byteArray:r.capi.sqlite3_js_db_export(_.pointer),filename:_.filename,mimetype:"application/x-sqlite3"};return g.xfer.push(b.byteArray.buffer),b},toss:function(f){s("Testing worker exception")},"opfs-tree":async function(f){return r.opfs||s("OPFS support is unavailable."),await r.opfs.treeList()}};globalThis.onmessage=async function(f){f=f.data;let _,b=f.dbId,x=f.type,v=performance.now();try{h.hasOwnProperty(x)&&h[x]instanceof Function?_=await h[x](f):s("Unknown db worker message type:",f.type)}catch(C){x="error",_={operation:f.type,message:C.message,errorClass:C.name,input:f},C.stack&&(_.stack=typeof C.stack=="string"?C.stack.split(/\n\s*/):C.stack)}b||(b=_.dbId||Q()),g.post({type:x,dbId:b,messageId:f.messageId,workerReceivedTime:v,workerRespondTime:performance.now(),departureTime:f.departureTime,result:_},g.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({self,sqlite3:e})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){let s=e.wasm,o=e.capi,r=e.util.toss3,i=Object.create(null),p=Object.create(null),g=e.StructBinder;e.vfs=i,e.vtab=p;let T=o.sqlite3_index_info;T.prototype.nthConstraint=function(h,f=!1){if(h<0||h>=this.$nConstraint)return!1;let _=this.$aConstraint+T.sqlite3_index_constraint.structInfo.sizeof*h;return f?_:new T.sqlite3_index_constraint(_)},T.prototype.nthConstraintUsage=function(h,f=!1){if(h<0||h>=this.$nConstraint)return!1;let _=this.$aConstraintUsage+T.sqlite3_index_constraint_usage.structInfo.sizeof*h;return f?_:new T.sqlite3_index_constraint_usage(_)},T.prototype.nthOrderBy=function(h,f=!1){if(h<0||h>=this.$nOrderBy)return!1;let _=this.$aOrderBy+T.sqlite3_index_orderby.structInfo.sizeof*h;return f?_:new T.sqlite3_index_orderby(_)};let j=function h(f,_,b,x=h.installMethodArgcCheck){if(f instanceof g.StructType?!(b instanceof Function)&&!s.isPtr(b)&&r("Usage errror: expecting a Function or WASM pointer to one."):r("Usage error: target object is-not-a StructType."),arguments.length===1)return(R,z)=>h(f,R,z,x);h.argcProxy||(h.argcProxy=function(R,z,u,y){return function(...A){return u.length!==arguments.length&&r("Argument mismatch for",R.structInfo.name+"::"+z+": Native signature is:",y),u.apply(this,A)}},h.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((R,z)=>{if(typeof R=="number")try{s.uninstallFunction(R)}catch{}}),delete this.ondispose.__removeFuncList)});let v=f.memberSignature(_);v.length<2&&r("Member",_,"does not have a function pointer signature:",v);let C=f.memberKey(_),P=x&&!s.isPtr(b)?h.argcProxy(f,C,b,v):b;if(s.isPtr(P))P&&!s.functionEntry(P)&&r("Pointer",P,"is not a WASM function table entry."),f[C]=P;else{let R=s.installFunction(P,f.memberSignature(_,!0));f[C]=R,(!f.ondispose||!f.ondispose.__removeFuncList)&&(f.addOnDispose("ondispose.__removeFuncList handler",h.removeFuncList),f.ondispose.__removeFuncList=[]),f.ondispose.__removeFuncList.push(C,R)}return(R,z)=>h(f,R,z,x)};j.installMethodArgcCheck=!1;let Q=function(h,f,_=j.installMethodArgcCheck){let b=new Map;for(let x of Object.keys(f)){let v=f[x],C=b.get(v);if(C){let P=h.memberKey(x);h[P]=h[h.memberKey(C)]}else j(h,x,v,_),b.set(v,x)}return h};g.StructType.prototype.installMethod=function(f,_,b=j.installMethodArgcCheck){return arguments.length<3&&f&&typeof f=="object"?Q(this,...arguments):j(this,...arguments)},g.StructType.prototype.installMethods=function(h,f=j.installMethodArgcCheck){return Q(this,h,f)},o.sqlite3_vfs.prototype.registerVfs=function(h=!1){this instanceof e.capi.sqlite3_vfs||r("Expecting a sqlite3_vfs-type argument.");let f=o.sqlite3_vfs_register(this,h?1:0);return f&&r("sqlite3_vfs_register(",this,") failed with rc",f),this.pointer!==o.sqlite3_vfs_find(this.$zName)&&r("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},i.installVfs=function(h){let f=0,_=["io","vfs"];for(let b of _){let x=h[b];x&&(++f,Q(x.struct,x.methods,!!x.applyArgcCheck),b==="vfs"&&(!x.struct.$zName&&typeof x.name=="string"&&x.struct.addOnDispose(x.struct.$zName=s.allocCString(x.name)),x.struct.registerVfs(!!x.asDefault)))}return f||r("Misuse: installVfs() options object requires at least","one of:",_),this};let V=function(h,f){return function(_,b=!1){if(arguments.length===0&&(_=new f),_ instanceof f)return this.set(_.pointer,_),_;s.isPtr(_)||e.SQLite3Error.toss("Invalid argument to",h+"()");let x=this.get(_);return b&&this.delete(_),x}.bind(new Map)},$=function(h,f){let _=V(h,f);return Object.assign(Object.create(null),{StructType:f,create:b=>{let x=_();return s.pokePtr(b,x.pointer),x},get:b=>_(b),unget:b=>_(b,!0),dispose:b=>{let x=_(b,!0);x&&x.dispose()}})};p.xVtab=$("xVtab",o.sqlite3_vtab),p.xCursor=$("xCursor",o.sqlite3_vtab_cursor),p.xIndexInfo=h=>new o.sqlite3_index_info(h),p.xError=function h(f,_,b){if(h.errorReporter instanceof Function)try{h.errorReporter("sqlite3_module::"+f+"(): "+_.message)}catch{}let x;return _ instanceof e.WasmAllocError?x=o.SQLITE_NOMEM:arguments.length>2?x=b:_ instanceof e.SQLite3Error&&(x=_.resultCode),x||o.SQLITE_ERROR},p.xError.errorReporter=console.error.bind(console),p.xRowid=(h,f)=>s.poke(h,f,"i64"),p.setupModule=function(h){let f=!1,_=this instanceof o.sqlite3_module?this:h.struct||(f=new o.sqlite3_module);try{let b=h.methods||r("Missing 'methods' object.");for(let x of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){let v=x[0],C=x[1];b[v]===!0?b[v]=b[C]:b[C]===!0&&(b[C]=b[v])}if(h.catchExceptions){let x=function(P,R){return["xConnect","xCreate"].indexOf(P)>=0?function(z,u,y,A,L,O){try{return R(...arguments)||0}catch(d){return d instanceof e.WasmAllocError||(s.dealloc(s.peekPtr(O)),s.pokePtr(O,s.allocCString(d.message))),p.xError(P,d)}}:function(...z){try{return R(...z)||0}catch(u){return p.xError(P,u)}}},v=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],C=Object.create(null);for(let P of v){let R=b[P];if(R instanceof Function)P==="xConnect"&&b.xCreate===R?C[P]=b.xCreate:P==="xCreate"&&b.xConnect===R?C[P]=b.xConnect:C[P]=x(P,R);else continue}Q(_,C,!1)}else Q(_,b,!!h.applyArgcCheck);if(_.$iVersion===0){let x;typeof h.iVersion=="number"?x=h.iVersion:_.$xShadowName?x=3:_.$xSavePoint||_.$xRelease||_.$xRollbackTo?x=2:x=1,_.$iVersion=x}}catch(b){throw f&&f.dispose(),b}return _},o.sqlite3_module.prototype.setupModule=function(h){return p.setupModule.call(this,h)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){let s=function o(r){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!r||typeof r!="object")&&(r=Object.create(null));let i=new URL(globalThis.location.href).searchParams;return i.has("opfs-disable")?Promise.resolve(e):(r.verbose===void 0&&(r.verbose=i.has("opfs-verbose")?+i.get("opfs-verbose")||2:1),r.sanityChecks===void 0&&(r.sanityChecks=i.has("opfs-sanity-check")),r.proxyUri===void 0&&(r.proxyUri=o.defaultProxyUri),typeof r.proxyUri=="function"&&(r.proxyUri=r.proxyUri()),new Promise(function(g,T){let j=[e.config.error,e.config.warn,e.config.log],Q=(q,...S)=>{r.verbose>q&&j[q]("OPFS syncer:",...S)},V=(...q)=>Q(2,...q),$=(...q)=>Q(1,...q),h=(...q)=>Q(0,...q),f=e.util.toss,_=e.capi,b=e.wasm,x=_.sqlite3_vfs,v=_.sqlite3_file,C=_.sqlite3_io_methods,P=Object.create(null),R=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;P.metrics={dump:function(){let q,S=0,k=0,D=0;for(q in c.opIds){let N=m[q];S+=N.count,k+=N.time,D+=N.wait,N.avgTime=N.count&&N.time?N.time/N.count:0,N.avgWait=N.count&&N.wait?N.wait/N.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",m,`
Total of`,S,"op(s) for",k,"ms (incl. "+D+" ms of waiting on the async side)"),e.config.log("Serialization metrics:",m.s11n),O.postMessage({type:"opfs-async-metrics"})},reset:function(){let q,S=D=>D.count=D.time=D.wait=0;for(q in c.opIds)S(m[q]=Object.create(null));let k=m.s11n=Object.create(null);k=k.serialize=Object.create(null),k.count=k.time=0,k=m.s11n.deserialize=Object.create(null),k.count=k.time=0}};let z=new C,u=new x().addOnDispose(()=>z.dispose()),y,A=q=>(y=!0,u.dispose(),T(q)),L=()=>(y=!1,g(e)),O=new Worker(new URL("sqlite3-opfs-async-proxy.js",import.meta.url));setTimeout(()=>{y===void 0&&A(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),O._originalOnError=O.onerror,O.onerror=function(q){h("Error initializing OPFS asyncer:",q),A(new Error("Loading OPFS async Worker failed for unknown reasons."))};let d=_.sqlite3_vfs_find(null),l=d?new x(d):null;z.$iVersion=1,u.$iVersion=2,u.$szOsFile=_.sqlite3_file.structInfo.sizeof,u.$mxPathname=1024,u.$zName=b.allocCString("opfs"),u.$xDlOpen=u.$xDlError=u.$xDlSym=u.$xDlClose=null,u.addOnDispose("$zName",u.$zName,"cleanup default VFS wrapper",()=>l?l.dispose():null);let c=Object.create(null);c.verbose=r.verbose,c.littleEndian=(()=>{let q=new ArrayBuffer(2);return new DataView(q).setInt16(0,256,!0),new Int16Array(q)[0]===256})(),c.asyncIdleWaitTime=150,c.asyncS11nExceptions=1,c.fileBufferSize=1024*64,c.sabS11nOffset=c.fileBufferSize,c.sabS11nSize=u.$mxPathname*2,c.sabIO=new SharedArrayBuffer(c.fileBufferSize+c.sabS11nSize),c.opIds=Object.create(null);let m=Object.create(null);{let q=0;c.opIds.whichOp=q++,c.opIds.rc=q++,c.opIds.xAccess=q++,c.opIds.xClose=q++,c.opIds.xDelete=q++,c.opIds.xDeleteNoWait=q++,c.opIds.xFileSize=q++,c.opIds.xLock=q++,c.opIds.xOpen=q++,c.opIds.xRead=q++,c.opIds.xSleep=q++,c.opIds.xSync=q++,c.opIds.xTruncate=q++,c.opIds.xUnlock=q++,c.opIds.xWrite=q++,c.opIds.mkdir=q++,c.opIds["opfs-async-metrics"]=q++,c.opIds["opfs-async-shutdown"]=q++,c.opIds.retry=q++,c.sabOP=new SharedArrayBuffer(q*4),P.metrics.reset()}c.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(q=>{(c.sq3Codes[q]=_[q])===void 0&&f("Maintenance required: not found:",q)}),c.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,defaultUnlockAsap:!1});let w=(q,...S)=>{let k=c.opIds[q]||f("Invalid op ID:",q);c.s11n.serialize(...S),Atomics.store(c.sabOPView,c.opIds.rc,-1),Atomics.store(c.sabOPView,c.opIds.whichOp,k),Atomics.notify(c.sabOPView,c.opIds.whichOp);let D=performance.now();Atomics.wait(c.sabOPView,c.opIds.rc,-1);let N=Atomics.load(c.sabOPView,c.opIds.rc);if(m[q].wait+=performance.now()-D,N&&c.asyncS11nExceptions){let Z=c.s11n.deserialize();Z&&h(q+"() async error:",...Z)}return N};P.debug={asyncShutdown:()=>{$("Shutting down OPFS async listener. The OPFS VFS will no longer work."),w("opfs-async-shutdown")},asyncRestart:()=>{$("Attempting to restart OPFS VFS async listener. Might work, might not."),O.postMessage({type:"opfs-async-restart"})}};let B=()=>{if(c.s11n)return c.s11n;let q=new TextDecoder,S=new TextEncoder("utf-8"),k=new Uint8Array(c.sabIO,c.sabS11nOffset,c.sabS11nSize),D=new DataView(c.sabIO,c.sabS11nOffset,c.sabS11nSize);c.s11n=Object.create(null);let N=Object.create(null);N.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},N.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},N.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},N.string={id:4};let Z=J=>N[typeof J]||f("Maintenance required: this value type cannot be serialized.",J),ce=J=>{switch(J){case N.number.id:return N.number;case N.bigint.id:return N.bigint;case N.boolean.id:return N.boolean;case N.string.id:return N.string;default:f("Invalid type ID:",J)}};return c.s11n.deserialize=function(J=!1){++m.s11n.deserialize.count;let pe=performance.now(),xe=k[0],ve=xe?[]:null;if(xe){let qe=[],I=1,U,G,X;for(U=0;U<xe;++U,++I)qe.push(ce(k[I]));for(U=0;U<xe;++U){let fe=qe[U];fe.getter?(X=D[fe.getter](I,c.littleEndian),I+=fe.size):(G=D.getInt32(I,c.littleEndian),I+=4,X=q.decode(k.slice(I,I+G)),I+=G),ve.push(X)}}return J&&(k[0]=0),m.s11n.deserialize.time+=performance.now()-pe,ve},c.s11n.serialize=function(...J){let pe=performance.now();if(++m.s11n.serialize.count,J.length){let xe=[],ve=0,qe=1;for(k[0]=J.length&255;ve<J.length;++ve,++qe)xe.push(Z(J[ve])),k[qe]=xe[ve].id;for(ve=0;ve<J.length;++ve){let I=xe[ve];if(I.setter)D[I.setter](qe,J[ve],c.littleEndian),qe+=I.size;else{let U=S.encode(J[ve]);D.setInt32(qe,U.byteLength,c.littleEndian),qe+=4,k.set(U,qe),qe+=U.byteLength}}}else k[0]=0;m.s11n.serialize.time+=performance.now()-pe},c.s11n},W=function q(S=16){q._chars||(q._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",q._n=q._chars.length);let k=[],D=0;for(;D<S;++D){let N=Math.random()*(q._n*64)%q._n|0;k[D]=q._chars[N]}return k.join("")},te=Object.create(null),Y=Object.create(null);Y.op=void 0,Y.start=void 0;let ne=q=>{Y.start=performance.now(),Y.op=q,++m[q].count},le=()=>m[Y.op].time+=performance.now()-Y.start,M={xCheckReservedLock:function(q,S){let k=te[q];return b.poke(S,k.lockType?1:0,"i32"),0},xClose:function(q){ne("xClose");let S=0,k=te[q];return k&&(delete te[q],S=w("xClose",q),k.sq3File&&k.sq3File.dispose()),le(),S},xDeviceCharacteristics:function(q){return _.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(q,S,k){return _.SQLITE_NOTFOUND},xFileSize:function(q,S){ne("xFileSize");let k=w("xFileSize",q);if(k==0)try{let D=c.s11n.deserialize()[0];b.poke(S,D,"i64")}catch(D){h("Unexpected error reading xFileSize() result:",D),k=c.sq3Codes.SQLITE_IOERR}return le(),k},xLock:function(q,S){ne("xLock");let k=te[q],D=0;return k.lockType?k.lockType=S:(D=w("xLock",q,S),D===0&&(k.lockType=S)),le(),D},xRead:function(q,S,k,D){ne("xRead");let N=te[q],Z;try{Z=w("xRead",q,k,Number(D)),(Z===0||_.SQLITE_IOERR_SHORT_READ===Z)&&b.heap8u().set(N.sabView.subarray(0,k),S)}catch(ce){h("xRead(",arguments,") failed:",ce,N),Z=_.SQLITE_IOERR_READ}return le(),Z},xSync:function(q,S){ne("xSync"),++m.xSync.count;let k=w("xSync",q,S);return le(),k},xTruncate:function(q,S){ne("xTruncate");let k=w("xTruncate",q,Number(S));return le(),k},xUnlock:function(q,S){ne("xUnlock");let k=te[q],D=0;return _.SQLITE_LOCK_NONE===S&&k.lockType&&(D=w("xUnlock",q,S)),D===0&&(k.lockType=S),le(),D},xWrite:function(q,S,k,D){ne("xWrite");let N=te[q],Z;try{N.sabView.set(b.heap8u().subarray(S,S+k)),Z=w("xWrite",q,k,Number(D))}catch(ce){h("xWrite(",arguments,") failed:",ce,N),Z=_.SQLITE_IOERR_WRITE}return le(),Z}},E={xAccess:function(q,S,k,D){ne("xAccess");let N=w("xAccess",b.cstrToJs(S));return b.poke(D,N?0:1,"i32"),le(),0},xCurrentTime:function(q,S){return b.poke(S,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(q,S){return b.poke(S,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(q,S,k){ne("xDelete");let D=w("xDelete",b.cstrToJs(S),k,!1);return le(),D},xFullPathname:function(q,S,k,D){return b.cstrncpy(D,S,k)<k?0:_.SQLITE_CANTOPEN},xGetLastError:function(q,S,k){return $("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(S,k,D,N,Z){ne("xOpen");let ce=0;k===0?k=W():typeof k=="number"&&(_.sqlite3_uri_boolean(k,"opfs-unlock-asap",0)&&(ce|=c.opfsFlags.OPFS_UNLOCK_ASAP),k=b.cstrToJs(k));let J=Object.create(null);J.fid=D,J.filename=k,J.sab=new SharedArrayBuffer(c.fileBufferSize),J.flags=N;let pe=w("xOpen",D,k,N,ce);return pe||(J.readOnly&&b.poke(Z,_.SQLITE_OPEN_READONLY,"i32"),te[D]=J,J.sabView=c.sabFileBufView,J.sq3File=new v(D),J.sq3File.$pMethods=z.pointer,J.lockType=_.SQLITE_LOCK_NONE),le(),pe}};if(l&&(u.$xRandomness=l.$xRandomness,u.$xSleep=l.$xSleep),u.$xRandomness||(E.xRandomness=function(q,S,k){let D=b.heap8u(),N=0;for(;N<S;++N)D[k+N]=Math.random()*255e3&255;return N}),u.$xSleep||(E.xSleep=function(q,S){return Atomics.wait(c.sabOPView,c.opIds.xSleep,0,S),0}),P.getResolvedPath=function(q,S){let k=new URL(q,"file://irrelevant").pathname;return S?k.split("/").filter(D=>!!D):k},P.getDirForFilename=async function(S,k=!1){let D=P.getResolvedPath(S,!0),N=D.pop(),Z=P.rootDirectory;for(let ce of D)ce&&(Z=await Z.getDirectoryHandle(ce,{create:!!k}));return[Z,N]},P.mkdir=async function(q){try{return await P.getDirForFilename(q+"/filepart",!0),!0}catch{return!1}},P.entryExists=async function(q){try{let[S,k]=await P.getDirForFilename(q);return await S.getFileHandle(k),!0}catch{return!1}},P.randomFilename=W,P.registerVfs=(q=!1)=>b.exports.sqlite3_vfs_register(u.pointer,q?1:0),P.treeList=async function(){let q=async function k(D,N){N.name=D.name,N.dirs=[],N.files=[];for await(let Z of D.values())if(Z.kind==="directory"){let ce=Object.create(null);N.dirs.push(ce),await k(Z,ce)}else N.files.push(Z.name)},S=Object.create(null);return await q(P.rootDirectory,S),S},P.rmfr=async function(){let q=P.rootDirectory,S={recurse:!0};for await(let k of q.values())q.removeEntry(k.name,S)},P.unlink=async function(q,S=!1,k=!1){try{let[D,N]=await P.getDirForFilename(q,!1);return await D.removeEntry(N,{recursive:S}),!0}catch(D){if(k)throw new Error("unlink(",arguments[0],") failed: "+D.message,{cause:D});return!1}},P.traverse=async function(q){let S={recursive:!0,directory:P.rootDirectory};typeof q=="function"&&(q={callback:q}),q=Object.assign(S,q||{}),async function D(N,Z){for await(let ce of N.values()){if(q.callback(ce,N,Z)===!1)return!1;if(q.recursive&&ce.kind==="directory"&&await D(ce,Z+1)===!1)break}}(q.directory,0)},P.importDb=async function(q,S){S instanceof ArrayBuffer&&(S=new Uint8Array(S));let k=S.byteLength;(k<512||k%512!=0)&&f("Byte array size is invalid for an SQLite db.");let D="SQLite format 3";for(let J=0;J<D.length;++J)D.charCodeAt(J)!==S[J]&&f("Input does not contain an SQLite database header.");let N,[Z,ce]=await P.getDirForFilename(q,!0);try{N=await(await Z.getFileHandle(ce,{create:!0})).createSyncAccessHandle(),N.truncate(0);let pe=N.write(S,{at:0});return pe!=k&&f("Expected to write "+k+" bytes but wrote "+pe+"."),N.write(new Uint8Array([1,1]),{at:18}),pe}catch(J){throw N&&(await N.close(),N=void 0),await Z.removeEntry(ce).catch(()=>{}),J}finally{N&&await N.close()}},e.oo1){let q=function(...S){let k=e.oo1.DB.dbCtorHelper.normalizeArgs(...S);k.vfs=u.$zName,e.oo1.DB.dbCtorHelper.call(this,k)};q.prototype=Object.create(e.oo1.DB.prototype),e.oo1.OpfsDb=q,q.importDb=P.importDb,e.oo1.DB.dbCtorHelper.setVfsPostOpenSql(u.pointer,function(S,k){k.capi.sqlite3_busy_timeout(S,1e4),k.capi.sqlite3_exec(S,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}let F=function(){let q=b.scopedAllocPush(),S=new v;try{let k=S.pointer,D=_.SQLITE_OPEN_CREATE|_.SQLITE_OPEN_READWRITE|_.SQLITE_OPEN_MAIN_DB,N=b.scopedAlloc(8),Z="/sanity/check/file"+W(8),ce=b.scopedAllocCString(Z),J;if(c.s11n.serialize("This is \xE4 string."),J=c.s11n.deserialize(),V("deserialize() says:",J),J[0]!=="This is \xE4 string."&&f("String d13n error."),E.xAccess(u.pointer,ce,0,N),J=b.peek(N,"i32"),V("xAccess(",Z,") exists ?=",J),J=E.xOpen(u.pointer,ce,k,D,N),V("open rc =",J,"state.sabOPView[xOpen] =",c.sabOPView[c.opIds.xOpen]),J!==0){h("open failed with code",J);return}E.xAccess(u.pointer,ce,0,N),J=b.peek(N,"i32"),J||f("xAccess() failed to detect file."),J=M.xSync(S.pointer,0),J&&f("sync failed w/ rc",J),J=M.xTruncate(S.pointer,1024),J&&f("truncate failed w/ rc",J),b.poke(N,0,"i64"),J=M.xFileSize(S.pointer,N),J&&f("xFileSize failed w/ rc",J),V("xFileSize says:",b.peek(N,"i64")),J=M.xWrite(S.pointer,ce,10,1),J&&f("xWrite() failed!");let pe=b.scopedAlloc(16);J=M.xRead(S.pointer,pe,6,2),b.poke(pe+6,0);let xe=b.cstrToJs(pe);V("xRead() got:",xe),xe!=="sanity"&&f("Unexpected xRead() value."),E.xSleep&&(V("xSleep()ing before close()ing..."),E.xSleep(u.pointer,2e3),V("waking up from xSleep()")),J=M.xClose(k),V("xClose rc =",J,"sabOPView =",c.sabOPView),V("Deleting file:",Z),E.xDelete(u.pointer,ce,4660),E.xAccess(u.pointer,ce,0,N),J=b.peek(N,"i32"),J&&f("Expecting 0 from xAccess(",Z,") after xDelete()."),$("End of OPFS sanity checks.")}finally{S.dispose(),b.scopedAllocPop(q)}};O.onmessage=function({data:q}){switch(q.type){case"opfs-unavailable":A(new Error(q.payload.join(" ")));break;case"opfs-async-loaded":O.postMessage({type:"opfs-async-init",args:c});break;case"opfs-async-inited":{if(y===!0)break;try{e.vfs.installVfs({io:{struct:z,methods:M},vfs:{struct:u,methods:E}}),c.sabOPView=new Int32Array(c.sabOP),c.sabFileBufView=new Uint8Array(c.sabIO,0,c.fileBufferSize),c.sabS11nView=new Uint8Array(c.sabIO,c.sabS11nOffset,c.sabS11nSize),B(),r.sanityChecks&&($("Running sanity checks because of opfs-sanity-check URL arg..."),F()),R()?navigator.storage.getDirectory().then(S=>{O.onerror=O._originalOnError,delete O._originalOnError,e.opfs=P,P.rootDirectory=S,V("End of OPFS sqlite3_vfs setup.",u),L()}).catch(A):L()}catch(S){h(S),A(S)}break}default:{let S="Unexpected message from the OPFS async worker: "+JSON.stringify(q);h(S),A(new Error(S));break}}}}))};s.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async o=>{try{let r=s.defaultProxyUri;return o.scriptInfo.sqlite3Dir&&(s.defaultProxyUri=o.scriptInfo.sqlite3Dir+r),s().catch(i=>{o.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",i.message)})}catch(r){return o.config.error("installOpfsVfs() exception:",r),Promise.reject(r)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){"use strict";let s=e.util.toss,o=e.util.toss3,r=Object.create(null),i=e.capi,p=e.wasm,g=4096,T=512,j=4,Q=8,V=T+j,$=T,h=V,f=g,_=i.SQLITE_OPEN_MAIN_DB|i.SQLITE_OPEN_MAIN_JOURNAL|i.SQLITE_OPEN_SUPER_JOURNAL|i.SQLITE_OPEN_WAL,b=".opaque",x=()=>Math.random().toString(36).slice(2),v=new TextDecoder,C=new TextEncoder,P=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),R=[e.config.error,e.config.warn,e.config.log],z=e.config.log,u=e.config.warn,y=e.config.error,A=new Map,L=M=>A.get(M),O=(M,E)=>{E?A.set(M,E):A.delete(M)},d=new Map,l=M=>d.get(M),c=(M,E)=>{E?d.set(M,E):d.delete(M)},m={xCheckReservedLock:function(M,E){let F=l(M);return F.log("xCheckReservedLock"),F.storeErr(),p.poke32(E,1),0},xClose:function(M){let E=l(M);E.storeErr();let F=E.getOFileForS3File(M);if(F)try{E.log(`xClose ${F.path}`),E.mapS3FileToOFile(M,!1),F.sah.flush(),F.flags&i.SQLITE_OPEN_DELETEONCLOSE&&E.deletePath(F.path)}catch(q){return E.storeErr(q),i.SQLITE_IOERR}return 0},xDeviceCharacteristics:function(M){return i.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(M,E,F){return i.SQLITE_NOTFOUND},xFileSize:function(M,E){let F=l(M);F.log("xFileSize");let S=F.getOFileForS3File(M).sah.getSize()-f;return p.poke64(E,BigInt(S)),0},xLock:function(M,E){let F=l(M);F.log(`xLock ${E}`),F.storeErr();let q=F.getOFileForS3File(M);return q.lockType=E,0},xRead:function(M,E,F,q){let S=l(M);S.storeErr();let k=S.getOFileForS3File(M);S.log(`xRead ${k.path} ${F} @ ${q}`);try{let D=k.sah.read(p.heap8u().subarray(E,E+F),{at:f+Number(q)});return D<F?(p.heap8u().fill(0,E+D,E+F),i.SQLITE_IOERR_SHORT_READ):0}catch(D){return S.storeErr(D),i.SQLITE_IOERR}},xSectorSize:function(M){return g},xSync:function(M,E){let F=l(M);F.log(`xSync ${E}`),F.storeErr();let q=F.getOFileForS3File(M);try{return q.sah.flush(),0}catch(S){return F.storeErr(S),i.SQLITE_IOERR}},xTruncate:function(M,E){let F=l(M);F.log(`xTruncate ${E}`),F.storeErr();let q=F.getOFileForS3File(M);try{return q.sah.truncate(f+Number(E)),0}catch(S){return F.storeErr(S),i.SQLITE_IOERR}},xUnlock:function(M,E){let F=l(M);F.log("xUnlock");let q=F.getOFileForS3File(M);return q.lockType=E,0},xWrite:function(M,E,F,q){let S=l(M);S.storeErr();let k=S.getOFileForS3File(M);S.log(`xWrite ${k.path} ${F} ${q}`);try{return k.sah.write(p.heap8u().subarray(E,E+F),{at:f+Number(q)})===F?0:i.SQLITE_IOERR}catch(D){return S.storeErr(D),i.SQLITE_IOERR}}},w=new i.sqlite3_io_methods;w.$iVersion=1,e.vfs.installVfs({io:{struct:w,methods:m}});let B={xAccess:function(M,E,F,q){let S=L(M);S.storeErr();try{let k=S.getPath(E);p.poke32(q,S.hasFilename(k)?1:0)}catch{p.poke32(q,0)}return 0},xCurrentTime:function(M,E){return p.poke(E,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(M,E){return p.poke(E,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(M,E,F){let q=L(M);q.log(`xDelete ${p.cstrToJs(E)}`),q.storeErr();try{return q.deletePath(q.getPath(E)),0}catch(S){return q.storeErr(S),i.SQLITE_IOERR_DELETE}},xFullPathname:function(M,E,F,q){return p.cstrncpy(q,E,F)<F?0:i.SQLITE_CANTOPEN},xGetLastError:function(M,E,F){let q=L(M);q.log(`xGetLastError ${E}`);let S=q.popErr();if(S){let k=p.scopedAllocPush();try{let[D,N]=p.scopedAllocCString(S.message,!0);p.cstrncpy(F,D,E),N>E&&p.poke8(F+E-1,0)}catch{return i.SQLITE_NOMEM}finally{p.scopedAllocPop(k)}}return 0},xOpen:function(E,F,q,S,k){let D=L(E);try{D.log(`xOpen ${p.cstrToJs(F)} ${S}`);let N=F&&p.peek8(F)?D.getPath(F):x(),Z=D.getSAHForPath(N);!Z&&S&i.SQLITE_OPEN_CREATE&&(D.getFileCount()<D.getCapacity()?(Z=D.nextAvailableSAH(),D.setAssociatedPath(Z,N,S)):s("SAH pool is full. Cannot create file",N)),Z||s("file not found:",N);let ce={path:N,flags:S,sah:Z};D.mapS3FileToOFile(q,ce),ce.lockType=i.SQLITE_LOCK_NONE;let J=new i.sqlite3_file(q);return J.$pMethods=w.pointer,J.dispose(),p.poke32(k,S),0}catch(N){return D.storeErr(N),i.SQLITE_CANTOPEN}}},W=function(M){e.capi.sqlite3_vfs_find(M)&&o("VFS name is already registered:",M);let E=new i.sqlite3_vfs,F=i.sqlite3_vfs_find(null),q=F?new i.sqlite3_vfs(F):null;return E.$iVersion=2,E.$szOsFile=i.sqlite3_file.structInfo.sizeof,E.$mxPathname=T,E.addOnDispose(E.$zName=p.allocCString(M),()=>O(E.pointer,0)),q&&(E.$xRandomness=q.$xRandomness,E.$xSleep=q.$xSleep,q.dispose()),!E.$xRandomness&&!B.xRandomness&&(B.xRandomness=function(S,k,D){let N=p.heap8u(),Z=0;for(;Z<k;++Z)N[D+Z]=Math.random()*255e3&255;return Z}),!E.$xSleep&&!B.xSleep&&(B.xSleep=(S,k)=>0),e.vfs.installVfs({vfs:{struct:E,methods:B}}),E};class te{vfsDir;#e;#i;#a;#r=new Map;#n=new Map;#s=new Set;#l=new Map;#t=new Uint8Array(V);#c;#o;#_;constructor(E=Object.create(null)){this.#_=E.verbosity??P.verbosity,this.vfsName=E.name||P.name,this.#o=W(this.vfsName),O(this.#o.pointer,this),this.vfsDir=E.directory||"."+this.vfsName,this.#c=new DataView(this.#t.buffer,this.#t.byteOffset),this.isReady=this.reset(!!(E.clearOnInit??P.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(E.initialCapacity||P.initialCapacity)})}#u(E,...F){this.#_>E&&R[E](this.vfsName+":",...F)}log(...E){this.#u(2,...E)}warn(...E){this.#u(1,...E)}error(...E){this.#u(0,...E)}getVfs(){return this.#o}getCapacity(){return this.#r.size}getFileCount(){return this.#n.size}getFileNames(){let E=[],F=this.#n.keys();for(let q of F)E.push(q);return E}async addCapacity(E){for(let F=0;F<E;++F){let q=x(),k=await(await this.#i.getFileHandle(q,{create:!0})).createSyncAccessHandle();this.#r.set(k,q),this.setAssociatedPath(k,"",0)}return this.getCapacity()}async reduceCapacity(E){let F=0;for(let q of Array.from(this.#s)){if(F===E||this.getFileCount()===this.getCapacity())break;let S=this.#r.get(q);q.close(),await this.#i.removeEntry(S),this.#r.delete(q),this.#s.delete(q),++F}return F}releaseAccessHandles(){for(let E of this.#r.keys())E.close();this.#r.clear(),this.#n.clear(),this.#s.clear()}async acquireAccessHandles(E){let F=[];for await(let[q,S]of this.#i)S.kind==="file"&&F.push([q,S]);return Promise.all(F.map(async([q,S])=>{try{let k=await S.createSyncAccessHandle();if(this.#r.set(k,q),E)k.truncate(f),this.setAssociatedPath(k,"",0);else{let D=this.getAssociatedPath(k);D?this.#n.set(D,k):this.#s.add(k)}}catch(k){throw this.storeErr(k),this.releaseAccessHandles(),k}}))}getAssociatedPath(E){E.read(this.#t,{at:0});let F=this.#c.getUint32($);if(this.#t[0]&&(F&i.SQLITE_OPEN_DELETEONCLOSE||!(F&_)))return u(`Removing file with unexpected flags ${F.toString(16)}`,this.#t),this.setAssociatedPath(E,"",0),"";let q=new Uint32Array(Q/4);E.read(q,{at:h});let S=this.computeDigest(this.#t);if(q.every((k,D)=>k===S[D])){let k=this.#t.findIndex(D=>D===0);return k===0&&E.truncate(f),k?v.decode(this.#t.subarray(0,k)):""}else return u("Disassociating file with bad digest."),this.setAssociatedPath(E,"",0),""}setAssociatedPath(E,F,q){let S=C.encodeInto(F,this.#t);T<=S.written+1&&s("Path too long:",F),this.#t.fill(0,S.written,T),this.#c.setUint32($,q);let k=this.computeDigest(this.#t);E.write(this.#t,{at:0}),E.write(k,{at:h}),E.flush(),F?(this.#n.set(F,E),this.#s.delete(E)):(E.truncate(f),this.#s.add(E))}computeDigest(E){let F=3735928559,q=1103547991;for(let S of E)F=31*F+S*307,q=31*q+S*307;return new Uint32Array([F>>>0,q>>>0])}async reset(E){await this.isReady;let F=await navigator.storage.getDirectory(),q,S;for(let k of this.vfsDir.split("/"))k&&(q=F,F=await F.getDirectoryHandle(k,{create:!0}));return this.#e=F,this.#a=q,this.#i=await this.#e.getDirectoryHandle(b,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(E)}getPath(E){return p.isPtr(E)&&(E=p.cstrToJs(E)),(E instanceof URL?E:new URL(E,"file://localhost/")).pathname}deletePath(E){let F=this.#n.get(E);return F&&(this.#n.delete(E),this.setAssociatedPath(F,"",0)),!!F}storeErr(E){return E&&this.error(E),this.$error=E}popErr(){let E=this.$error;return this.$error=void 0,E}nextAvailableSAH(){let[E]=this.#s.keys();return E}getOFileForS3File(E){return this.#l.get(E)}mapS3FileToOFile(E,F){F?(this.#l.set(E,F),c(E,this)):(this.#l.delete(E),c(E,!1))}hasFilename(E){return this.#n.has(E)}getSAHForPath(E){return this.#n.get(E)}async removeVfs(){if(!this.#o.pointer||!this.#i)return!1;i.sqlite3_vfs_unregister(this.#o.pointer),this.#o.dispose();try{this.releaseAccessHandles(),await this.#e.removeEntry(b,{recursive:!0}),this.#i=void 0,await this.#a.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#a=void 0}catch(E){e.config.error(this.vfsName,"removeVfs() failed:",E)}return!0}exportFile(E){let F=this.#n.get(E)||s("File not found:",E),q=F.getSize()-f,S=new Uint8Array(q>0?q:0);if(q>0){let k=F.read(S,{at:f});k!=q&&s("Expected to read "+q+" bytes but read "+k+".")}return S}importDb(E,F){F instanceof ArrayBuffer&&(F=new Uint8Array(F));let q=F.byteLength;(q<512||q%512!=0)&&s("Byte array size is invalid for an SQLite db.");let S="SQLite format 3";for(let N=0;N<S.length;++N)S.charCodeAt(N)!==F[N]&&s("Input does not contain an SQLite database header.");let k=this.#n.get(E)||this.nextAvailableSAH()||s("No available handles to import to."),D=k.write(F,{at:f});D!=q?(this.setAssociatedPath(k,"",0),s("Expected to write "+q+" bytes but wrote "+D+".")):(k.write(new Uint8Array([1,1]),{at:f+18}),this.setAssociatedPath(k,E,i.SQLITE_OPEN_MAIN_DB))}}class Y{#e;constructor(E){this.#e=E,this.vfsName=E.vfsName}async addCapacity(E){return this.#e.addCapacity(E)}async reduceCapacity(E){return this.#e.reduceCapacity(E)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(E){let F=this.#e.getCapacity();return F<E?this.#e.addCapacity(E-F):F}exportFile(E){return this.#e.exportFile(E)}importDb(E,F){return this.#e.importDb(E,F)}async wipeFiles(){return this.#e.reset(!0)}unlink(E){return this.#e.deletePath(E)}async removeVfs(){return this.#e.removeVfs()}}let ne=async()=>{let M=await navigator.storage.getDirectory(),E=".opfs-sahpool-sync-check-"+x(),S=(await(await M.getFileHandle(E,{create:!0})).createSyncAccessHandle()).close();return await S,await M.removeEntry(E),S?.then&&s("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0},le=0;e.installOpfsSAHPoolVfs=async function(M=Object.create(null)){let E=M.name||P.name;return r[E]?r[E]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?r[E]=Promise.reject(new Error("Missing required OPFS APIs.")):r[E]=ne().then(async function(){if(M.$testThrowInInit)throw M.$testThrowInInit;let F=new te(M);return F.isReady.then(async()=>{let q=new Y(F);if(e.oo1){let S=e.oo1,k=F.getVfs(),D=function(...N){let Z=S.DB.dbCtorHelper.normalizeArgs(...N);Z.vfs=k.$zName,S.DB.dbCtorHelper.call(this,Z)};D.prototype=Object.create(S.DB.prototype),q.OpfsSAHPoolDb=D,S.DB.dbCtorHelper.setVfsPostOpenSql(k.pointer,function(N,Z){Z.capi.sqlite3_exec(N,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return F.log("VFS initialized."),q}).catch(async q=>(await F.removeVfs().catch(()=>{}),q))}).catch(F=>r[E]=Promise.reject(F))}}),typeof n<"u"){let e=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?n.asm:wasmExports,memory:n.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=e;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(o){throw console.error("sqlite3ApiBootstrap() error:",o),o}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}n.sqlite3=s}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),ee.ready}})(),cl=function(){let H=pt;if(!H)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");let K=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(K.debugModule=K.urlParams.has("sqlite3.debugModule")?(...ee)=>console.warn("sqlite3.debugModule:",...ee):()=>{},K.urlParams.has("sqlite3.dir"))K.sqlite3Dir=K.urlParams.get("sqlite3.dir")+"/";else if(K.moduleScript){let ee=K.moduleScript.src.split("/");ee.pop(),K.sqlite3Dir=ee.join("/")+"/"}if(globalThis.sqlite3InitModule=function ee(...t){return H(...t).then(ae=>{let _e=ae.sqlite3;_e.scriptInfo=K,ee.__isUnderTest&&(_e.__isUnderTest=!0);let we=_e.asyncPostInit;return delete _e.asyncPostInit,we()}).catch(ae=>{throw console.error("Exception loading sqlite3 module:",ae),ae})},globalThis.sqlite3InitModule.ready=H.ready,globalThis.sqlite3InitModuleState.moduleScript){let ee=globalThis.sqlite3InitModuleState,t=ee.moduleScript.src.split("/");t.pop(),ee.scriptDir=t.join("/")+"/"}return K.debugModule("sqlite3InitModuleState =",K),globalThis.sqlite3InitModule}();pt=cl;var Yt=pt;var Zt=Yt;var ul=async(H,K)=>{let t=await(await fetch(K)).arrayBuffer(),ae=H.wasm.allocFromTypedArray(t),_e=new H.oo1.DB,we=H.capi.sqlite3_deserialize(_e.pointer,"main",ae,t.byteLength,t.byteLength,H.capi.SQLITE_DESERIALIZE_FREEONCLOSE);return _e.checkRc(we),_e};function _l(H){let K=H.message.indexOf(":");return H.message.startsWith("sqlite3")&&K>0?H.message.substring(K+1).trim():"Unspecified database error"}var fl=async(H,K)=>{let ee=Jt(K),t=1;for(;t>=0;)try{await zt({location:K,filename:ee});let ae=new H.oo1.OpfsDb(ee),_e=[],we="SELECT name FROM sqlite_master;";return ae.exec({sql:we,rowMode:"object",resultRows:_e}),ae}catch(ae){if(t===0){let _e=_l(ae);throw new TypeError(_e,{cause:ae})}await Wt({filename:ee}),t-=1}return Promise.resolve()},pl=async(H,K)=>"opfs"in H?fl(H,K):ul(H,K),dl=(...H)=>console.log(...H),ml=(...H)=>console.error(...H),dt=class{constructor(){this.db=null,this.sqlite3=null}async initialize(K){return this.sqlite3=await Zt({print:dl,printErr:ml}),this.db=await pl(this.sqlite3,K),{sqlite3Version:this.sqlite3.version.libVersion,opfs:"opfs"in this.sqlite3}}async query(K,ee){try{let t=[];return this.db.exec({sql:K,rowMode:"object",resultRows:t,bind:ee}),{result:t}}catch(t){return{result:[],error:t.message}}}async cleanup(){return{result:await Qt()}}async close(){return this.db.close(),{}}};Xt(new dt);
